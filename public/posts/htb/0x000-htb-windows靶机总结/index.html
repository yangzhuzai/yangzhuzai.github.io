<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>0X000 HTB windows靶机总结 | 养猪日记</title>
<meta name=keywords content><meta name=description content="个人打靶经历，不追求完美，只是记录，早些记录较为粗糙，见谅。
0x001：Bastard  中等 非域
渗透路线：drupal web漏洞&ndash;>fuzz端点&ndash;>修改poc&ndash;>getshell&ndash;>提权使用winpeass&ndash;>ms15-051
考点：drupal漏洞信息查找、fuzz的理解、poc理解和使用
0x002：Arctic 简单 非域
渗透思路：端口扫描无果&ndash;>http访问&ndash;>发现adobe coldfusion&ndash;>漏洞信息查找&ndash;>漏洞利用getshgell&ndash;>提权使用winpeass&ndash;>ms16-032
考点：较为简单，思路常规，正常渗透即可完成
0x003：Devel 简单 非域
渗透思路：FTP匿名登录&ndash;>发现web网站和匿名登录目录一致&ndash;>生成asp木马反弹shell&ndash;>提权使用winpeass&ndash;>ms16-032
考点：较为简单，思路常规，正常渗透即可完成
0x004：Bastion 中等 非域
渗透思路：smb匿名访问&ndash;>windows image backup &ndash;>发现vhd的备份文件 &ndash;>发现是C盘&ndash;>导出SAM和SYSTEM文件&ndash;>读取hash&ndash;>破解&ndash;>提权
提权无法直接通过脚本提示，需要查找软件目录，发现非常规软件mRemoteNG&mdash;>信息查找，发现该软件可能存在密码读取的情况&ndash;>漏洞利用，提取administrator密码成功
考点：VHD硬盘备份、sam文件读取、mRemoteNG密码提取；知识点盲区是本靶场的核心问题。
0x005：Blue 简单 非域
渗透思路：nmap告诉存在ms17-010&ndash;>需要了解python如何实现ms17-010
考点：在不依赖msf的情况下，如何打ms17-010
0x006：Bounty 简单 非域
渗透思路：目录扫描发现上传功能&ndash;>但是无法上传正常的后缀&ndash;>通过fuzz发现可上传.config后缀&ndash;>该后缀在II7.0以上可以getshell&ndash;>提权ms16-032
考点：config getshell
0x007：Acute 困难 域渗透（非常规打法）
端口扫描：
发现443 https端口，浏览器访问失效，通过证书发现域名，修改hosts文件，成功访问到了网页。
web渗透：
首页about us，泄露部分出名员工名称，同时有个新人表单，通过新人表单，可以发现PSWA入口以及默认密码：Password1!，以及创建者主机信息：Acute-PC01以及Lois用户是网站管理员等信息；通过泄露的员工名，拼接首字母和后面的名，使用默认密码，成功撞库PSWA，获取立足点powershell，普通权限，用户名：acute\edavies。
后渗透阶段：
这台靶机目前最好还是使用meterpreter，完全避免使用meterpreter的话，会花费巨量时间，以及部分功能可能无法通过脚本实现。
后渗透-横向移动阶段1：
通过查看当前的远程登录会话，可以发现目前的用户acute\edavies是使用了RDP的，使用meterpreter的屏幕监控功能，查看当前用户的操作，发现了另外一台主机名为：ATSSERVER，以及一个相关凭证：密码：W3_4R3_th3_f0rce.用户：acute\imonks，使用powershell，申请凭证，获取到ATSSERVER普通权限，可以拿到第一个user.txt，同时使用这个用户可以发现Program Files目录下有个keepmeon目录，是用户安装的，非常规软件目录，但是当前\imonks用户没有权限进入。
后渗透-横向移动阶段2：
在第一个user.txt的附近有主机Acute-PC01的脚本信息，虽然密码进行了加密，但是可以修改脚本达到命令执行的效果，反弹一个脚本内用户的权限为：acute\jmorgan，属于本地管理员用户组，也就是说我们拿到了Acute-PC01主机的管理员权限。
后渗透-横向移动阶段3：
使用Acute-PC01主机的管理员权限dumphash，拿到本地administrator的密码，但是无法登录ATSSERVER，由于我们之前拥有ATSSERVER的imonks用户，通过查看用户目录，可以知道该主机有哪些用户登录过了，使用Acute-PC01主机的密码进行喷洒，成功获取了一个名为awallace的用户。
后渗透-横向移动阶段4：
awallace用户可以进去keepmeon目录，这个目录下面有个bat文件，内容为计划任务，执行者为Lois，该用户是最开始告诉我们的网站管理员，同时在域内查找用户组，可以发现，site_admin用户组，该用户组属于domain admin group用户组，也就是说这个计划任务可以让我们获得域管理员组权限，利用这个BAT提权成功，即可获得ATSSERVER主机的管理员权限，拿到最终的flag.
考点：1、信息收集；2、pswa；3、powershell熟练度；4、内网信息收集，密码获取；5、计划任务提权
放在最后：这个靶机的打法及其非常规，最开始的信息收集便在一直挑战打靶者的思路完善程度，内网的提权和信息收集过程，更是把两个机器当成一个整体的思维在进行渗透，信息收集的程度堪称离谱，powershell的熟悉程度也是一个不小的挑战，最后的来回横跳巨爽。
0x008：Timelapse 简单 域渗透
渗透思路：
smb匿名访问&ndash;>zip文件&ndash;>破解发现pfx文件&ndash;>再次破解&ndash;>提取出私钥和公钥&ndash;>wirm登录&ndash;>提权，通过查看powershell历史记录，发现账号密码&ndash;>发现该账号具有laps_readers组权限，可以读取administraor密码
考点：1、PFX；2、laps_readers
0x009：StreamIO 中等 域渗透
渗透思路：
web渗透&ndash;>注意证书的域名变化&ndash;>再次目录扫描&ndash;>发现sql注入&ndash;>获取网站的用户名和密码&ndash;>通过burp爆破，成功获取到合法用户&ndash;>进入后台，注意url存在?&ndash;>fuzz发现debug参数&ndash;>是个文件包含，需要使用base64带出&ndash;>这里的思路有点非常规，爆破当前目录，发现master.php，读取它&ndash;>发现它接收post提交的参数，并执行&ndash;>通过文件包含，并携带参数，命令执行反弹shell&ndash;>读取数据库账号密码&ndash;>winrm登录&ndash;>读取浏览器密码&ndash;>获取到JDgodd用户权限&ndash;>修改CORE STAFF组的拥有者为JDgodd，把自己添加到组内，并修改dacl，读取密码"><meta name=author content="养猪日记"><link rel=canonical href=http://localhost:1313/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=分类><span>分类</span></a></li><li><a href=http://localhost:1313/search/ title=搜索><span>搜索</span></a></li><li><a href=https://github.com/yangzhuzai title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">0X000 HTB windows靶机总结</h1><div class=post-meta><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;240 words&nbsp;·&nbsp;养猪日记</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><p>个人打靶经历，不追求完美，只是记录，早些记录较为粗糙，见谅。</p><h1 id=0x001bastard--中等-非域>0x001：Bastard 中等 非域<a hidden class=anchor aria-hidden=true href=#0x001bastard--中等-非域>#</a></h1><p>渗透路线：drupal web漏洞&ndash;>fuzz端点&ndash;>修改poc&ndash;>getshell&ndash;>提权使用winpeass&ndash;>ms15-051</p><p>考点：drupal漏洞信息查找、fuzz的理解、poc理解和使用</p><h1 id=0x002arctic-简单-非域>0x002：Arctic 简单 非域<a hidden class=anchor aria-hidden=true href=#0x002arctic-简单-非域>#</a></h1><p>渗透思路：端口扫描无果&ndash;>http访问&ndash;>发现adobe coldfusion&ndash;>漏洞信息查找&ndash;>漏洞利用getshgell&ndash;>提权使用winpeass&ndash;>ms16-032</p><p>考点：较为简单，思路常规，正常渗透即可完成</p><h1 id=0x003devel-简单-非域>0x003：Devel 简单 非域<a hidden class=anchor aria-hidden=true href=#0x003devel-简单-非域>#</a></h1><p>渗透思路：FTP匿名登录&ndash;>发现web网站和匿名登录目录一致&ndash;>生成asp木马反弹shell&ndash;>提权使用winpeass&ndash;>ms16-032</p><p>考点：较为简单，思路常规，正常渗透即可完成</p><h1 id=0x004bastion-中等-非域>0x004：Bastion 中等 非域<a hidden class=anchor aria-hidden=true href=#0x004bastion-中等-非域>#</a></h1><p>渗透思路：smb匿名访问&ndash;>windows image backup &ndash;>发现vhd的备份文件 &ndash;>发现是C盘&ndash;>导出SAM和SYSTEM文件&ndash;>读取hash&ndash;>破解&ndash;>提权</p><p>提权无法直接通过脚本提示，需要查找软件目录，发现非常规软件mRemoteNG&mdash;>信息查找，发现该软件可能存在密码读取的情况&ndash;>漏洞利用，提取administrator密码成功</p><p>考点：VHD硬盘备份、sam文件读取、mRemoteNG密码提取；知识点盲区是本靶场的核心问题。</p><h1 id=0x005blue-简单-非域>0x005：Blue 简单 非域<a hidden class=anchor aria-hidden=true href=#0x005blue-简单-非域>#</a></h1><p>渗透思路：nmap告诉存在ms17-010&ndash;>需要了解python如何实现ms17-010</p><p>考点：在不依赖msf的情况下，如何打ms17-010</p><h1 id=0x006bounty-简单-非域>0x006：Bounty 简单 非域<a hidden class=anchor aria-hidden=true href=#0x006bounty-简单-非域>#</a></h1><p>渗透思路：目录扫描发现上传功能&ndash;>但是无法上传正常的后缀&ndash;>通过fuzz发现可上传.config后缀&ndash;>该后缀在II7.0以上可以getshell&ndash;>提权ms16-032</p><p>考点：config getshell</p><h1 id=0x007acute-困难-域渗透非常规打法>0x007：Acute 困难 域渗透（非常规打法）<a hidden class=anchor aria-hidden=true href=#0x007acute-困难-域渗透非常规打法>#</a></h1><p>端口扫描：</p><p>发现443 https端口，浏览器访问失效，通过证书发现域名，修改hosts文件，成功访问到了网页。</p><p>web渗透：</p><p>首页about us，泄露部分出名员工名称，同时有个新人表单，通过新人表单，可以发现PSWA入口以及默认密码：Password1!，以及创建者主机信息：Acute-PC01以及Lois用户是网站管理员等信息；通过泄露的员工名，拼接首字母和后面的名，使用默认密码，成功撞库PSWA，获取立足点powershell，普通权限，用户名：acute\edavies。</p><p>后渗透阶段：</p><p>这台靶机目前最好还是使用meterpreter，完全避免使用meterpreter的话，会花费巨量时间，以及部分功能可能无法通过脚本实现。</p><p>后渗透-横向移动阶段1：</p><p>通过查看当前的远程登录会话，可以发现目前的用户acute\edavies是使用了RDP的，使用meterpreter的屏幕监控功能，查看当前用户的操作，发现了另外一台主机名为：ATSSERVER，以及一个相关凭证：密码：W3_4R3_th3_f0rce.用户：acute\imonks，使用powershell，申请凭证，获取到ATSSERVER普通权限，可以拿到第一个user.txt，同时使用这个用户可以发现Program Files目录下有个keepmeon目录，是用户安装的，非常规软件目录，但是当前\imonks用户没有权限进入。</p><p>后渗透-横向移动阶段2：</p><p>在第一个user.txt的附近有主机Acute-PC01的脚本信息，虽然密码进行了加密，但是可以修改脚本达到命令执行的效果，反弹一个脚本内用户的权限为：acute\jmorgan，属于本地管理员用户组，也就是说我们拿到了Acute-PC01主机的管理员权限。</p><p>后渗透-横向移动阶段3：</p><p>使用Acute-PC01主机的管理员权限dumphash，拿到本地administrator的密码，但是无法登录ATSSERVER，由于我们之前拥有ATSSERVER的imonks用户，通过查看用户目录，可以知道该主机有哪些用户登录过了，使用Acute-PC01主机的密码进行喷洒，成功获取了一个名为awallace的用户。</p><p>后渗透-横向移动阶段4：</p><p>awallace用户可以进去keepmeon目录，这个目录下面有个bat文件，内容为计划任务，执行者为Lois，该用户是最开始告诉我们的网站管理员，同时在域内查找用户组，可以发现，site_admin用户组，该用户组属于domain admin group用户组，也就是说这个计划任务可以让我们获得域管理员组权限，利用这个BAT提权成功，即可获得ATSSERVER主机的管理员权限，拿到最终的flag.</p><p>考点：1、信息收集；2、pswa；3、powershell熟练度；4、内网信息收集，密码获取；5、计划任务提权</p><p>放在最后：这个靶机的打法及其非常规，最开始的信息收集便在一直挑战打靶者的思路完善程度，内网的提权和信息收集过程，更是把两个机器当成一个整体的思维在进行渗透，信息收集的程度堪称离谱，powershell的熟悉程度也是一个不小的挑战，最后的来回横跳巨爽。</p><h1 id=0x008timelapse-简单-域渗透>0x008：Timelapse 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x008timelapse-简单-域渗透>#</a></h1><p>渗透思路：
smb匿名访问&ndash;>zip文件&ndash;>破解发现pfx文件&ndash;>再次破解&ndash;>提取出私钥和公钥&ndash;>wirm登录&ndash;>提权，通过查看powershell历史记录，发现账号密码&ndash;>发现该账号具有laps_readers组权限，可以读取administraor密码</p><p>考点：1、PFX；2、laps_readers</p><h1 id=0x009streamio-中等-域渗透>0x009：StreamIO 中等 域渗透<a hidden class=anchor aria-hidden=true href=#0x009streamio-中等-域渗透>#</a></h1><p>渗透思路：
web渗透&ndash;>注意证书的域名变化&ndash;>再次目录扫描&ndash;>发现sql注入&ndash;>获取网站的用户名和密码&ndash;>通过burp爆破，成功获取到合法用户&ndash;>进入后台，注意url存在?&ndash;>fuzz发现debug参数&ndash;>是个文件包含，需要使用base64带出&ndash;>这里的思路有点非常规，爆破当前目录，发现master.php，读取它&ndash;>发现它接收post提交的参数，并执行&ndash;>通过文件包含，并携带参数，命令执行反弹shell&ndash;>读取数据库账号密码&ndash;>winrm登录&ndash;>读取浏览器密码&ndash;>获取到JDgodd用户权限&ndash;>修改CORE STAFF组的拥有者为JDgodd，把自己添加到组内，并修改dacl，读取密码</p><p>考点：1、web渗透的细节；2、sql注入；3、fuzz；4、文件包含；5、代码审计；6、密码获取；7、writeowner权限；8、ldap密码获取</p><h1 id=0x012active-简单-域渗透>0x012：Active 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x012active-简单-域渗透>#</a></h1><p>渗透思路：
smb匿名登录&ndash;>发现SYSVOL目录下的gpp组策略文件&ndash;>恢复密码&ndash;>登录smb可以发现flag&ndash;>提权kerberoasting&ndash;>获取administrator成功登录</p><p>考点：1、gpp组策略目录C:\Windows\SYSVOL\DOMAIN\Policies\ ；2、kerberoasting</p><h1 id=0x013forest-简单-域渗透>0x013：Forest 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x013forest-简单-域渗透>#</a></h1><p>渗透思路：
ldap匿名访问&ndash;>获取用户名&ndash;>AS-REP Roasting&ndash;>提权&ndash;>bloodhound&mdash;>当前用户拥有写入EXCHANGE WINDOWS PERMISSIONS组的权限&ndash;>EXCHANGE WINDOWS PERMISSIONS可以修改权限，赋予自己dcsync权限&ndash;>dump hash&ndash;>登录administrator</p><p>考点：1、AS-REP Roasting；2、写入权限；3、组完全修改控制权；4、bloodhound即可完成</p><h1 id=0x014return-简单-域渗透>0x014：Return 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x014return-简单-域渗透>#</a></h1><p>渗透思路：</p><p>打印机web NTLM relay &ndash;>winpeass &ndash;>服务提权</p><p>考点：1、NTLM relay；2、服务提权</p><h1 id=0x015sauna-简单-域渗透>0x015：Sauna 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x015sauna-简单-域渗透>#</a></h1><p>渗透思路：
web页面信息收集，需要手动，名字姓名组合&ndash;>AS-REP Roasting&ndash;>bloodhound发现一个用户具有dcsync权限&ndash;>winpeass发现密码&ndash;>dump即可</p><p>考点：1、信息收集；2、AS-REP Roasting；3、bloodhound</p><h1 id=0x016support-简单-域渗透>0x016：Support 简单 域渗透<a hidden class=anchor aria-hidden=true href=#0x016support-简单-域渗透>#</a></h1><p>渗透思路：
smb匿名登录&ndash;>添加域名的情况下运行程序&ndash;>抓包获取ldap账号密码&ndash;>ldap查找到密码信息&ndash;>基于资源的约束型委派</p><p>考点：1、ldap信息获取；2、基于资源的约束型委派</p><h1 id=0x017blackfield-困难-域渗透>0x017：blackfield 困难 域渗透<a hidden class=anchor aria-hidden=true href=#0x017blackfield-困难-域渗透>#</a></h1><p>渗透思路：
smb匿名登录&ndash;>发现用户名&ndash;>AS-REP&ndash;>bloodhound&ndash;>该用户拥有修改AUDIT2020用户的权限&ndash;>再次登录smb&ndash;>发现lsass程序内存dump&ndash;>发现几个用户的可用信息&ndash;>通过bloodhound的指引，利用BACKUP OPERATORS组的用户的权限备份ntds.dit数据库，里面有整个域内的hash&ndash;>成功获得administrator</p><p>考点：1、AS-REP；2、changepassword权限；3、lsass dump；4、BACKUP OPERATORS组权限；5、ntds.dit数据库；</p><h1 id=0x018matis-困难-域渗透>0x018：matis 困难 域渗透<a hidden class=anchor aria-hidden=true href=#0x018matis-困难-域渗透>#</a></h1><p>渗透思路：
web 目录扫描&ndash;>发现数据库账号和加密了的密码&ndash;>登录mssql&ndash;>数据库内发现账号密码&ndash;>ldap可登录&ndash;>几乎试完了所有的常规思路&ndash;>ms14-068</p><p>考点：1、目录扫描仔细程度；2、16进制转字符串；3、域渗透思路完善程度，最后尝试ms14-068</p><h1 id=0x019object-困难-域渗透>0x019：object 困难 域渗透<a hidden class=anchor aria-hidden=true href=#0x019object-困难-域渗透>#</a></h1><p>渗透思路：
web渗透发现jenkins页面&ndash;>可以注册用户&ndash;>可以通过build project来执行命令&ndash;>不过没有创建项目的按钮，需要使用api的方式来进行&ndash;>反弹shell失败，但是可以读取文件&ndash;>读取jenkins用户配置文件&mdash;>复原密码&ndash;>最后成功登录&ndash;>bloodhound 其实提示得比较明显&ndash;>changepasswd&ndash;>Genericwrite，但是这里有问题，理论上我们可以直接拿到目标的权限，但是这里有防火墙干扰，同时又无回显，最后发现桌面的xls表格成功跳转&ndash;>Writeowner&ndash;>domain admins</p><p>考点：1、大量的实操经验；2、信息收集的能力；3、jenkins利用中的小细节，比如二进制读取和复原；4、bloodhound</p><h1 id=0x020reel-困难-域渗透>0x020：Reel 困难 域渗透<a hidden class=anchor aria-hidden=true href=#0x020reel-困难-域渗透>#</a></h1><p>渗透思路：</p><p>ftp匿名登录&ndash;>发现提示留言，会查看rtf格式的文件&ndash;>发送钓鱼邮件，RTF调用宏进行上线&ndash;>桌面存在提示信息cred.xml，该文件是 PSCredential 对象当中Export-CliXml方法输出的 XML 文档，可以恢复&ndash;>成功登录后，发现一个csv文件，为bloodhound的结果文件&ndash;>WriteOwner&ndash;>WriteDacl&ndash;>通过Backup_Admins组权限，读取桌面上的Backup文件夹，发现有管理员密码</p><p>考点：1、大量的实操经验；2、rtf文件getshell；3、PSCredential 对象存储密码；4、csv bloodhound；5、WriteOwner和WriteDacl</p><h1 id=0x021search-困难-域渗透>0x021：Search 困难 域渗透<a hidden class=anchor aria-hidden=true href=#0x021search-困难-域渗透>#</a></h1><p>渗透思路：</p><p>经过大量的常规思路，发现无果后，发现web页面的图片有账号密码&ndash;>bloodhound&ndash;>kerberoasting&ndash;>返回看smb&ndash;>发现大量用户名&ndash;>密码喷洒发现新可用账户&ndash;>再次查看smb&ndash;>在当前用户名的目录下发现xlsx文件&ndash;>第二行有隐藏，但是使用wps敲一下行数就看得到&ndash;>再次爆破，成功获得新可用账户&ndash;>bloodhound路线获取domain admin</p><p>考点：1、信息收集；2、信息收集；3、信息收集</p><h1 id=0x022cascade--中等-域渗透>0x022：cascade 中等 域渗透<a hidden class=anchor aria-hidden=true href=#0x022cascade--中等-域渗透>#</a></h1><p>渗透思路：</p><p>ldap匿名访问&ndash;>查看敏感信息，发现账号密码&ndash;>登录smb&ndash;>发现vnc注册表信息&ndash;>破解后登录成功&ndash;>使用新的账号密码再次登录smb&ndash;>发现sqlite文件，密码加密&ndash;>同目录的exe程序可解密&ndash;>逆向获取aes信息&ndash;>破解成功&ndash;>AD Recycle组&ndash;>查看删除用户的详细信息&ndash;>该密码和administraotr一样，这一点最开始的smb文件中有提及</p><p>考点：1、信息收集；2、VNC；3、aes解密；4、AD Recycle组</p><h1 id=0x023escape-中等-域渗透>0x023：Escape 中等 域渗透<a hidden class=anchor aria-hidden=true href=#0x023escape-中等-域渗透>#</a></h1><p>渗透思路：</p><p>smb匿名访问&ndash;>发现mssql账号密码&ndash;>登录mssql进行relay&ndash;>查看mssql 日志&ndash;>发现账户密码&ndash;>adcs ESC1</p><p>考点：1、mssql relay；2、mssql 日志；3、adcs ESC1</p><p>怎么说呢，最短路径很短，但是无脑打的话，就很漫长了</p><h1 id=0x024intelligence-中等-域渗透>0x024：Intelligence 中等 域渗透<a hidden class=anchor aria-hidden=true href=#0x024intelligence-中等-域渗透>#</a></h1><p>渗透思路：</p><p>web渗透发现文件可枚举&ndash;>文件中有可用密码信息&ndash;>提取所有文件的创建人信息&ndash;>密码喷洒&ndash;>成功获取到账户&ndash;>登录smb&ndash;>发现计划任务脚本&mdash;>添加dns解析到本机&ndash;>等待中继&ndash;>破解&ndash;>bloodhound&ndash;>提权到administrator</p><p>考点：1、文件创建者；2、信息获取；3、中继；4、dns解析</p><h1 id=0x025monteverde-中等-域渗透>0x025：monteverde 中等 域渗透<a hidden class=anchor aria-hidden=true href=#0x025monteverde-中等-域渗透>#</a></h1><p>渗透思路：</p><p>ldap匿名登录&ndash;>获取用户名&ndash;>爆破，用户名即是密码&ndash;>登录smb&ndash;>发现其中一个文件含有密码&ndash;>密码喷洒&ndash;>登录&ndash;>通过Azure AD来获取密码&ndash;>登录administrator</p><p>考点：1、ldap匿名登录；2、Azure AD</p><h1 id=0x032aero-中等-非域>0x032：Aero 中等 非域<a hidden class=anchor aria-hidden=true href=#0x032aero-中等-非域>#</a></h1><p>渗透思路：</p><p>web页面发现这是一个win11主题的网站 &ndash;>通过github的信息复现漏洞&ndash;>用户文档文件夹中存在一个cve，通过那个cve直接打就行</p><p>考点：漏洞识别和复现</p><h1 id=0x033atom-中等-非域>0x033：Atom 中等 非域<a hidden class=anchor aria-hidden=true href=#0x033atom-中等-非域>#</a></h1><p>渗透思路：</p><p>smb发现文档和程序&ndash;>程序抓包&ndash;>发现会更新程序&ndash;>利用这种更新机制，以及smb文档的解释，可以构造POC来getshell&ndash;>读取redis密码&ndash;>登录redis&ndash;>发现加密密码&ndash;>破解&ndash;>administrator</p><p>考点：1、更新机制getsgell；2、PortableKanban密码解密</p><h1 id=0x034querier-中等-非域>0x034：Querier 中等 非域<a hidden class=anchor aria-hidden=true href=#0x034querier-中等-非域>#</a></h1><p>渗透思路：</p><p>smb匿名登录&ndash;>发现带宏的excel表格&ndash;>提取宏脚本&ndash;>获取sqlserver账密信息&ndash;>中继获取hash&ndash;>重新登录sqlserver&ndash;>xp_cmd&ndash;>winpeass发现gpp组策略密码&ndash;>administrator登录成功</p><p>考点：1、宏提取；2、中继；3、gpp组策略</p><h1 id=0x035sniper-中等-非域>0x035：Sniper 中等 非域<a hidden class=anchor aria-hidden=true href=#0x035sniper-中等-非域>#</a></h1><p>渗透思路：</p><p>web渗透发现文件包含&ndash;>通过文件包含读取session文件&ndash;>发现seesion文件中存在用户名&ndash;>把webshell写入用户名中&ndash;>反弹shell&ndash;>数据库账号密码&ndash;>爆破发现是web中某个用户的密码&ndash;>反弹shell&ndash;>在用户文件夹中发现chm文件&ndash;>构造chm的payload&ndash;>中继获取administrator的ntlm hash&ndash;>破解登录</p><p>考点：1、php在windows中的session格式共和存储位置；2、powershell切换身份；3、chmpayload构造</p><h1 id=0x036breadcrumbs-困难-非域>0x036：BreadCrumbs 困难 非域<a hidden class=anchor aria-hidden=true href=#0x036breadcrumbs-困难-非域>#</a></h1><p>渗透思路：</p><p>目录扫描发现登录框&ndash;>注册账户发现用户名&ndash;>发现文件包含&ndash;>读取登录相关代码&ndash;>代码审计&ndash;>伪造登录身份&ndash;>jwt也得伪造，可以读取文件，有key可以伪造&ndash;>替换关键词，免杀&ndash;>web目录发现记录用户信息的文件&ndash;>发现密码&ndash;>桌面发现提示&ndash;>曾经使用过Microsoft Store Sticky Notes记录密码&ndash;>可以进行恢复&ndash;>获取新用户身份&ndash;>在用户目录下发现linux程序&ndash;>strings读取发现web访问记录&ndash;>端口转发本地1234端口&mdash;>发现administrator的aes_key&ndash;>发现sql注入&mdash;>注入获取aes加密密码&ndash;>解密登录</p><p>考点：这个靶机考点很多，包括：文件包含、代码审计、端口转发、简单免杀绕过、简单逆向、JWT、SQL注入、AES加密算法，一定的脚本编写能力</p><h1 id=0x038tally-困难-非域>0x038：Tally 困难 非域<a hidden class=anchor aria-hidden=true href=#0x038tally-困难-非域>#</a></h1><p>渗透思路：</p><p>web目录扫描得使用漏洞扫描字典&ndash;>发现文档信息&ndash;>发现ftp用户名和密码&ndash;>登录ftp&ndash;>发现keepass软件&ndash;>破解&ndash;>登录smb&ndash;>在某个目录下看到程序&ndash;>读取程序&ndash;>发现mssql账户密码&ndash;>登录mssql&ndash;>xp_cmd&ndash;>烂土豆提权</p><p>考点：1、目录扫描；2、keepass；3、逆向；4、xp_cmd；5、烂土豆提权</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/skill/001-js%E9%80%86%E5%90%91/><span class=title>« Prev</span><br><span>001 JS逆向</span>
</a><a class=next href=http://localhost:1313/posts/vulnhub/0x000-%E5%89%8D%E8%A8%80/><span class=title>Next »</span><br><span>0x000 前言</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>养猪日记</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>