<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.135.0"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>养猪日记</title>
<meta name=keywords content="Blog"><meta name=description content="养猪日记"><meta name=author content="养猪日记"><link rel=canonical href=http://localhost:1313/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=http://localhost:1313/index.xml><link rel=alternate type=application/json href=http://localhost:1313/index.json><link rel=alternate hreflang=en href=http://localhost:1313/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=分类><span>分类</span></a></li><li><a href=http://localhost:1313/search/ title=搜索><span>搜索</span></a></li><li><a href=https://github.com/yangzhuzai title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>0x008 Connect The Dots 1</h2></header><div class=entry-content><p>端口扫描 目录扫描 WEB渗透 web渗透一段实践后无果，查看其他端口：
nfs可挂载：
收集信息：
发现密钥：
但是无法连接：
至此思路断了，后面看WP，说看mysite中的cs文件，我最开始打眼一看，以为是css就是没管，没想到是CS，随后又是一个JSfuck编码和解码： 获得密码：TryToGuessThisNorris@2k19
尝试登录：
提权 搜查了一圈没看到太多信息，盲猜可能需要提权到morris才能提到root
在html目录下查到了一个swp文件
想办法复原后出现密码：blehguessme090
获得morris成功
polkit提权
除了这个办法之外，看了一下评论区的https://github.com/dzonerzy/poc-cve-2021-4034/releases/tag/v0.2</p></div><footer class=entry-footer><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;18 words&nbsp;·&nbsp;养猪日记</footer><a class=entry-link aria-label="post link to 0x008 Connect The Dots 1" href=http://localhost:1313/posts/vulnhub/0x008-connect-the-dots-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>0X008 Timelapse</h2></header><div class=entry-content><p>端口扫描 获取立足点 smb匿名访问：
疑似重置后的密码？
7c3XlgsE
有密码：
破解：
但是这东西怎么用呢，后面刚好培训遇到了，pfx是一种存储个人信息的文件，简单理解可以理解为ssh密钥文件，不过普遍都是加密状态，需要解密，破解使用john即可：
thuglegacy
然后需要将从pfx格式的文件，
openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out key.pem -nodes
openssl pkcs12 -in legacyy_dev_auth.pfx -nokeys -out cert.pem
evil-winrm -i 10.10.11.152 -c cert.pem -k key.pem -S
提权 powershell历史文件位置：
$env:APPDATA\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt
可以看到账号密码：
$p = ConvertTo-SecureString ‘E3R$Q62^12p7PLlC%KWaxuaV’ -AsPlainText -Force
$c = New-Object System.Management.Automation.PSCredential (‘svc_deploy’, $p)
...</p></div><footer class=entry-footer><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;61 words&nbsp;·&nbsp;养猪日记</footer><a class=entry-link aria-label="post link to 0X008 Timelapse" href=http://localhost:1313/posts/htb/0x008-timelapse/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>0x009 Me and My Girlfriend 1</h2></header><div class=entry-content><p>端口扫描 目录扫描 WEB渗透 打开页面会提示只允许本地登录，通过插件添加x-forwarded-for字段即可：
注册账号登录，发现越权，获得账号密码，可能存在sql注入？后面跑了一下，看样子是没有：
Eweuh Tandingan
eweuhtandingan
skuyatuh
用burp把所有的用户名提取出来：
两个问题：1是kali自带的burp为社区版，不支持导出，2是脚本有点垃圾，需要手动删除一点儿垃圾
import os
def extract_name(file_path):
with open(file_path, 'r') as file:
content = file.read()
start_index = content.find('id="password" value="')
if start_index != -1:
start_index += len('id="password" value="')
end_index = content.find('"', start_index)
if end_index != -1:
return content[start_index:end_index]
return None
def process_files(folder_path):
output_file = 'password.txt'
with open(output_file, 'w') as file:
for root, dirs, files in os.walk(folder_path):
for file_name in files:
file_path = os.path.join(root, file_name)
name = extract_name(file_path)
if name is not None:
file.write(name + '\n')
folder_path = './'
process_files(folder_path) 成功获得账户密码：
...</p></div><footer class=entry-footer><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;96 words&nbsp;·&nbsp;养猪日记</footer><a class=entry-link aria-label="post link to 0x009 Me and My Girlfriend 1" href=http://localhost:1313/posts/vulnhub/0x009-me-and-my-girlfriend-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>0X009 StreamIO</h2></header><div class=entry-content><p>端口扫描 获取立足点 从端口开放情况来看，值得关注的端口有：80、389、443、445、3268、5985：
先看445和389，3268等：
那么突破口应该就在80或者443了：
简单看了一下首页，没有东西，目录扫描看看：
有注册和登录：
简单试了一下，好像没有万能密码，注册一个看看：
但是不让登录：
查看证书，发现域名好像不对：
访问这个网站：
好像也没有东西，再扫一下：
发现新内容：
疑似sql注入：
输入1‘–+
但是好像有拦截：
order by用不了，只能用select 挨个操作：
测了半天，发现是个sqlserver:
当前数据库名称为
STREAMIO
表名：
列名：
爆用户：
James ,Theodore ,Samantha ,Lauren ,William ,Sabrina ,Robert ,Thane ,Carmon ,Barry ,Oliver ,Michelle ,Gloria ,Victoria ,Alexendra ,Baxter ,Clara ,Barbra ,Lenord ,Austin ,Garfield ,Juliette ,Victor ,Lucifer ,Bruno ,Diablo ,Robin ,Stan ,yoshihide ,admin ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,cxk ,aikun
...</p></div><footer class=entry-footer><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;200 words&nbsp;·&nbsp;养猪日记</footer><a class=entry-link aria-label="post link to 0X009 StreamIO" href=http://localhost:1313/posts/htb/0x009-streamio/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>0x010 My File Server 1</h2></header><div class=entry-content><p>端口扫描 信息收集 21端口，有匿名登录，但是目前来看没有发现什么有效的东西：
2049 nfs端口，这里遇到一个问题，似乎只有同一网段才能挂载成功：
NFS内容看起来和FTP一样，但是权限高不少：
发现多个用户名，根据家目录和环境判断，其中smbuser大概率是可以登录的：
80端口：
发现密码rootroot1
但是ssh连接失败：
那就剩下最后一个端口：445
匿名登录：
说实话打到这里基本上，已经没有思路了，基本能看的地方都看了，手里拿到了一个账户和密码，但是无法登录，看了一下wp，让我登录FTP再看看，没想到再次登录FTP的：
生成公私钥：
上传：
这里有坑，使用kali默认的私钥名字连不上，改成其他名字一下就可以了
提权 有GCC可以用内核提权：
随便找了一个2021-4034：
总结 此靶机不是单纯的集中某个技能点，而是需要反复的进行信息收集，极其容易导致遗漏。</p></div><footer class=entry-footer><span title='2024-10-11 14:25:59 +0800 CST'>October 11, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;21 words&nbsp;·&nbsp;养猪日记</footer><a class=entry-link aria-label="post link to 0x010 My File Server 1" href=http://localhost:1313/posts/vulnhub/0x010-my-file-server-1/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=http://localhost:1313/page/4/>«&nbsp;Prev&nbsp;
</a><a class=next href=http://localhost:1313/page/6/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>养猪日记</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>